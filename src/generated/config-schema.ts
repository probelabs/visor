// AUTO-GENERATED FILE. DO NOT EDIT.
// Generated by scripts/generate-config-schema.js from src/types/config.ts
export const configSchema = {
  $schema: 'http://json-schema.org/draft-07/schema#',
  $ref: '#/definitions/VisorConfigSchema',
  definitions: {
    VisorConfigSchema: {
      type: 'object',
      additionalProperties: false,
      properties: {
        hooks: {
          $ref: '#/definitions/Record%3Cstring%2Cunknown%3E',
        },
        version: {
          type: 'string',
          description: 'Configuration version',
        },
        extends: {
          anyOf: [
            {
              type: 'string',
            },
            {
              type: 'array',
              items: {
                type: 'string',
              },
            },
          ],
          description:
            'Extends from other configurations - can be file path, HTTP(S) URL, or "default"',
        },
        include: {
          anyOf: [
            {
              type: 'string',
            },
            {
              type: 'array',
              items: {
                type: 'string',
              },
            },
          ],
          description:
            'Alias for extends - include from other configurations (backward compatibility)',
        },
        tools: {
          $ref: '#/definitions/Record%3Cstring%2CCustomToolDefinition%3E',
          description: 'Custom tool definitions that can be used in MCP blocks',
        },
        imports: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: 'Import workflow definitions from external files or URLs',
        },
        steps: {
          $ref: '#/definitions/Record%3Cstring%2CCheckConfig%3E',
          description: 'Step configurations (recommended)',
        },
        checks: {
          $ref: '#/definitions/Record%3Cstring%2CCheckConfig%3E',
          description:
            "Check configurations (legacy, use 'steps' instead) - always populated after normalization",
        },
        output: {
          $ref: '#/definitions/OutputConfig',
          description: 'Output configuration',
        },
        http_server: {
          $ref: '#/definitions/HttpServerConfig',
          description: 'HTTP server configuration for receiving webhooks',
        },
        slack: {
          $ref: '#/definitions/SlackConfig',
          description: 'Slack bot configuration',
        },
        memory: {
          $ref: '#/definitions/MemoryConfig',
          description: 'Memory storage configuration',
        },
        env: {
          $ref: '#/definitions/EnvConfig',
          description: 'Global environment variables',
        },
        ai_model: {
          type: 'string',
          description: 'Global AI model setting',
        },
        ai_provider: {
          type: 'string',
          description: 'Global AI provider setting',
        },
        ai_mcp_servers: {
          $ref: '#/definitions/Record%3Cstring%2CMcpServerConfig%3E',
          description: 'Global MCP servers configuration for AI checks',
        },
        max_parallelism: {
          type: 'number',
          description: 'Maximum number of checks to run in parallel (default: 3)',
        },
        fail_fast: {
          type: 'boolean',
          description: 'Stop execution when any check fails (default: false)',
        },
        fail_if: {
          type: 'string',
          description: 'Simple global fail condition - fails if expression evaluates to true',
        },
        failure_conditions: {
          $ref: '#/definitions/FailureConditions',
          description: 'Global failure conditions - optional (deprecated, use fail_if)',
        },
        tag_filter: {
          $ref: '#/definitions/TagFilter',
          description: 'Tag filter for selective check execution',
        },
        routing: {
          $ref: '#/definitions/RoutingDefaults',
          description: 'Optional routing defaults for retry/goto/run policies',
        },
        limits: {
          $ref: '#/definitions/LimitsConfig',
          description: 'Global execution limits',
        },
      },
      required: ['output', 'version'],
      patternProperties: {
        '^x-': {},
      },
    },
    'Record<string,unknown>': {
      type: 'object',
      additionalProperties: {},
    },
    'Record<string,CustomToolDefinition>': {
      type: 'object',
      additionalProperties: {
        $ref: '#/definitions/CustomToolDefinition',
      },
    },
    CustomToolDefinition: {
      type: 'object',
      properties: {
        name: {
          type: 'string',
          description: 'Tool name - used to reference the tool in MCP blocks',
        },
        description: {
          type: 'string',
          description: 'Description of what the tool does',
        },
        inputSchema: {
          type: 'object',
          properties: {
            type: {
              type: 'string',
              const: 'object',
            },
            properties: {
              $ref: '#/definitions/Record%3Cstring%2Cunknown%3E',
            },
            required: {
              type: 'array',
              items: {
                type: 'string',
              },
            },
            additionalProperties: {
              type: 'boolean',
            },
          },
          required: ['type'],
          additionalProperties: false,
          description: 'Input schema for the tool (JSON Schema format)',
          patternProperties: {
            '^x-': {},
          },
        },
        exec: {
          type: 'string',
          description: 'Command to execute - supports Liquid template',
        },
        stdin: {
          type: 'string',
          description: 'Optional stdin input - supports Liquid template',
        },
        transform: {
          type: 'string',
          description: 'Transform the raw output - supports Liquid template',
        },
        transform_js: {
          type: 'string',
          description: 'Transform the output using JavaScript - alternative to transform',
        },
        cwd: {
          type: 'string',
          description: 'Working directory for command execution',
        },
        env: {
          $ref: '#/definitions/Record%3Cstring%2Cstring%3E',
          description: 'Environment variables for the command',
        },
        timeout: {
          type: 'number',
          description: 'Timeout in milliseconds',
        },
        parseJson: {
          type: 'boolean',
          description: 'Whether to parse output as JSON automatically',
        },
        outputSchema: {
          $ref: '#/definitions/Record%3Cstring%2Cunknown%3E',
          description: 'Expected output schema for validation',
        },
      },
      required: ['name', 'exec'],
      additionalProperties: false,
      description: 'Custom tool definition for use in MCP blocks',
      patternProperties: {
        '^x-': {},
      },
    },
    'Record<string,string>': {
      type: 'object',
      additionalProperties: {
        type: 'string',
      },
    },
    'Record<string,CheckConfig>': {
      type: 'object',
      additionalProperties: {
        $ref: '#/definitions/CheckConfig',
      },
    },
    CheckConfig: {
      type: 'object',
      properties: {
        type: {
          $ref: '#/definitions/ConfigCheckType',
          description: "Type of check to perform (defaults to 'ai' if not specified)",
        },
        prompt: {
          type: 'string',
          description:
            'AI prompt for the check - can be inline string or file path (auto-detected) - required for AI checks',
        },
        appendPrompt: {
          type: 'string',
          description:
            'Additional prompt to append when extending configurations - merged with parent prompt',
        },
        exec: {
          type: 'string',
          description:
            'Command execution with Liquid template support - required for command checks',
        },
        stdin: {
          type: 'string',
          description:
            'Stdin input for tools with Liquid template support - optional for tool checks',
        },
        url: {
          type: 'string',
          description: 'HTTP URL - required for http output checks',
        },
        body: {
          type: 'string',
          description: 'HTTP body template (Liquid) - required for http output checks',
        },
        method: {
          type: 'string',
          description: 'HTTP method (defaults to POST)',
        },
        headers: {
          $ref: '#/definitions/Record%3Cstring%2Cstring%3E',
          description: 'HTTP headers',
        },
        endpoint: {
          type: 'string',
          description: 'HTTP endpoint path - required for http_input checks',
        },
        transform: {
          type: 'string',
          description: 'Transform template for http_input data (Liquid) - optional',
        },
        transform_js: {
          type: 'string',
          description:
            'Transform using JavaScript expressions (evaluated in secure sandbox) - optional',
        },
        content: {
          type: 'string',
          description: 'Script content to execute for script checks',
        },
        schedule: {
          type: 'string',
          description: 'Cron schedule expression (e.g., "0 2 * * *") - optional for any check type',
        },
        focus: {
          type: 'string',
          description:
            'Focus area for the check (security/performance/style/architecture/all) - optional',
        },
        command: {
          type: 'string',
          description:
            'Command that triggers this check (e.g., "review", "security-scan") - optional',
        },
        on: {
          type: 'array',
          items: {
            $ref: '#/definitions/EventTrigger',
          },
          description: "Events that trigger this check (defaults to ['manual'] if not specified)",
        },
        triggers: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: 'File patterns that trigger this check (optional)',
        },
        ai: {
          $ref: '#/definitions/AIProviderConfig',
          description: 'AI provider configuration (optional)',
        },
        ai_model: {
          type: 'string',
          description: 'AI model to use for this check - overrides global setting',
        },
        ai_provider: {
          type: 'string',
          description: 'AI provider to use for this check - overrides global setting',
        },
        ai_persona: {
          type: 'string',
          description: "Optional persona hint, prepended to the prompt as 'Persona: <value>'",
        },
        ai_prompt_type: {
          type: 'string',
          description: 'Probe promptType for this check (underscore style)',
        },
        ai_system_prompt: {
          type: 'string',
          description: 'System prompt for this check (underscore style)',
        },
        ai_custom_prompt: {
          type: 'string',
          description: 'Legacy customPrompt (underscore style) — deprecated, use ai_system_prompt',
        },
        ai_mcp_servers: {
          $ref: '#/definitions/Record%3Cstring%2CMcpServerConfig%3E',
          description: 'MCP servers for this AI check - overrides global setting',
        },
        claude_code: {
          $ref: '#/definitions/ClaudeCodeConfig',
          description: 'Claude Code configuration (for claude-code type checks)',
        },
        env: {
          $ref: '#/definitions/EnvConfig',
          description: 'Environment variables for this check',
        },
        timeout: {
          type: 'number',
          description: 'Timeout in seconds for command execution (default: 60)',
        },
        depends_on: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: 'Check IDs that this check depends on (optional)',
        },
        group: {
          type: 'string',
          description:
            'Group name for comment separation (e.g., "code-review", "pr-overview") - optional',
        },
        schema: {
          anyOf: [
            {
              type: 'string',
            },
            {
              $ref: '#/definitions/Record%3Cstring%2Cunknown%3E',
            },
          ],
          description:
            'Schema type for template rendering (e.g., "code-review", "markdown") or inline JSON schema object - optional',
        },
        template: {
          $ref: '#/definitions/CustomTemplateConfig',
          description: 'Custom template configuration - optional',
        },
        if: {
          type: 'string',
          description:
            'Condition to determine if check should run - runs if expression evaluates to true',
        },
        reuse_ai_session: {
          type: ['string', 'boolean'],
          description:
            'Check name to reuse AI session from, or true to use first dependency (only works with depends_on)',
        },
        session_mode: {
          type: 'string',
          enum: ['clone', 'append'],
          description:
            "How to reuse AI session: 'clone' (default, copy history) or 'append' (share history)",
        },
        fail_if: {
          type: 'string',
          description: 'Simple fail condition - fails check if expression evaluates to true',
        },
        failure_conditions: {
          $ref: '#/definitions/FailureConditions',
          description: 'Check-specific failure conditions - optional (deprecated, use fail_if)',
        },
        tags: {
          type: 'array',
          items: {
            type: 'string',
          },
          description:
            'Tags for categorizing and filtering checks (e.g., ["local", "fast", "security"])',
        },
        continue_on_failure: {
          type: 'boolean',
          description:
            "Allow dependents to run even if this step fails. Defaults to false (dependents are gated when this step fails). Similar to GitHub Actions' continue-on-error.",
        },
        forEach: {
          type: 'boolean',
          description: 'Process output as array and run dependent checks for each item',
        },
        fanout: {
          type: 'string',
          enum: ['map', 'reduce'],
          description:
            "Control scheduling behavior when this check is triggered via routing (run/goto) from a forEach scope.\n- 'map': schedule once per item (fan-out) using item scopes.\n- 'reduce': schedule a single run at the parent scope (aggregation). If unset, the current default is a single run (reduce) for backward compatibility.",
        },
        reduce: {
          type: 'boolean',
          description: "Alias for fanout: 'reduce'",
        },
        on_fail: {
          $ref: '#/definitions/OnFailConfig',
          description: 'Failure routing configuration for this check (retry/goto/run)',
        },
        on_success: {
          $ref: '#/definitions/OnSuccessConfig',
          description:
            'Success routing configuration for this check (post-actions and optional goto)',
        },
        on_finish: {
          $ref: '#/definitions/OnFinishConfig',
          description:
            'Finish routing configuration for forEach checks (runs after ALL iterations complete)',
        },
        max_runs: {
          type: 'number',
          description:
            'Hard cap on how many times this check may execute within a single engine run. Overrides global limits.max_runs_per_check. Set to 0 or negative to disable for this step.',
        },
        message: {
          type: 'string',
          description: 'Message template for log checks',
        },
        level: {
          type: 'string',
          enum: ['debug', 'info', 'warn', 'error'],
          description: 'Log level for log checks',
        },
        include_pr_context: {
          type: 'boolean',
          description: 'Include PR context in log output',
        },
        include_dependencies: {
          type: 'boolean',
          description: 'Include dependency summaries in log output',
        },
        include_metadata: {
          type: 'boolean',
          description: 'Include execution metadata in log output',
        },
        output_format: {
          type: 'string',
          enum: ['json', 'text'],
          description:
            "Output parsing hint for command provider (optional) When set to 'json', command stdout is expected to be JSON. When 'text', treat as plain text. Note: command provider attempts JSON parsing heuristically; this flag mainly suppresses schema warnings and may be used by providers to alter parsing behavior in the future.",
        },
        operation: {
          type: 'string',
          enum: ['get', 'set', 'append', 'increment', 'delete', 'clear', 'list'],
          description: "Memory operation to perform. Use `type: 'script'` for custom JavaScript.",
        },
        key: {
          type: 'string',
          description: 'Key for memory operation',
        },
        value: {
          description: 'Value for set/append operations',
        },
        value_js: {
          type: 'string',
          description: 'JavaScript expression to compute value dynamically',
        },
        namespace: {
          type: 'string',
          description: 'Override namespace for this check',
        },
        op: {
          type: 'string',
          description:
            "GitHub operation to perform (e.g., 'labels.add', 'labels.remove', 'comment.create')",
        },
        values: {
          anyOf: [
            {
              type: 'array',
              items: {
                type: 'string',
              },
            },
            {
              type: 'string',
            },
          ],
          description: 'Values for GitHub operations (can be array or single value)',
        },
        transport: {
          type: 'string',
          enum: ['stdio', 'sse', 'http'],
          description:
            'Transport type for MCP: stdio (default), sse (legacy), or http (streamable HTTP)',
        },
        methodArgs: {
          $ref: '#/definitions/Record%3Cstring%2Cunknown%3E',
          description: 'Arguments to pass to the MCP method (supports Liquid templates)',
        },
        argsTransform: {
          type: 'string',
          description: 'Transform template for method arguments (Liquid)',
        },
        sessionId: {
          type: 'string',
          description: 'Session ID for HTTP transport (optional, server may generate one)',
        },
        command_args: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: 'Command arguments (for stdio transport in MCP checks)',
        },
        workingDirectory: {
          type: 'string',
          description: 'Working directory (for stdio transport in MCP checks)',
        },
        placeholder: {
          type: 'string',
          description: 'Placeholder text to show in input field',
        },
        allow_empty: {
          type: 'boolean',
          description: 'Allow empty input (default: false)',
        },
        multiline: {
          type: 'boolean',
          description: 'Support multiline input (default: false)',
        },
        default: {
          type: 'string',
          description: 'Default value if timeout occurs or empty input when allow_empty is true',
        },
        workflow: {
          type: 'string',
          description: 'Workflow ID or path to workflow file',
        },
        args: {
          $ref: '#/definitions/Record%3Cstring%2Cunknown%3E',
          description: 'Arguments/inputs for the workflow',
        },
        overrides: {
          $ref: '#/definitions/Record%3Cstring%2CPartial%3Cinterface-src_types_config.ts-11005-19723-src_types_config.ts-0-31882%3E%3E',
          description: 'Override specific step configurations in the workflow',
        },
        output_mapping: {
          $ref: '#/definitions/Record%3Cstring%2Cstring%3E',
          description: 'Map workflow outputs to check outputs',
        },
      },
      additionalProperties: false,
      description: 'Configuration for a single check',
      patternProperties: {
        '^x-': {},
      },
    },
    ConfigCheckType: {
      type: 'string',
      enum: [
        'ai',
        'command',
        'script',
        'http',
        'http_input',
        'http_client',
        'noop',
        'log',
        'memory',
        'github',
        'claude-code',
        'mcp',
        'human-input',
        'workflow',
      ],
      description: 'Valid check types in configuration',
    },
    EventTrigger: {
      type: 'string',
      enum: [
        'pr_opened',
        'pr_updated',
        'pr_closed',
        'issue_opened',
        'issue_comment',
        'manual',
        'schedule',
        'webhook_received',
      ],
      description: 'Valid event triggers for checks',
    },
    AIProviderConfig: {
      type: 'object',
      properties: {
        provider: {
          type: 'string',
          enum: ['google', 'anthropic', 'openai', 'bedrock', 'mock'],
          description: 'AI provider to use',
        },
        model: {
          type: 'string',
          description: 'Model name to use',
        },
        apiKey: {
          type: 'string',
          description: 'API key (usually from environment variables)',
        },
        timeout: {
          type: 'number',
          description: 'Request timeout in milliseconds',
        },
        debug: {
          type: 'boolean',
          description: 'Enable debug mode',
        },
        prompt_type: {
          type: 'string',
          description: 'Probe promptType to use (e.g., engineer, code-review, architect)',
        },
        system_prompt: {
          type: 'string',
          description: 'System prompt (baseline preamble). Replaces legacy custom_prompt.',
        },
        custom_prompt: {
          type: 'string',
          description:
            'Probe customPrompt (baseline/system prompt) — deprecated, use system_prompt',
        },
        skip_code_context: {
          type: 'boolean',
          description: 'Skip adding code context (diffs, files, PR info) to the prompt',
        },
        mcpServers: {
          $ref: '#/definitions/Record%3Cstring%2CMcpServerConfig%3E',
          description: 'MCP servers configuration',
        },
        enableDelegate: {
          type: 'boolean',
          description: 'Enable the delegate tool for task distribution to subagents',
        },
        retry: {
          $ref: '#/definitions/AIRetryConfig',
          description: 'Retry configuration for this provider',
        },
        fallback: {
          $ref: '#/definitions/AIFallbackConfig',
          description: 'Fallback configuration for provider failures',
        },
        allowEdit: {
          type: 'boolean',
          description:
            'Enable Edit and Create tools for file modification (disabled by default for security)',
        },
        allowedTools: {
          type: 'array',
          items: {
            type: 'string',
          },
          description:
            'Filter allowed tools - supports whitelist, exclusion (!prefix), or raw AI mode (empty array)',
        },
        disableTools: {
          type: 'boolean',
          description: 'Disable all tools for raw AI mode (alternative to allowedTools: [])',
        },
        allowBash: {
          type: 'boolean',
          description: 'Enable bash command execution (shorthand for bashConfig.enabled)',
        },
        bashConfig: {
          $ref: '#/definitions/BashConfig',
          description: 'Advanced bash command execution configuration',
        },
      },
      additionalProperties: false,
      description: 'AI provider configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    'Record<string,McpServerConfig>': {
      type: 'object',
      additionalProperties: {
        $ref: '#/definitions/McpServerConfig',
      },
    },
    McpServerConfig: {
      type: 'object',
      properties: {
        command: {
          type: 'string',
          description: 'Command to execute for the MCP server',
        },
        args: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: 'Arguments to pass to the command',
        },
        env: {
          $ref: '#/definitions/Record%3Cstring%2Cstring%3E',
          description: 'Environment variables for the MCP server',
        },
      },
      required: ['command'],
      additionalProperties: false,
      description: 'MCP Server configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    AIRetryConfig: {
      type: 'object',
      properties: {
        maxRetries: {
          type: 'number',
          description: 'Maximum retry attempts (0-50)',
        },
        initialDelay: {
          type: 'number',
          description: 'Initial delay in milliseconds (0-60000)',
        },
        maxDelay: {
          type: 'number',
          description: 'Maximum delay cap in milliseconds (0-300000)',
        },
        backoffFactor: {
          type: 'number',
          description: 'Exponential backoff multiplier (1-10)',
        },
        retryableErrors: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: 'Custom error patterns to retry on',
        },
      },
      additionalProperties: false,
      description: 'Retry configuration for AI provider calls',
      patternProperties: {
        '^x-': {},
      },
    },
    AIFallbackConfig: {
      type: 'object',
      properties: {
        strategy: {
          type: 'string',
          enum: ['same-model', 'same-provider', 'any', 'custom'],
          description: "Fallback strategy: 'same-model', 'same-provider', 'any', or 'custom'",
        },
        providers: {
          type: 'array',
          items: {
            $ref: '#/definitions/AIFallbackProviderConfig',
          },
          description: 'Array of fallback provider configurations',
        },
        maxTotalAttempts: {
          type: 'number',
          description: 'Maximum total attempts across all providers',
        },
        auto: {
          type: 'boolean',
          description: 'Enable automatic fallback using available environment variables',
        },
      },
      additionalProperties: false,
      description: 'Fallback configuration for AI providers',
      patternProperties: {
        '^x-': {},
      },
    },
    AIFallbackProviderConfig: {
      type: 'object',
      properties: {
        provider: {
          type: 'string',
          enum: ['google', 'anthropic', 'openai', 'bedrock'],
          description: 'AI provider to use',
        },
        model: {
          type: 'string',
          description: 'Model name to use',
        },
        apiKey: {
          type: 'string',
          description: 'API key for this provider',
        },
        maxRetries: {
          type: 'number',
          description: 'Per-provider retry override',
        },
        region: {
          type: 'string',
          description: 'AWS region (for Bedrock)',
        },
        accessKeyId: {
          type: 'string',
          description: 'AWS access key ID (for Bedrock)',
        },
        secretAccessKey: {
          type: 'string',
          description: 'AWS secret access key (for Bedrock)',
        },
      },
      required: ['provider', 'model'],
      additionalProperties: false,
      description: 'Fallback provider configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    BashConfig: {
      type: 'object',
      properties: {
        allow: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: "Array of permitted command patterns (e.g., ['ls', 'git status'])",
        },
        deny: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: "Array of blocked command patterns (e.g., ['rm -rf', 'sudo'])",
        },
        noDefaultAllow: {
          type: 'boolean',
          description: 'Disable default safe command list (use with caution)',
        },
        noDefaultDeny: {
          type: 'boolean',
          description: 'Disable default dangerous command blocklist (use with extreme caution)',
        },
        timeout: {
          type: 'number',
          description: 'Execution timeout in milliseconds',
        },
        workingDirectory: {
          type: 'string',
          description: 'Default working directory for command execution',
        },
      },
      additionalProperties: false,
      description:
        "Bash command execution configuration for ProbeAgent Note: Use 'allowBash: true' in AIProviderConfig to enable bash execution",
      patternProperties: {
        '^x-': {},
      },
    },
    ClaudeCodeConfig: {
      type: 'object',
      properties: {
        allowedTools: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: 'List of allowed tools for Claude Code to use',
        },
        maxTurns: {
          type: 'number',
          description: 'Maximum number of turns in conversation',
        },
        systemPrompt: {
          type: 'string',
          description: 'System prompt for Claude Code',
        },
        mcpServers: {
          $ref: '#/definitions/Record%3Cstring%2CMcpServerConfig%3E',
          description: 'MCP servers configuration',
        },
        subagent: {
          type: 'string',
          description: 'Path to subagent script',
        },
        enableDelegate: {
          type: 'boolean',
          description: 'Enable the delegate tool for task distribution to subagents',
        },
        hooks: {
          type: 'object',
          properties: {
            onStart: {
              type: 'string',
              description: 'Called when check starts',
            },
            onEnd: {
              type: 'string',
              description: 'Called when check ends',
            },
            onError: {
              type: 'string',
              description: 'Called when check encounters an error',
            },
          },
          additionalProperties: false,
          description: 'Event hooks for lifecycle management',
          patternProperties: {
            '^x-': {},
          },
        },
      },
      additionalProperties: false,
      description: 'Claude Code configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    EnvConfig: {
      type: 'object',
      additionalProperties: {
        type: ['string', 'number', 'boolean'],
      },
      description: 'Environment variable reference configuration',
    },
    CustomTemplateConfig: {
      type: 'object',
      properties: {
        file: {
          type: 'string',
          description: 'Path to custom template file (relative to config file or absolute)',
        },
        content: {
          type: 'string',
          description: 'Raw template content as string',
        },
      },
      additionalProperties: false,
      description: 'Custom template configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    FailureConditions: {
      type: 'object',
      additionalProperties: {
        $ref: '#/definitions/FailureCondition',
      },
      description: 'Collection of failure conditions',
    },
    FailureCondition: {
      anyOf: [
        {
          $ref: '#/definitions/SimpleFailureCondition',
        },
        {
          $ref: '#/definitions/ComplexFailureCondition',
        },
      ],
      description: 'Failure condition - can be a simple expression string or complex object',
    },
    SimpleFailureCondition: {
      type: 'string',
      description: 'Simple failure condition - just an expression string',
    },
    ComplexFailureCondition: {
      type: 'object',
      properties: {
        condition: {
          type: 'string',
          description: 'Expression to evaluate using Function Constructor',
        },
        message: {
          type: 'string',
          description: 'Human-readable message when condition is met',
        },
        severity: {
          $ref: '#/definitions/FailureConditionSeverity',
          description: 'Severity level of the failure',
        },
        halt_execution: {
          type: 'boolean',
          description: 'Whether this condition should halt execution',
        },
      },
      required: ['condition'],
      additionalProperties: false,
      description: 'Complex failure condition with additional metadata',
      patternProperties: {
        '^x-': {},
      },
    },
    FailureConditionSeverity: {
      type: 'string',
      enum: ['error', 'warning', 'info'],
      description: 'Failure condition severity levels',
    },
    OnFailConfig: {
      type: 'object',
      properties: {
        retry: {
          $ref: '#/definitions/RetryPolicy',
          description: 'Retry policy',
        },
        run: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: 'Remediation steps to run before reattempt',
        },
        goto: {
          type: 'string',
          description: 'Jump back to an ancestor step (by id)',
        },
        goto_event: {
          $ref: '#/definitions/EventTrigger',
          description: "Simulate a different event when performing goto (e.g., 'pr_updated')",
        },
        goto_js: {
          type: 'string',
          description: 'Dynamic goto: JS expression returning step id or null',
        },
        run_js: {
          type: 'string',
          description: 'Dynamic remediation list: JS expression returning string[]',
        },
      },
      additionalProperties: false,
      description: 'Failure routing configuration per check',
      patternProperties: {
        '^x-': {},
      },
    },
    RetryPolicy: {
      type: 'object',
      properties: {
        max: {
          type: 'number',
          description: 'Maximum retry attempts (excluding the first attempt)',
        },
        backoff: {
          $ref: '#/definitions/BackoffPolicy',
          description: 'Backoff policy',
        },
      },
      additionalProperties: false,
      description: 'Retry policy for a step',
      patternProperties: {
        '^x-': {},
      },
    },
    BackoffPolicy: {
      type: 'object',
      properties: {
        mode: {
          type: 'string',
          enum: ['fixed', 'exponential'],
          description: 'Backoff mode',
        },
        delay_ms: {
          type: 'number',
          description: 'Initial delay in milliseconds',
        },
      },
      additionalProperties: false,
      description: 'Backoff policy for retries',
      patternProperties: {
        '^x-': {},
      },
    },
    OnSuccessConfig: {
      type: 'object',
      properties: {
        run: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: 'Post-success steps to run',
        },
        goto: {
          type: 'string',
          description: 'Optional jump back to ancestor step (by id)',
        },
        goto_event: {
          $ref: '#/definitions/EventTrigger',
          description: "Simulate a different event when performing goto (e.g., 'pr_updated')",
        },
        goto_js: {
          type: 'string',
          description: 'Dynamic goto: JS expression returning step id or null',
        },
        run_js: {
          type: 'string',
          description: 'Dynamic post-success steps: JS expression returning string[]',
        },
      },
      additionalProperties: false,
      description: 'Success routing configuration per check',
      patternProperties: {
        '^x-': {},
      },
    },
    OnFinishConfig: {
      type: 'object',
      properties: {
        run: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: 'Post-finish steps to run',
        },
        goto: {
          type: 'string',
          description: 'Optional jump back to ancestor step (by id)',
        },
        goto_event: {
          $ref: '#/definitions/EventTrigger',
          description: "Simulate a different event when performing goto (e.g., 'pr_updated')",
        },
        goto_js: {
          type: 'string',
          description: 'Dynamic goto: JS expression returning step id or null',
        },
        run_js: {
          type: 'string',
          description: 'Dynamic post-finish steps: JS expression returning string[]',
        },
      },
      additionalProperties: false,
      description:
        'Finish routing configuration for forEach checks Runs once after ALL iterations of forEach and ALL dependent checks complete',
      patternProperties: {
        '^x-': {},
      },
    },
    'Record<string,Partial<interface-src_types_config.ts-11005-19723-src_types_config.ts-0-31882>>':
      {
        type: 'object',
        additionalProperties: {
          $ref: '#/definitions/Partial%3Cinterface-src_types_config.ts-11005-19723-src_types_config.ts-0-31882%3E',
        },
      },
    'Partial<interface-src_types_config.ts-11005-19723-src_types_config.ts-0-31882>': {
      type: 'object',
      additionalProperties: false,
    },
    OutputConfig: {
      type: 'object',
      properties: {
        pr_comment: {
          $ref: '#/definitions/PrCommentOutput',
          description: 'PR comment configuration',
        },
        file_comment: {
          $ref: '#/definitions/FileCommentOutput',
          description: 'File comment configuration (optional)',
        },
        github_checks: {
          $ref: '#/definitions/GitHubCheckOutput',
          description: 'GitHub check runs configuration (optional)',
        },
        suppressionEnabled: {
          type: 'boolean',
          description:
            'Whether to enable issue suppression via visor-disable comments (default: true)',
        },
      },
      required: ['pr_comment'],
      additionalProperties: false,
      description: 'Output configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    PrCommentOutput: {
      type: 'object',
      properties: {
        format: {
          $ref: '#/definitions/ConfigOutputFormat',
          description: 'Format of the output',
        },
        group_by: {
          $ref: '#/definitions/GroupByOption',
          description: 'How to group the results',
        },
        collapse: {
          type: 'boolean',
          description: 'Whether to collapse sections by default',
        },
        debug: {
          $ref: '#/definitions/DebugConfig',
          description: 'Debug mode configuration (optional)',
        },
      },
      required: ['format', 'group_by', 'collapse'],
      additionalProperties: false,
      description: 'PR comment output configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    ConfigOutputFormat: {
      type: 'string',
      enum: ['table', 'json', 'markdown', 'sarif'],
      description: 'Valid output formats',
    },
    GroupByOption: {
      type: 'string',
      enum: ['check', 'file', 'severity', 'group'],
      description: 'Valid grouping options',
    },
    DebugConfig: {
      type: 'object',
      properties: {
        enabled: {
          type: 'boolean',
          description: 'Enable debug mode',
        },
        includePrompts: {
          type: 'boolean',
          description: 'Include AI prompts in debug output',
        },
        includeRawResponses: {
          type: 'boolean',
          description: 'Include raw AI responses in debug output',
        },
        includeTiming: {
          type: 'boolean',
          description: 'Include timing information',
        },
        includeProviderInfo: {
          type: 'boolean',
          description: 'Include provider information',
        },
      },
      required: [
        'enabled',
        'includePrompts',
        'includeRawResponses',
        'includeTiming',
        'includeProviderInfo',
      ],
      additionalProperties: false,
      description: 'Debug mode configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    FileCommentOutput: {
      type: 'object',
      properties: {
        enabled: {
          type: 'boolean',
          description: 'Whether file comments are enabled',
        },
        inline: {
          type: 'boolean',
          description: 'Whether to show inline comments',
        },
      },
      required: ['enabled', 'inline'],
      additionalProperties: false,
      description: 'File comment output configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    GitHubCheckOutput: {
      type: 'object',
      properties: {
        enabled: {
          type: 'boolean',
          description: 'Whether GitHub check runs are enabled',
        },
        per_check: {
          type: 'boolean',
          description: 'Whether to create individual check runs per configured check',
        },
        name_prefix: {
          type: 'string',
          description: 'Custom name prefix for check runs',
        },
      },
      required: ['enabled', 'per_check'],
      additionalProperties: false,
      description: 'GitHub Check Runs output configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    HttpServerConfig: {
      type: 'object',
      properties: {
        enabled: {
          type: 'boolean',
          description: 'Whether HTTP server is enabled',
        },
        port: {
          type: 'number',
          description: 'Port to listen on',
        },
        host: {
          type: 'string',
          description: 'Host/IP to bind to (defaults to 0.0.0.0)',
        },
        tls: {
          $ref: '#/definitions/TlsConfig',
          description: 'TLS/SSL configuration for HTTPS',
        },
        auth: {
          $ref: '#/definitions/HttpAuthConfig',
          description: 'Authentication configuration',
        },
        endpoints: {
          type: 'array',
          items: {
            $ref: '#/definitions/HttpEndpointConfig',
          },
          description: 'HTTP endpoints configuration',
        },
      },
      required: ['enabled', 'port'],
      additionalProperties: false,
      description: 'HTTP server configuration for receiving webhooks',
      patternProperties: {
        '^x-': {},
      },
    },
    TlsConfig: {
      type: 'object',
      properties: {
        enabled: {
          type: 'boolean',
          description: 'Enable TLS/HTTPS',
        },
        cert: {
          type: 'string',
          description: 'Path to TLS certificate file or certificate content',
        },
        key: {
          type: 'string',
          description: 'Path to TLS key file or key content',
        },
        ca: {
          type: 'string',
          description: 'Path to CA certificate file or CA content (optional)',
        },
        rejectUnauthorized: {
          type: 'boolean',
          description: 'Reject unauthorized connections (default: true)',
        },
      },
      required: ['enabled'],
      additionalProperties: false,
      description: 'TLS/SSL configuration for HTTPS server',
      patternProperties: {
        '^x-': {},
      },
    },
    HttpAuthConfig: {
      type: 'object',
      properties: {
        type: {
          type: 'string',
          enum: ['bearer_token', 'hmac', 'basic', 'none'],
          description: 'Authentication type',
        },
        secret: {
          type: 'string',
          description: 'Secret or token for authentication',
        },
        username: {
          type: 'string',
          description: 'Username for basic auth',
        },
        password: {
          type: 'string',
          description: 'Password for basic auth',
        },
      },
      required: ['type'],
      additionalProperties: false,
      description: 'HTTP server authentication configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    HttpEndpointConfig: {
      type: 'object',
      properties: {
        path: {
          type: 'string',
          description: 'Path for the webhook endpoint',
        },
        transform: {
          type: 'string',
          description: 'Optional transform template (Liquid) for the received data',
        },
        name: {
          type: 'string',
          description: 'Optional name/ID for this endpoint',
        },
      },
      required: ['path'],
      additionalProperties: false,
      description: 'HTTP server endpoint configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    SlackConfig: {
      type: 'object',
      properties: {
        bots: {
          type: 'array',
          items: {
            $ref: '#/definitions/SlackBotConfig',
          },
          description: 'Multi-bot configuration (new format)',
        },
        endpoint: {
          type: 'string',
          description: 'HTTP endpoint path (auto-generated if omitted)',
        },
        signing_secret: {
          type: 'string',
          description: 'Slack signing secret for request verification',
        },
        bot_token: {
          type: 'string',
          description: 'Slack bot token for API calls',
        },
        mentions: {
          type: 'string',
          const: 'direct',
          description: "Mention handling: 'direct' (only supported option for now)",
        },
        threads: {
          type: 'string',
          const: 'required',
          description: "Thread handling: 'required' (only supported option for now)",
        },
        fetch: {
          $ref: '#/definitions/SlackFetchConfig',
          description: 'Fetch configuration for conversation history',
        },
        channel_allowlist: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: 'Channel allowlist (glob patterns, e.g., ["CENG*", "CSUPPORT"])',
        },
        response: {
          $ref: '#/definitions/SlackResponseConfig',
          description: 'Response configuration',
        },
        worker_pool: {
          $ref: '#/definitions/SlackWorkerPoolConfig',
          description: 'Worker pool configuration for concurrent workflow execution',
        },
        cache_observability: {
          $ref: '#/definitions/SlackCacheObservabilityConfig',
          description: 'Cache observability configuration',
        },
        cache_prewarming: {
          $ref: '#/definitions/SlackCachePrewarmingConfig',
          description: 'Cache prewarming configuration',
        },
        rate_limiting: {
          $ref: '#/definitions/SlackRateLimitConfig',
          description: 'Rate limiting configuration',
        },
        workflow: {
          type: 'string',
          description: 'Workflow to run for this bot (overrides global workflow selection)',
        },
      },
      additionalProperties: false,
      description: 'Slack bot configuration (supports both single bot and multi-bot formats)',
      patternProperties: {
        '^x-': {},
      },
    },
    SlackBotConfig: {
      type: 'object',
      properties: {
        id: {
          type: 'string',
          description: 'Unique bot identifier (DNS-safe: lowercase, alphanumeric, hyphens)',
        },
        endpoint: {
          type: 'string',
          description: 'HTTP endpoint path (must be unique across all bots)',
        },
        signing_secret: {
          type: 'string',
          description: 'Slack signing secret for request verification',
        },
        bot_token: {
          type: 'string',
          description: 'Slack bot token for API calls',
        },
        mentions: {
          type: 'string',
          const: 'direct',
          description: "Mention handling: 'direct' (only supported option for now)",
        },
        threads: {
          type: 'string',
          const: 'required',
          description: "Thread handling: 'required' (only supported option for now)",
        },
        fetch: {
          $ref: '#/definitions/SlackFetchConfig',
          description: 'Fetch configuration for conversation history',
        },
        channel_allowlist: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: 'Channel allowlist (glob patterns, e.g., ["CENG*", "CSUPPORT"])',
        },
        response: {
          $ref: '#/definitions/SlackResponseConfig',
          description: 'Response configuration',
        },
        worker_pool: {
          $ref: '#/definitions/SlackWorkerPoolConfig',
          description: 'Worker pool configuration for concurrent workflow execution',
        },
        cache_observability: {
          $ref: '#/definitions/SlackCacheObservabilityConfig',
          description: 'Cache observability configuration',
        },
        cache_prewarming: {
          $ref: '#/definitions/SlackCachePrewarmingConfig',
          description: 'Cache prewarming configuration',
        },
        rate_limiting: {
          $ref: '#/definitions/SlackRateLimitConfig',
          description: 'Rate limiting configuration',
        },
        workflow: {
          type: 'string',
          description: 'Workflow to run for this bot (overrides global workflow selection)',
        },
      },
      required: ['id', 'endpoint', 'signing_secret', 'bot_token'],
      additionalProperties: false,
      description: 'Individual Slack bot configuration (for multi-bot deployments)',
      patternProperties: {
        '^x-': {},
      },
    },
    SlackFetchConfig: {
      type: 'object',
      properties: {
        scope: {
          type: 'string',
          const: 'thread',
          description: "Fetch scope: 'thread' (only supported option for now)",
        },
        max_messages: {
          type: 'number',
          description: 'Maximum number of messages to fetch (default: 40)',
        },
        cache: {
          $ref: '#/definitions/SlackCacheConfig',
          description: 'Cache configuration',
        },
      },
      required: ['scope'],
      additionalProperties: false,
      description: 'Slack fetch configuration for retrieving conversation history',
      patternProperties: {
        '^x-': {},
      },
    },
    SlackCacheConfig: {
      type: 'object',
      properties: {
        ttl_seconds: {
          type: 'number',
          description: 'Cache TTL in seconds (default: 600)',
        },
        max_threads: {
          type: 'number',
          description: 'Maximum number of threads to cache (default: 200)',
        },
      },
      additionalProperties: false,
      description: 'Slack-specific cache configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    SlackResponseConfig: {
      type: 'object',
      properties: {
        fallback: {
          type: 'string',
          description: 'Fallback message on errors',
        },
      },
      additionalProperties: false,
      description: 'Slack response configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    SlackWorkerPoolConfig: {
      type: 'object',
      properties: {
        queue_capacity: {
          type: 'number',
          description:
            'Maximum queue size (default: 100). When full, new tasks are rejected with 503',
        },
        task_timeout: {
          type: 'number',
          description: 'Task timeout in milliseconds (default: 5 minutes)',
        },
      },
      additionalProperties: false,
      description: 'Slack worker pool configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    SlackCacheObservabilityConfig: {
      type: 'object',
      properties: {
        enable_cache_endpoints: {
          type: 'boolean',
          description: 'Enable cache monitoring endpoints (default: false for security)',
        },
        cache_admin_token: {
          type: 'string',
          description: 'Optional bearer token for admin endpoints (POST/DELETE operations)',
        },
      },
      additionalProperties: false,
      description: 'Slack cache observability configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    SlackCachePrewarmingConfig: {
      type: 'object',
      properties: {
        enabled: {
          type: 'boolean',
          description: 'Enable cache prewarming on bot startup (default: false)',
        },
        channels: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: 'Channels to prewarm (fetch recent threads from these channels)',
        },
        users: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: 'Users to prewarm (fetch recent DMs/threads with these users)',
        },
        max_threads_per_channel: {
          type: 'number',
          description: 'Maximum number of threads to fetch per channel (default: 20)',
        },
        concurrency: {
          type: 'number',
          description: 'Concurrency for prewarming operations (default: 5)',
        },
        rate_limit_ms: {
          type: 'number',
          description: 'Rate limit delay between API calls in milliseconds (default: 100)',
        },
      },
      additionalProperties: false,
      description: 'Cache prewarming configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    SlackRateLimitConfig: {
      type: 'object',
      properties: {
        enabled: {
          type: 'boolean',
          description: 'Enable rate limiting (default: false)',
        },
        bot: {
          $ref: '#/definitions/SlackRateLimitDimensionConfig',
          description: 'Per-bot limits (all requests to this bot)',
        },
        user: {
          $ref: '#/definitions/SlackRateLimitDimensionConfig',
          description: 'Per-user limits (per Slack user)',
        },
        channel: {
          $ref: '#/definitions/SlackRateLimitDimensionConfig',
          description: 'Per-channel limits (per Slack channel)',
        },
        global: {
          $ref: '#/definitions/SlackRateLimitDimensionConfig',
          description: 'Global limits (across all dimensions)',
        },
        actions: {
          $ref: '#/definitions/SlackRateLimitActionsConfig',
          description: 'Actions when rate limited',
        },
        storage: {
          $ref: '#/definitions/SlackRateLimitStorageConfig',
          description: 'Storage backend configuration',
        },
      },
      additionalProperties: false,
      description: 'Complete rate limiting configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    SlackRateLimitDimensionConfig: {
      type: 'object',
      properties: {
        requests_per_minute: {
          type: 'number',
          description: 'Maximum requests per minute (0 or undefined = unlimited)',
        },
        requests_per_hour: {
          type: 'number',
          description: 'Maximum requests per hour (0 or undefined = unlimited)',
        },
        concurrent_requests: {
          type: 'number',
          description: 'Maximum concurrent requests (0 or undefined = unlimited)',
        },
      },
      additionalProperties: false,
      description: 'Rate limit configuration for a single dimension',
      patternProperties: {
        '^x-': {},
      },
    },
    SlackRateLimitActionsConfig: {
      type: 'object',
      properties: {
        send_ephemeral_message: {
          type: 'boolean',
          description: 'Send ephemeral message to user when rate limited (default: true)',
        },
        ephemeral_message: {
          type: 'string',
          description: 'Ephemeral message text',
        },
        queue_when_near_limit: {
          type: 'boolean',
          description: 'Queue requests when near limit threshold (default: false)',
        },
        queue_threshold: {
          type: 'number',
          description: 'Queue threshold as percentage (0.0-1.0, default: 0.8)',
        },
      },
      additionalProperties: false,
      description: 'Actions to take when rate limited',
      patternProperties: {
        '^x-': {},
      },
    },
    SlackRateLimitStorageConfig: {
      type: 'object',
      properties: {
        type: {
          type: 'string',
          enum: ['memory', 'redis'],
          description: "Storage type (default: 'memory')",
        },
        redis: {
          $ref: '#/definitions/SlackRateLimitRedisConfig',
          description: "Redis configuration (required if type is 'redis')",
        },
      },
      additionalProperties: false,
      description: 'Rate limit storage configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    SlackRateLimitRedisConfig: {
      type: 'object',
      properties: {
        url: {
          type: 'string',
          description: 'Redis connection URL (e.g., redis://localhost:6379)',
        },
        key_prefix: {
          type: 'string',
          description: 'Key prefix for Redis keys (default: "visor:ratelimit:")',
        },
      },
      required: ['url'],
      additionalProperties: false,
      description: 'Redis storage configuration for rate limiting',
      patternProperties: {
        '^x-': {},
      },
    },
    MemoryConfig: {
      type: 'object',
      properties: {
        storage: {
          type: 'string',
          enum: ['memory', 'file'],
          description: 'Storage mode: "memory" (in-memory, default) or "file" (persistent)',
        },
        format: {
          type: 'string',
          enum: ['json', 'csv'],
          description: 'Storage format (only for file storage, default: json)',
        },
        file: {
          type: 'string',
          description: 'File path (required if storage: file)',
        },
        namespace: {
          type: 'string',
          description: 'Default namespace (default: "default")',
        },
        auto_load: {
          type: 'boolean',
          description: 'Auto-load on startup (default: true if storage: file)',
        },
        auto_save: {
          type: 'boolean',
          description: 'Auto-save after operations (default: true if storage: file)',
        },
      },
      additionalProperties: false,
      description: 'Memory storage configuration',
      patternProperties: {
        '^x-': {},
      },
    },
    TagFilter: {
      type: 'object',
      properties: {
        include: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: 'Tags that checks must have to be included (ANY match)',
        },
        exclude: {
          type: 'array',
          items: {
            type: 'string',
          },
          description: 'Tags that will exclude checks if present (ANY match)',
        },
      },
      additionalProperties: false,
      description: 'Tag filter configuration for selective check execution',
      patternProperties: {
        '^x-': {},
      },
    },
    RoutingDefaults: {
      type: 'object',
      properties: {
        max_loops: {
          type: 'number',
          description: 'Per-scope cap on routing transitions (success + failure)',
        },
        defaults: {
          type: 'object',
          properties: {
            on_fail: {
              $ref: '#/definitions/OnFailConfig',
            },
          },
          additionalProperties: false,
          description: 'Default policies applied to checks (step-level overrides take precedence)',
          patternProperties: {
            '^x-': {},
          },
        },
      },
      additionalProperties: false,
      description: 'Global routing defaults',
      patternProperties: {
        '^x-': {},
      },
    },
    LimitsConfig: {
      type: 'object',
      properties: {
        max_runs_per_check: {
          type: 'number',
          description:
            'Maximum number of executions per check within a single engine run. Applies to each distinct scope independently for forEach item executions. Set to 0 or negative to disable. Default: 50.',
        },
      },
      additionalProperties: false,
      description: 'Global engine limits',
      patternProperties: {
        '^x-': {},
      },
    },
  },
} as const;
export default configSchema;
