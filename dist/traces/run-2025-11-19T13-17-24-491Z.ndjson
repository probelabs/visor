{"name":"visor.run","attributes":{"started":true}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"ask","visor.provider.type":"human-input"}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"refine","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"refine","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"ask\":{\"text\":\"Build a small Node CLI that prints \\\"hello\\\"\",\"ts\":1763558244659}}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"plan-commands","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"plan-commands","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"refine\":{\"refined\":true,\"text\":\"Create a Node.js CLI (using Node >=18) that prints 'hello' when run; include usage example and exit code 0.\",\"ts\":1763558244678},\"ask\":{\"text\":\"Build a small Node CLI that prints \\\"hello\\\"\",\"ts\":1763558244659}}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"ask-confirm","visor.provider.type":"human-input"}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"confirm-interpret","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"confirm-interpret","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"plan-commands\":{\"commands\":[\"echo hello-build\",\"echo hello-lint\",\"echo hello-test\"],\"ts\":1763558244688},\"ask-confirm\":{\"text\":\"yes\",\"ts\":1763558244689},\"ask\":{\"text\":\"Build a small Node CLI that prints \\\"hello\\\"\",\"ts\":1763558244659},\"refine\":{\"refined\":true,\"text\":\"Create a Node.js CLI (using Node >=18) that prints 'hello' when run; include usage example and exit code 0.\",\"ts\":1763558244678}}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"run-commands","visor.provider.type":"command"}}
{"name":"visor.check","attributes":{"visor.check.id":"run-commands","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"fileCount\":0,\"outputs\":{\"confirm-interpret\":{\"proceed\":true,\"commands\":[\"echo hello-build\",\"echo hello-lint\",\"echo hello-test\"],\"ts\":1763558244697},\"ask\":{\"text\":\"Build a small Node CLI that prints \\\"hello\\\"\",\"ts\":1763558244659},\"refine\":{\"refined\":true,\"text\":\"Create a Node.js CLI (using Node >=18) that prints 'hello' when run; include usage example and exit code 0.\",\"ts\":1763558244678},\"plan-commands\":{\"commands\":[\"echo hello-build\",\"echo hello-lint\",\"echo hello-test\"],\"ts\":1763558244688},\"ask-confirm\":{\"text\":\"yes\",\"ts\":1763558244689},\"history\":{\"ask\":[{\"text\":\"Build a small Node CLI that prints \\\"hello\\\"\",\"ts\":1763558244659}],\"refine\":[{\"refined\":true,\"text\":\"Create a Node.js CLI (using Node >=18) that prints 'hello' when run; include usage example and exit code 0.\",\"ts\":1763558244678}],\"plan-commands\":[{\"commands\":[\"echo hello-build\",\"echo hello-lint\",\"echo hello-test\"],\"ts\":1763558244688}],\"ask-confirm\":[{\"text\":\"yes\",\"ts\":1763558244689}],\"confirm-interpret\":[{\"proceed\":true,\"commands\":[\"echo hello-build\",\"echo hello-lint\",\"echo hello-test\"],\"ts\":1763558244697}]}},\"outputs_history\":{\"ask\":[{\"text\":\"Build a small Node CLI that prints \\\"hello\\\"\",\"ts\":1763558244659}],\"refine\":[{\"refined\":true,\"text\":\"Create a Node.js CLI (using Node >=18) that prints 'hello' when run; include usage example and exit code 0.\",\"ts\":1763558244678}],\"plan-commands\":[{\"commands\":[\"echo hello-build\",\"echo hello-lint\",\"echo hello-test\"],\"ts\":1763558244688}],\"ask-confirm\":[{\"text\":\"yes\",\"ts\":1763558244689}],\"confirm-interpret\":[{\"proceed\":true,\"commands\":[\"echo hello-build\",\"echo hello-lint\",\"echo hello-test\"],\"ts\":1763558244697}]},\"outputs_history_stage\":{},\"outputs_raw\":{},\"inputs\":{},\"env\":{\"SHELL\":\"/usr/bin/bash\",\"COLORTERM\":\"truecolor\",\"ZELLIJ_SESSION_NAME\":\"friendly-horse\",\"EDITOR\":\"nvim\",\"PWD\":\"/home/buger/projects/visor2\",\"LOGNAME\":\"buger\",\"ZELLIJ_PANE_ID\":\"38\",\"XDG_SESSION_TYPE\":\"tty\",\"CODEX_MANAGED_BY_NPM\":\"1\",\"MOTD_SHOWN\":\"pam\",\"HOME\":\"/home/buger\",\"LANG\":\"en_US.UTF-8\",\"STARSHIP_SHELL\":\"bash\",\"WAYLAND_DISPLAY\":\"wayland-1\",\"__MISE_DIFF\":\"eAFrXpyfk9KwOC+1vGFJQWJJxgQASssINA\",\"SSH_CONNECTION\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 fe80::7a55:36ff:fe01:cdfe%enp1s0 22\",\"BAT_THEME\":\"ansi\",\"STARSHIP_SESSION_KEY\":\"5093253331066022\",\"__MISE_ORIG_PATH\":\"./bin:/home/buger/.local/bin:/tmp/.tmpXgttmc:/usr/lib/node_modules/@openai/codex/vendor/x86_64-unknown-linux-musl/path:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"XDG_SESSION_CLASS\":\"user\",\"TERM\":\"xterm-256color\",\"USER\":\"buger\",\"SUDO_EDITOR\":\"nvim\",\"__MISE_SESSION\":\"eAFrX5OTn5iSmhJfkp+fUzxhHZSXnJ+XlplePPGmin5Gfm6qflJpemqRvh5EWD83szhVH8LWK8nPzVkDYccXJJZkFE9YnJpX1rA4JbNoN7LegqL8rNTkkmL9sszi/CKjNal5ZfFliUXxGYnFGRuSjC0NU9NMDZLMDZMNTS3M1uYklqQWl8SXFqQklqQeEWCAA8aZJj5KcwGShkTR\",\"DISPLAY\":\":0\",\"SHLVL\":\"3\",\"XDG_SESSION_ID\":\"4\",\"KUBECONFIG\":\"/home/buger/.kube/config\",\"XDG_RUNTIME_DIR\":\"/run/user/1000\",\"SSH_CLIENT\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 22\",\"GOOGLE_API_KEY\":\"AIzaSyBqWp9Ent9-31GQOI8oAUPW6eGY5PMQHQM\",\"DEBUGINFOD_URLS\":\"https://debuginfod.archlinux.org \",\"MISE_SHELL\":\"bash\",\"PATH\":\"/home/buger/.local/bin:./bin:/home/buger/.local/bin:/tmp/.tmpXgttmc:/usr/lib/node_modules/@openai/codex/vendor/x86_64-unknown-linux-musl/path:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"ZELLIJ\":\"0\",\"DBUS_SESSION_BUS_ADDRESS\":\"unix:path=/run/user/1000/bus\",\"MAIL\":\"/var/spool/mail/buger\",\"SSH_TTY\":\"/dev/pts/0\",\"_\":\"/usr/bin/node\",\"VISOR_VERSION\":\"0.1.42\",\"PROBE_VERSION\":\"0.6.0-rc164\",\"VISOR_COMMIT_SHA\":\"c00d0c684081c98a6b0088886089b18e6ef03c24\",\"VISOR_COMMIT_SHORT\":\"c00d0c68\",\"VISOR_FALLBACK_TRACE_FILE\":\"/home/buger/projects/visor2/output/traces/run-2025-11-19T13-17-24-491Z.ndjson\",\"VISOR_OUTPUT_FORMAT\":\"table\",\"VISOR_DEBUG\":\"false\",\"GITHUB_REPOSITORY\":\"owner/repo\",\"VISOR_STRICT_ERRORS\":\"true\"}}"},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"finish","visor.provider.type":"log"}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":1,"session_id":"9bd511c6-95f7-45fc-a850-1e59b739583d"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"7a01ac5a-f433-4eeb-a6d7-4804f5dfd2f2"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"7a01ac5a-f433-4eeb-a6d7-4804f5dfd2f2"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"7a01ac5a-f433-4eeb-a6d7-4804f5dfd2f2"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"ask","visor.provider.type":"human-input"}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"7a01ac5a-f433-4eeb-a6d7-4804f5dfd2f2"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"7a01ac5a-f433-4eeb-a6d7-4804f5dfd2f2"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"7a01ac5a-f433-4eeb-a6d7-4804f5dfd2f2"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"refine","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"refine","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"ask\":{\"text\":\"Create a CI job\",\"ts\":1763558244717}}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"fail_if.triggered","attrs":{"check":"refine","scope":"check","name":"refine_fail_if","expression":"output['refined'] !== true","severity":"error"}}]}
