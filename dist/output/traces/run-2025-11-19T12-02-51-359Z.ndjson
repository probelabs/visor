{"name":"visor.run","attributes":{"started":true}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"ask","visor.provider.type":"human-input"}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"refine","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"refine","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"ask\":{\"text\":\"Build a small Node CLI that prints \\\"hello\\\"\",\"ts\":1763553772929}}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"plan-commands","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"plan-commands","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"refine\":{\"refined\":true,\"text\":\"Create a Node.js CLI (using Node >=18) that prints 'hello' when run; include usage example and exit code 0.\",\"ts\":1763553772945},\"ask\":{\"text\":\"Build a small Node CLI that prints \\\"hello\\\"\",\"ts\":1763553772929}}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"ask-confirm","visor.provider.type":"human-input"}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"confirm-interpret","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"confirm-interpret","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"plan-commands\":{\"commands\":[\"echo hello-build\",\"echo hello-lint\",\"echo hello-test\"],\"ts\":1763553772954},\"ask-confirm\":{\"text\":\"yes\",\"ts\":1763553772956},\"ask\":{\"text\":\"Build a small Node CLI that prints \\\"hello\\\"\",\"ts\":1763553772929},\"refine\":{\"refined\":true,\"text\":\"Create a Node.js CLI (using Node >=18) that prints 'hello' when run; include usage example and exit code 0.\",\"ts\":1763553772945}}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"run-commands","visor.provider.type":"command"}}
{"name":"visor.check","attributes":{"visor.check.id":"run-commands","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"fileCount\":0,\"outputs\":{\"confirm-interpret\":{\"proceed\":true,\"commands\":[\"echo hello-build\",\"echo hello-lint\",\"echo hello-test\"],\"ts\":1763553772963},\"ask\":{\"text\":\"Build a small Node CLI that prints \\\"hello\\\"\",\"ts\":1763553772929},\"refine\":{\"refined\":true,\"text\":\"Create a Node.js CLI (using Node >=18) that prints 'hello' when run; include usage example and exit code 0.\",\"ts\":1763553772945},\"plan-commands\":{\"commands\":[\"echo hello-build\",\"echo hello-lint\",\"echo hello-test\"],\"ts\":1763553772954},\"ask-confirm\":{\"text\":\"yes\",\"ts\":1763553772956},\"history\":{\"ask\":[{\"text\":\"Build a small Node CLI that prints \\\"hello\\\"\",\"ts\":1763553772929}],\"refine\":[{\"refined\":true,\"text\":\"Create a Node.js CLI (using Node >=18) that prints 'hello' when run; include usage example and exit code 0.\",\"ts\":1763553772945}],\"plan-commands\":[{\"commands\":[\"echo hello-build\",\"echo hello-lint\",\"echo hello-test\"],\"ts\":1763553772954}],\"ask-confirm\":[{\"text\":\"yes\",\"ts\":1763553772956}],\"confirm-interpret\":[{\"proceed\":true,\"commands\":[\"echo hello-build\",\"echo hello-lint\",\"echo hello-test\"],\"ts\":1763553772963}]}},\"outputs_history\":{\"ask\":[{\"text\":\"Build a small Node CLI that prints \\\"hello\\\"\",\"ts\":1763553772929}],\"refine\":[{\"refined\":true,\"text\":\"Create a Node.js CLI (using Node >=18) that prints 'hello' when run; include usage example and exit code 0.\",\"ts\":1763553772945}],\"plan-commands\":[{\"commands\":[\"echo hello-build\",\"echo hello-lint\",\"echo hello-test\"],\"ts\":1763553772954}],\"ask-confirm\":[{\"text\":\"yes\",\"ts\":1763553772956}],\"confirm-interpret\":[{\"proceed\":true,\"commands\":[\"echo hello-build\",\"echo hello-lint\",\"echo hello-test\"],\"ts\":1763553772963}]},\"outputs_history_stage\":{},\"outputs_raw\":{},\"inputs\":{},\"env\":{\"SHELL\":\"/usr/bin/bash\",\"npm_command\":\"run\",\"npm_config_userconfig\":\"/home/buger/.npmrc\",\"COLORTERM\":\"truecolor\",\"npm_config_cache\":\"/home/buger/.npm\",\"ZELLIJ_SESSION_NAME\":\"friendly-horse\",\"NODE\":\"/usr/bin/node\",\"npm_package_bin_visor\":\"dist/index.js\",\"COLOR\":\"0\",\"npm_config_local_prefix\":\"/home/buger/projects/visor2\",\"npm_config_globalconfig\":\"/etc/npmrc\",\"EDITOR\":\"nvim\",\"PWD\":\"/home/buger/projects/visor2\",\"LOGNAME\":\"buger\",\"ZELLIJ_PANE_ID\":\"38\",\"XDG_SESSION_TYPE\":\"tty\",\"npm_config_init_module\":\"/home/buger/.npm-init.js\",\"CODEX_MANAGED_BY_NPM\":\"1\",\"_\":\"/usr/bin/node\",\"MOTD_SHOWN\":\"pam\",\"HOME\":\"/home/buger\",\"LANG\":\"en_US.UTF-8\",\"npm_package_version\":\"0.1.42\",\"STARSHIP_SHELL\":\"bash\",\"WAYLAND_DISPLAY\":\"wayland-1\",\"__MISE_DIFF\":\"eAFrXpyfk9KwOC+1vGFJQWJJxgQASssINA\",\"SSH_CONNECTION\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 fe80::7a55:36ff:fe01:cdfe%enp1s0 22\",\"BAT_THEME\":\"ansi\",\"INIT_CWD\":\"/home/buger/projects/visor2\",\"STARSHIP_SESSION_KEY\":\"2984482606253186\",\"__MISE_ORIG_PATH\":\"./bin:/home/buger/.local/bin:/tmp/.tmpXgttmc:/usr/lib/node_modules/@openai/codex/vendor/x86_64-unknown-linux-musl/path:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"npm_lifecycle_script\":\"node scripts/run-visor-tests.js\",\"npm_config_npm_version\":\"11.6.0\",\"XDG_SESSION_CLASS\":\"user\",\"TERM\":\"xterm-256color\",\"npm_package_name\":\"@probelabs/visor\",\"npm_config_prefix\":\"/usr\",\"USER\":\"buger\",\"SUDO_EDITOR\":\"nvim\",\"__MISE_SESSION\":\"eAFrX5OTn5iSmhJfkp+fUzxhHZSXnJ+XlplePPGmin5Gfm6qflJpemqRvh5EWD83szhVH8LWK8nPzVkDYccXJJZkFE9YnJpX1rA4JbNoN7LegqL8rNTkkmL9sszi/CKjNal5ZfFliUXxGYnFGRuSjC0NU9NMDZLMDZMNTS3M1uYklqQWl8SXFqQklqQeEWCAA8aZJj5KcwGShkTR\",\"DISPLAY\":\":0\",\"npm_lifecycle_event\":\"test:yaml\",\"SHLVL\":\"2\",\"XDG_SESSION_ID\":\"4\",\"npm_config_user_agent\":\"npm/11.6.0 node/v24.7.0 linux x64 workspaces/false\",\"KUBECONFIG\":\"/home/buger/.kube/config\",\"npm_execpath\":\"/usr/lib/node_modules/npm/bin/npm-cli.js\",\"XDG_RUNTIME_DIR\":\"/run/user/1000\",\"SSH_CLIENT\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 22\",\"GOOGLE_API_KEY\":\"AIzaSyBqWp9Ent9-31GQOI8oAUPW6eGY5PMQHQM\",\"DEBUGINFOD_URLS\":\"https://debuginfod.archlinux.org \",\"npm_package_json\":\"/home/buger/projects/visor2/package.json\",\"MISE_SHELL\":\"bash\",\"npm_config_noproxy\":\"\",\"PATH\":\"/home/buger/projects/visor2/node_modules/.bin:/home/buger/projects/node_modules/.bin:/home/buger/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/usr/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/tmp/.tmpXgttmc:/usr/lib/node_modules/@openai/codex/vendor/x86_64-unknown-linux-musl/path:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"npm_config_node_gyp\":\"/usr/lib/node_modules/node-gyp/bin/node-gyp.js\",\"ZELLIJ\":\"0\",\"DBUS_SESSION_BUS_ADDRESS\":\"unix:path=/run/user/1000/bus\",\"npm_config_global_prefix\":\"/usr\",\"MAIL\":\"/var/spool/mail/buger\",\"SSH_TTY\":\"/dev/pts/0\",\"npm_node_execpath\":\"/usr/bin/node\",\"VISOR_FALLBACK_TRACE_FILE\":\"/home/buger/projects/visor2/output/traces/run-2025-11-19T12-02-51-359Z.ndjson\",\"VISOR_OUTPUT_FORMAT\":\"table\",\"VISOR_DEBUG\":\"false\",\"GITHUB_REPOSITORY\":\"owner/repo\",\"VISOR_STRICT_ERRORS\":\"true\"}}"},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"finish","visor.provider.type":"log"}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":1,"session_id":"5ece1c3a-bae1-47bf-a4c0-b84e31147f00"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"02e923dc-67b0-4799-b280-c6ff058e16cc"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"02e923dc-67b0-4799-b280-c6ff058e16cc"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"02e923dc-67b0-4799-b280-c6ff058e16cc"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"ask","visor.provider.type":"human-input"}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"02e923dc-67b0-4799-b280-c6ff058e16cc"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"02e923dc-67b0-4799-b280-c6ff058e16cc"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"02e923dc-67b0-4799-b280-c6ff058e16cc"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"refine","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"refine","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"ask\":{\"text\":\"Create a CI job\",\"ts\":1763553772983}}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"fail_if.triggered","attrs":{"check":"refine","scope":"check","name":"refine_fail_if","expression":"output['refined'] !== true","severity":"error"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"fail_if.evaluated","attrs":{"check":"refine","scope":"check","name":"refine_fail_if","expression":"output['refined'] !== true","severity":"error"}},{"name":"fail_if.triggered","attrs":{"check":"refine","scope":"check","name":"refine_fail_if","expression":"output['refined'] !== true","severity":"error"}}]}
