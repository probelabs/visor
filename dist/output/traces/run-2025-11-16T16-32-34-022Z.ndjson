{"name":"visor.run","attributes":{"started":true}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"6773897f-308d-4759-9b97-1b37b220058e"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"6773897f-308d-4759-9b97-1b37b220058e"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"6773897f-308d-4759-9b97-1b37b220058e"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"overview","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"overview","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[{\"filename\":\"src/search.ts\",\"additions\":3,\"deletions\":0,\"changes\":3,\"status\":\"added\",\"patch\":\"@@\\n+export function search(q: string) {\\n  return []\\n}\\n\"}],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"6773897f-308d-4759-9b97-1b37b220058e"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"6773897f-308d-4759-9b97-1b37b220058e"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"6773897f-308d-4759-9b97-1b37b220058e"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"apply-overview-labels","visor.provider.type":"github"}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"6773897f-308d-4759-9b97-1b37b220058e"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"6773897f-308d-4759-9b97-1b37b220058e"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":1,"session_id":"6773897f-308d-4759-9b97-1b37b220058e"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"e63edf9d-736b-4948-86a1-c9c3ee450e1f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"e63edf9d-736b-4948-86a1-c9c3ee450e1f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"e63edf9d-736b-4948-86a1-c9c3ee450e1f"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"issue-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"issue-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{}}"},"events":[]}
{"name":"visor.check","attributes":{"visor.check.id":"issue-assistant","visor.check.output":"{\"text\":\"### Assistant Reply\",\"intent\":\"issue_triage\"}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"e63edf9d-736b-4948-86a1-c9c3ee450e1f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"e63edf9d-736b-4948-86a1-c9c3ee450e1f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"e63edf9d-736b-4948-86a1-c9c3ee450e1f"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"apply-issue-labels","visor.provider.type":"github"}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"e63edf9d-736b-4948-86a1-c9c3ee450e1f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"e63edf9d-736b-4948-86a1-c9c3ee450e1f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"e63edf9d-736b-4948-86a1-c9c3ee450e1f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"e63edf9d-736b-4948-86a1-c9c3ee450e1f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":1,"session_id":"e63edf9d-736b-4948-86a1-c9c3ee450e1f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"76da15da-76e9-4740-8adb-3a7f46bf8382"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"76da15da-76e9-4740-8adb-3a7f46bf8382"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"76da15da-76e9-4740-8adb-3a7f46bf8382"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"comment-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"comment-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{}}"},"events":[]}
{"name":"visor.check","attributes":{"visor.check.id":"comment-assistant","visor.check.output":"{\"text\":\"### Assistant Reply\",\"intent\":\"comment_reply\"}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"76da15da-76e9-4740-8adb-3a7f46bf8382"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"76da15da-76e9-4740-8adb-3a7f46bf8382"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"76da15da-76e9-4740-8adb-3a7f46bf8382"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"76da15da-76e9-4740-8adb-3a7f46bf8382"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"76da15da-76e9-4740-8adb-3a7f46bf8382"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"76da15da-76e9-4740-8adb-3a7f46bf8382"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":1,"session_id":"76da15da-76e9-4740-8adb-3a7f46bf8382"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"f27c59b9-6df4-4177-b13f-68b1d6ffbce7"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"f27c59b9-6df4-4177-b13f-68b1d6ffbce7"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"f27c59b9-6df4-4177-b13f-68b1d6ffbce7"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"issue-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"issue-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"f27c59b9-6df4-4177-b13f-68b1d6ffbce7"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"f27c59b9-6df4-4177-b13f-68b1d6ffbce7"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"f27c59b9-6df4-4177-b13f-68b1d6ffbce7"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"apply-issue-labels","visor.provider.type":"github"}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"f27c59b9-6df4-4177-b13f-68b1d6ffbce7"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"f27c59b9-6df4-4177-b13f-68b1d6ffbce7"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":1,"session_id":"f27c59b9-6df4-4177-b13f-68b1d6ffbce7"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"0220ee64-caaf-4152-ac35-cf58e56f4f8b"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"0220ee64-caaf-4152-ac35-cf58e56f4f8b"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"0220ee64-caaf-4152-ac35-cf58e56f4f8b"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"overview","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"overview","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[{\"filename\":\"src/search.ts\",\"additions\":3,\"deletions\":0,\"changes\":3,\"status\":\"added\",\"patch\":\"@@\\n+export function search(q: string) {\\n  return []\\n}\\n\"}],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"0220ee64-caaf-4152-ac35-cf58e56f4f8b"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"0220ee64-caaf-4152-ac35-cf58e56f4f8b"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"0220ee64-caaf-4152-ac35-cf58e56f4f8b"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"security","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"security","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[{\"filename\":\"src/search.ts\",\"additions\":3,\"deletions\":0,\"changes\":3,\"status\":\"added\",\"patch\":\"@@\\n+export function search(q: string) {\\n  return []\\n}\\n\"}],\"outputs\":{\"overview\":{\"text\":\"Overview body\",\"tags\":{\"label\":\"feature\",\"review-effort\":2},\"ts\":1763310755257}}}"},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"architecture","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"architecture","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[{\"filename\":\"src/search.ts\",\"additions\":3,\"deletions\":0,\"changes\":3,\"status\":\"added\",\"patch\":\"@@\\n+export function search(q: string) {\\n  return []\\n}\\n\"}],\"outputs\":{\"overview\":{\"text\":\"Overview body\",\"tags\":{\"label\":\"feature\",\"review-effort\":2},\"ts\":1763310755257}}}"},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"performance","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"performance","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[{\"filename\":\"src/search.ts\",\"additions\":3,\"deletions\":0,\"changes\":3,\"status\":\"added\",\"patch\":\"@@\\n+export function search(q: string) {\\n  return []\\n}\\n\"}],\"outputs\":{\"overview\":{\"text\":\"Overview body\",\"tags\":{\"label\":\"feature\",\"review-effort\":2},\"ts\":1763310755257}}}"},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"quality","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"quality","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[{\"filename\":\"src/search.ts\",\"additions\":3,\"deletions\":0,\"changes\":3,\"status\":\"added\",\"patch\":\"@@\\n+export function search(q: string) {\\n  return []\\n}\\n\"}],\"outputs\":{\"overview\":{\"text\":\"Overview body\",\"tags\":{\"label\":\"feature\",\"review-effort\":2},\"ts\":1763310755257}}}"},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"apply-overview-labels","visor.provider.type":"github"}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"0220ee64-caaf-4152-ac35-cf58e56f4f8b"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"0220ee64-caaf-4152-ac35-cf58e56f4f8b"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"0220ee64-caaf-4152-ac35-cf58e56f4f8b"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"0220ee64-caaf-4152-ac35-cf58e56f4f8b"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"0220ee64-caaf-4152-ac35-cf58e56f4f8b"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"0220ee64-caaf-4152-ac35-cf58e56f4f8b"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":1,"session_id":"0220ee64-caaf-4152-ac35-cf58e56f4f8b"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"949d78fd-ee5a-43a2-a567-88e7a9512746"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"949d78fd-ee5a-43a2-a567-88e7a9512746"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"949d78fd-ee5a-43a2-a567-88e7a9512746"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"comment-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"comment-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"949d78fd-ee5a-43a2-a567-88e7a9512746"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"949d78fd-ee5a-43a2-a567-88e7a9512746"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":1,"session_id":"949d78fd-ee5a-43a2-a567-88e7a9512746"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"2813dc49-a26c-4725-8860-b58aca9437a7"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"2813dc49-a26c-4725-8860-b58aca9437a7"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"2813dc49-a26c-4725-8860-b58aca9437a7"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"comment-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"comment-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"2813dc49-a26c-4725-8860-b58aca9437a7"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"2813dc49-a26c-4725-8860-b58aca9437a7"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":1,"session_id":"2813dc49-a26c-4725-8860-b58aca9437a7"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"0a6a18b4-baf0-4361-810e-9087457e8ad0"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"0a6a18b4-baf0-4361-810e-9087457e8ad0"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"0a6a18b4-baf0-4361-810e-9087457e8ad0"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"comment-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"comment-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"0a6a18b4-baf0-4361-810e-9087457e8ad0"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"0a6a18b4-baf0-4361-810e-9087457e8ad0"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"0a6a18b4-baf0-4361-810e-9087457e8ad0"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"overview","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"overview","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"comment-assistant\":{\"text\":\"Regenerating.\",\"intent\":\"comment_retrigger\",\"ts\":1763310755298}}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"0a6a18b4-baf0-4361-810e-9087457e8ad0"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"0a6a18b4-baf0-4361-810e-9087457e8ad0"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"0a6a18b4-baf0-4361-810e-9087457e8ad0"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"security","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"security","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"overview\":{\"text\":\"Overview (regenerated)\",\"tags\":{\"label\":\"feature\",\"review-effort\":2},\"ts\":1763310755301},\"comment-assistant\":{\"text\":\"Regenerating.\",\"intent\":\"comment_retrigger\",\"ts\":1763310755298}}}"},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"architecture","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"architecture","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"overview\":{\"text\":\"Overview (regenerated)\",\"tags\":{\"label\":\"feature\",\"review-effort\":2},\"ts\":1763310755301},\"comment-assistant\":{\"text\":\"Regenerating.\",\"intent\":\"comment_retrigger\",\"ts\":1763310755298}}}"},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"performance","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"performance","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"overview\":{\"text\":\"Overview (regenerated)\",\"tags\":{\"label\":\"feature\",\"review-effort\":2},\"ts\":1763310755301},\"comment-assistant\":{\"text\":\"Regenerating.\",\"intent\":\"comment_retrigger\",\"ts\":1763310755298}}}"},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"quality","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"quality","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"overview\":{\"text\":\"Overview (regenerated)\",\"tags\":{\"label\":\"feature\",\"review-effort\":2},\"ts\":1763310755301},\"comment-assistant\":{\"text\":\"Regenerating.\",\"intent\":\"comment_retrigger\",\"ts\":1763310755298}}}"},"events":[]}
{"name":"visor.check","attributes":{"visor.check.id":"security","visor.check.output":"{\"issues\":[],\"debug\":{\"prompt\":\"<review_request>\\n  <instructions>\\nBased on our overview discussion, please perform a comprehensive security analysis of the code changes.\\n\\nAnalyze the files listed in the `<files_summary>` section and focus on the code changes shown in the diff sections.\\n\\n## Security Analysis Areas\\n\\n**Input Validation & Injection:**\\n- SQL injection in database queries\\n- XSS vulnerabilities in user input handling\\n- Command injection in system calls\\n- Path traversal in file operations\\n\\n**Authentication & Authorization:**\\n- Weak authentication mechanisms\\n- Session management flaws\\n- Access control bypasses\\n- Privilege escalation opportunities\\n\\n**Data Protection:**\\n- Sensitive data exposure in logs/errors\\n- Unencrypted data storage\\n- API key or credential leaks\\n- Privacy regulation compliance\\n\\n**Infrastructure Security:**\\n- Insecure configurations\\n- Missing security headers\\n- Vulnerable dependencies\\n- Resource exhaustion vulnerabilities\\n\\nProvide specific findings with clear explanations and actionable remediation steps.\\n\\n## Severity Guidelines\\nUse the following severity levels appropriately:\\n- **critical**: Security vulnerabilities that could lead to immediate compromise (RCE, SQL injection, authentication bypass, exposed secrets)\\n- **error**: Security issues that must be fixed before production (XSS, path traversal, weak crypto, missing auth checks)\\n- **warning**: Security concerns that should be addressed (verbose errors, missing rate limiting, insecure defaults)\\n- **info**: Security best practices and hardening suggestions (defense in depth, additional validation)\\n\\n  </instructions>\\n\\n  <context>\\n<issue>\\n  <!-- Core issue metadata including identification, status, and timeline information -->\\n  <metadata>\\n    <number>1</number>\\n    <title>Sample issue title</title>\\n    <author>test-user</author>\\n    <state>open</state>\\n    <created_at></created_at>\\n    <updated_at></updated_at>\\n    <comments_count>0</comments_count>\\n  </metadata>\\n  <!-- Full issue description and body text provided by the issue author -->\\n  <description>\\nIssue body\\n  </description>\\n  <!-- The comment that triggered this analysis -->\\n  <triggering_comment>\\n    <author>contributor</author>\\n    <created_at></created_at>\\n    <body>/visor Regenerate reviews</body>\\n  </triggering_comment>\\n</issue>\\n  </context>\\n\\n  <rules>\\n    <rule>Understand the issue context and requirements from the XML data structure</rule>\\n    <rule>Provide helpful, actionable guidance based on the issue details</rule>\\n    <rule>Be constructive and supportive in your analysis</rule>\\n    <rule>Consider project conventions and patterns when making recommendations</rule>\\n    <rule>Suggest practical solutions or next steps that address the specific concern</rule>\\n    <rule>Focus on addressing the specific concern raised in the issue</rule>\\n    <rule>Reference relevant XML elements like metadata, description, labels, assignees when providing context</rule>\\n  </rules>\\n</review_request>\",\"rawResponse\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\",\"provider\":\"mock\",\"model\":\"default\",\"apiKeySource\":\"unknown\",\"processingTime\":501,\"promptLength\":2945,\"responseLength\":61,\"errors\":[],\"jsonParseSuccess\":true,\"timestamp\":\"2025-11-16T16:32:35.303Z\",\"schemaName\":\"code-review\"}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"0a6a18b4-baf0-4361-810e-9087457e8ad0"}}]}
{"name":"visor.check","attributes":{"visor.check.id":"architecture","visor.check.output":"{\"issues\":[],\"debug\":{\"prompt\":\"<review_request>\\n  <instructions>\\nBuilding on our overview analysis, evaluate the architectural decisions and design patterns.\\n\\nFocus on the files listed in `<files_summary>` and analyze the code changes shown in the `<full_diff>` or `<commit_diff>` sections.\\n\\n## Architecture Analysis Areas\\n**Design Simplicity & Pragmatism:**\\n- Over-engineering: Is the solution more complex than necessary?\\n- YAGNI violations: Are we building features not currently needed?\\n- Can this be implemented more simply using existing patterns?\\n- Are there existing functions/modules that could be reused instead?\\n- Is the abstraction level appropriate for the problem size?\\n\\n**Special Cases & Edge Cases:**\\n- Does the code introduce special case handling that could be generalized?\\n- Are there hard-coded values or logic for specific scenarios?\\n- Can special cases be eliminated through better design?\\n- Are edge cases handled through general patterns rather than one-offs?\\n\\n**Consistency & Reusability:**\\n- Does this follow existing architectural patterns in the codebase?\\n- Are there similar problems already solved differently elsewhere?\\n- Could this functionality be generalized to handle more cases?\\n- Does it duplicate existing functionality that could be extended?\\n\\n**Design Patterns & Structure:**\\n- Are design patterns used appropriately (not forced)?\\n- Is the separation of concerns clear and logical?\\n- Are dependencies and coupling minimized?\\n- Is the code organized in a way that makes sense?\\n\\n**Scalability & Extensibility:**\\n- Will this design scale with future requirements?\\n- Is it easy to extend without major refactoring?\\n- Are boundaries and interfaces well-defined?\\n\\nFlag issues where simpler solutions exist, special cases are introduced unnecessarily, or existing functionality could be reused.\\n\\n## Severity Guidelines\\nUse the following severity levels appropriately:\\n- **critical**: Architectural decisions that will cause system failures or major technical debt (circular dependencies, tight coupling causing deadlocks)\\n- **error**: Significant architectural problems (over-engineering, unnecessary special cases, violation of core patterns, missed reuse opportunities)\\n- **warning**: Architectural concerns that should be addressed (minor over-abstraction, could be simplified, inconsistent patterns)\\n- **info**: Architectural suggestions and alternative approaches (simpler patterns available, potential for future reuse)\\n\\n  </instructions>\\n\\n  <context>\\n<issue>\\n  <!-- Core issue metadata including identification, status, and timeline information -->\\n  <metadata>\\n    <number>1</number>\\n    <title>Sample issue title</title>\\n    <author>test-user</author>\\n    <state>open</state>\\n    <created_at></created_at>\\n    <updated_at></updated_at>\\n    <comments_count>0</comments_count>\\n  </metadata>\\n  <!-- Full issue description and body text provided by the issue author -->\\n  <description>\\nIssue body\\n  </description>\\n  <!-- The comment that triggered this analysis -->\\n  <triggering_comment>\\n    <author>contributor</author>\\n    <created_at></created_at>\\n    <body>/visor Regenerate reviews</body>\\n  </triggering_comment>\\n</issue>\\n  </context>\\n\\n  <rules>\\n    <rule>Understand the issue context and requirements from the XML data structure</rule>\\n    <rule>Provide helpful, actionable guidance based on the issue details</rule>\\n    <rule>Be constructive and supportive in your analysis</rule>\\n    <rule>Consider project conventions and patterns when making recommendations</rule>\\n    <rule>Suggest practical solutions or next steps that address the specific concern</rule>\\n    <rule>Focus on addressing the specific concern raised in the issue</rule>\\n    <rule>Reference relevant XML elements like metadata, description, labels, assignees when providing context</rule>\\n  </rules>\\n</review_request>\",\"rawResponse\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\",\"provider\":\"mock\",\"model\":\"default\",\"apiKeySource\":\"unknown\",\"processingTime\":502,\"promptLength\":3800,\"responseLength\":61,\"errors\":[],\"jsonParseSuccess\":true,\"timestamp\":\"2025-11-16T16:32:35.303Z\",\"schemaName\":\"code-review\"}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"0a6a18b4-baf0-4361-810e-9087457e8ad0"}}]}
{"name":"visor.check","attributes":{"visor.check.id":"performance","visor.check.output":"{\"issues\":[],\"debug\":{\"prompt\":\"<review_request>\\n  <instructions>\\nBuilding on our overview analysis, now review the code changes for performance issues.\\n\\nFocus on the files listed in `<files_summary>` and analyze the code changes shown in the `<full_diff>` or `<commit_diff>` sections.\\n\\n## Performance Analysis Areas\\n**Algorithm & Data Structure Efficiency:**\\n- Time complexity analysis (O(n), O(n²), etc.)\\n- Space complexity and memory usage\\n- Inefficient loops and nested operations\\n- Suboptimal data structure choices\\n\\n**Database Performance:**\\n- N+1 query problems\\n- Missing database indexes\\n- Inefficient JOIN operations\\n- Large result set retrievals\\n\\n**Resource Management:**\\n- Memory leaks and excessive allocations\\n- File handle management\\n- Connection pooling issues\\n- Resource cleanup patterns\\n\\n**Async & Concurrency:**\\n- Blocking operations in async contexts\\n- Race conditions and deadlocks\\n- Inefficient parallel processing\\n\\nBuilding on our overview analysis, identify performance issues and provide optimization recommendations.\\n\\n## Severity Guidelines\\nUse the following severity levels appropriately:\\n- **critical**: Performance issues causing system failure or severe degradation (infinite loops, memory leaks causing OOM)\\n- **error**: Significant performance problems affecting user experience (O(n²) in critical path, N+1 queries, blocking I/O)\\n- **warning**: Performance concerns that should be optimized (inefficient algorithms, missing indexes, unnecessary operations)\\n- **info**: Performance best practices and optimization opportunities (caching suggestions, async improvements)\\n\\n  </instructions>\\n\\n  <context>\\n<issue>\\n  <!-- Core issue metadata including identification, status, and timeline information -->\\n  <metadata>\\n    <number>1</number>\\n    <title>Sample issue title</title>\\n    <author>test-user</author>\\n    <state>open</state>\\n    <created_at></created_at>\\n    <updated_at></updated_at>\\n    <comments_count>0</comments_count>\\n  </metadata>\\n  <!-- Full issue description and body text provided by the issue author -->\\n  <description>\\nIssue body\\n  </description>\\n  <!-- The comment that triggered this analysis -->\\n  <triggering_comment>\\n    <author>contributor</author>\\n    <created_at></created_at>\\n    <body>/visor Regenerate reviews</body>\\n  </triggering_comment>\\n</issue>\\n  </context>\\n\\n  <rules>\\n    <rule>Understand the issue context and requirements from the XML data structure</rule>\\n    <rule>Provide helpful, actionable guidance based on the issue details</rule>\\n    <rule>Be constructive and supportive in your analysis</rule>\\n    <rule>Consider project conventions and patterns when making recommendations</rule>\\n    <rule>Suggest practical solutions or next steps that address the specific concern</rule>\\n    <rule>Focus on addressing the specific concern raised in the issue</rule>\\n    <rule>Reference relevant XML elements like metadata, description, labels, assignees when providing context</rule>\\n  </rules>\\n</review_request>\",\"rawResponse\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\",\"provider\":\"mock\",\"model\":\"default\",\"apiKeySource\":\"unknown\",\"processingTime\":504,\"promptLength\":2941,\"responseLength\":61,\"errors\":[],\"jsonParseSuccess\":true,\"timestamp\":\"2025-11-16T16:32:35.303Z\",\"schemaName\":\"code-review\"}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"0a6a18b4-baf0-4361-810e-9087457e8ad0"}}]}
{"name":"visor.check","attributes":{"visor.check.id":"quality","visor.check.output":"{\"issues\":[],\"debug\":{\"prompt\":\"<review_request>\\n  <instructions>\\nBuilding on our overview discussion, evaluate the code quality and maintainability.\\n\\nReview the code changes shown in the `<full_diff>` or `<commit_diff>` sections, considering the files listed in `<files_summary>`.\\n\\n## Quality Assessment Areas\\n**Code Structure & Design:**\\n- SOLID principles adherence\\n- Design pattern appropriateness\\n- Separation of concerns\\n- Code organization and clarity\\n\\n**Error Handling & Reliability:**\\n- Exception handling completeness\\n- Error propagation patterns\\n- Input validation thoroughness\\n- Edge case coverage\\n\\n**Testing & Test Coverage:**\\n- Missing tests for critical functionality\\n- Test coverage gaps\\n- Test quality and effectiveness\\n- Edge cases and error scenarios coverage\\n\\n**Test Quality - Critical Checks:**\\n- **Magic Numbers in Tests**: Are tests using hard-coded values just to make assertions pass?\\n  - Look for arbitrary numbers without clear meaning (e.g., `expect(result).toBe(42)` where 42 has no semantic meaning)\\n  - Tests should use meaningful constants or derive expected values from the input\\n  - Tests that \\\"cut corners\\\" by adjusting expected values to match output are fragile\\n  - Flag tests where the expected value seems arbitrary or reverse-engineered from implementation\\n- **Test Integrity**: Do tests actually validate correct behavior or just check current behavior?\\n  - Are tests meaningful and would catch real bugs?\\n  - Do tests explain why a value should be expected (through variable names, comments, or clear logic)?\\n  - Are test assertions based on requirements rather than implementation details?\\n- **Negative Testing Coverage**: Are failure cases and error conditions properly tested?\\n  - Are there tests for invalid inputs, boundary conditions, and error states?\\n  - Do tests verify error messages and error handling paths?\\n  - Are edge cases like null, empty, undefined, zero, negative values tested?\\n  - Do tests cover \\\"unhappy path\\\" scenarios (authentication failures, network errors, invalid data)?\\n  - Are exception handling and error recovery mechanisms validated?\\n  - Flag missing negative tests for critical functionality\\n\\n**Maintainability:**\\n- Code testability issues\\n- Dependencies and coupling problems\\n- Technical debt introduction\\n- Code duplication (DRY violations)\\n\\n**Language-Specific Best Practices:**\\n- Idiomatic code usage\\n- Framework/library best practices\\n- Type safety (if applicable)\\n\\nFocus on actionable improvements that enhance code maintainability based on the overview analysis.\\nPay special attention to test quality - tests that use magic numbers or cut corners undermine reliability.\\n\\n## Severity Guidelines\\nUse the following severity levels appropriately:\\n- **critical**: Code quality issues that will cause bugs or failures (logic errors, race conditions, null pointer issues)\\n- **error**: Quality problems that significantly impact maintainability (no error handling, high complexity, severe coupling, tests with magic numbers)\\n- **warning**: Quality concerns that should be addressed (missing tests, code duplication, poor naming, unclear test expectations)\\n- **info**: Best practices and improvement suggestions (refactoring opportunities, documentation improvements, test clarity)\\n\\n  </instructions>\\n\\n  <context>\\n<issue>\\n  <!-- Core issue metadata including identification, status, and timeline information -->\\n  <metadata>\\n    <number>1</number>\\n    <title>Sample issue title</title>\\n    <author>test-user</author>\\n    <state>open</state>\\n    <created_at></created_at>\\n    <updated_at></updated_at>\\n    <comments_count>0</comments_count>\\n  </metadata>\\n  <!-- Full issue description and body text provided by the issue author -->\\n  <description>\\nIssue body\\n  </description>\\n  <!-- The comment that triggered this analysis -->\\n  <triggering_comment>\\n    <author>contributor</author>\\n    <created_at></created_at>\\n    <body>/visor Regenerate reviews</body>\\n  </triggering_comment>\\n</issue>\\n  </context>\\n\\n  <rules>\\n    <rule>Understand the issue context and requirements from the XML data structure</rule>\\n    <rule>Provide helpful, actionable guidance based on the issue details</rule>\\n    <rule>Be constructive and supportive in your analysis</rule>\\n    <rule>Consider project conventions and patterns when making recommendations</rule>\\n    <rule>Suggest practical solutions or next steps that address the specific concern</rule>\\n    <rule>Focus on addressing the specific concern raised in the issue</rule>\\n    <rule>Reference relevant XML elements like metadata, description, labels, assignees when providing context</rule>\\n  </rules>\\n</review_request>\",\"rawResponse\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\",\"provider\":\"mock\",\"model\":\"default\",\"apiKeySource\":\"unknown\",\"processingTime\":505,\"promptLength\":4596,\"responseLength\":61,\"errors\":[],\"jsonParseSuccess\":true,\"timestamp\":\"2025-11-16T16:32:35.303Z\",\"schemaName\":\"code-review\"}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"0a6a18b4-baf0-4361-810e-9087457e8ad0"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"0a6a18b4-baf0-4361-810e-9087457e8ad0"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":2,"session_id":"0a6a18b4-baf0-4361-810e-9087457e8ad0"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"87b21c4a-e8d0-4492-b7ed-6dc97f5748b8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"87b21c4a-e8d0-4492-b7ed-6dc97f5748b8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"87b21c4a-e8d0-4492-b7ed-6dc97f5748b8"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"comment-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"comment-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"87b21c4a-e8d0-4492-b7ed-6dc97f5748b8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"87b21c4a-e8d0-4492-b7ed-6dc97f5748b8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"87b21c4a-e8d0-4492-b7ed-6dc97f5748b8"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"extract-facts","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"extract-facts","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"issue-assistant|comment-assistant\":{\"issues\":[]},\"comment-assistant\":{\"text\":\"We rely on defaults/visor.yaml line 11 for max_parallelism=4.\",\"intent\":\"comment_reply\",\"ts\":1763310755813}}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"87b21c4a-e8d0-4492-b7ed-6dc97f5748b8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"87b21c4a-e8d0-4492-b7ed-6dc97f5748b8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"87b21c4a-e8d0-4492-b7ed-6dc97f5748b8"}}]}
{"name":"visor.foreach.item","attributes":{"visor.check.id":"validate-fact","visor.foreach.index":0,"visor.foreach.total":1},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"validate-fact","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"validate-fact","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"extract-facts\":{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true},\"comment-assistant\":{\"text\":\"We rely on defaults/visor.yaml line 11 for max_parallelism=4.\",\"intent\":\"comment_reply\",\"ts\":1763310755813},\"extract-facts-raw\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true}]}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"87b21c4a-e8d0-4492-b7ed-6dc97f5748b8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"87b21c4a-e8d0-4492-b7ed-6dc97f5748b8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":1,"session_id":"87b21c4a-e8d0-4492-b7ed-6dc97f5748b8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"comment-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"comment-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"extract-facts","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"extract-facts","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"issue-assistant|comment-assistant\":{\"issues\":[]},\"comment-assistant\":{\"text\":\"We rely on defaults/visor.yaml line 11 for max_parallelism=4.\",\"intent\":\"comment_reply\",\"ts\":1763310755828}}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.foreach.item","attributes":{"visor.check.id":"validate-fact","visor.foreach.index":0,"visor.foreach.total":1},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"validate-fact","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"validate-fact","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"extract-facts\":{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true},\"comment-assistant\":{\"text\":\"We rely on defaults/visor.yaml line 11 for max_parallelism=4.\",\"intent\":\"comment_reply\",\"ts\":1763310755828},\"extract-facts-raw\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true}]}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"comment-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"comment-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"comment-assistant\":{\"text\":\"We rely on defaults/visor.yaml line 11 for max_parallelism=4.\",\"intent\":\"comment_reply\",\"ts\":1763310755828},\"extract-facts\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true}],\"validate-fact\":{\"issues\":[{\"file\":\"system\",\"line\":0,\"ruleId\":\"extract-facts/routing/loop_budget_exceeded\",\"message\":\"Routing loop budget exceeded (max_loops=1) during on_finish goto\",\"severity\":\"error\",\"category\":\"logic\"}],\"isForEach\":true,\"forEachItems\":[{\"fact_id\":\"f1\",\"claim\":\"max_parallelism defaults to 4\",\"is_valid\":false,\"confidence\":\"high\",\"evidence\":\"defaults/visor.yaml:11 does not set 4\",\"correction\":\"max_parallelism defaults to 3\"}],\"forEachItemResults\":[{\"issues\":[],\"output\":{\"fact_id\":\"f1\",\"claim\":\"max_parallelism defaults to 4\",\"is_valid\":false,\"confidence\":\"high\",\"evidence\":\"defaults/visor.yaml:11 does not set 4\",\"correction\":\"max_parallelism defaults to 3\"}}]},\"extract-facts-raw\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true}]}}"},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"extract-facts","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"extract-facts","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"issue-assistant|comment-assistant\":{\"issues\":[]},\"comment-assistant\":{\"text\":\"We rely on defaults/visor.yaml line 11 for max_parallelism=4.\",\"intent\":\"comment_reply\",\"ts\":1763310755828},\"extract-facts\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true}],\"validate-fact\":{\"issues\":[{\"file\":\"system\",\"line\":0,\"ruleId\":\"extract-facts/routing/loop_budget_exceeded\",\"message\":\"Routing loop budget exceeded (max_loops=1) during on_finish goto\",\"severity\":\"error\",\"category\":\"logic\"}],\"isForEach\":true,\"forEachItems\":[{\"fact_id\":\"f1\",\"claim\":\"max_parallelism defaults to 4\",\"is_valid\":false,\"confidence\":\"high\",\"evidence\":\"defaults/visor.yaml:11 does not set 4\",\"correction\":\"max_parallelism defaults to 3\"}],\"forEachItemResults\":[{\"issues\":[],\"output\":{\"fact_id\":\"f1\",\"claim\":\"max_parallelism defaults to 4\",\"is_valid\":false,\"confidence\":\"high\",\"evidence\":\"defaults/visor.yaml:11 does not set 4\",\"correction\":\"max_parallelism defaults to 3\"}}]},\"extract-facts-raw\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true}]}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.foreach.item","attributes":{"visor.check.id":"validate-fact","visor.foreach.index":0,"visor.foreach.total":1},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"validate-fact","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"validate-fact","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"extract-facts\":{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true},\"comment-assistant\":{\"text\":\"We rely on defaults/visor.yaml line 11 for max_parallelism=4.\",\"intent\":\"comment_reply\",\"ts\":1763310755842},\"validate-fact\":{\"fact_id\":\"f1\",\"claim\":\"max_parallelism defaults to 4\",\"is_valid\":false,\"confidence\":\"high\",\"evidence\":\"defaults/visor.yaml:11 does not set 4\",\"correction\":\"max_parallelism defaults to 3\"},\"extract-facts-raw\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true}]}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":2,"session_id":"590014bc-2318-4f29-abd9-c3f4b0ef3857"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"comment-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"comment-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"extract-facts","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"extract-facts","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"issue-assistant|comment-assistant\":{\"issues\":[]},\"comment-assistant\":{\"text\":\"We rely on defaults/visor.yaml for concurrency defaults.\",\"intent\":\"comment_reply\",\"ts\":1763310755857}}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.foreach.item","attributes":{"visor.check.id":"validate-fact","visor.foreach.index":0,"visor.foreach.total":2},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"validate-fact","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"validate-fact","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"extract-facts\":{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true},\"comment-assistant\":{\"text\":\"We rely on defaults/visor.yaml for concurrency defaults.\",\"intent\":\"comment_reply\",\"ts\":1763310755857},\"extract-facts-raw\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true},{\"id\":\"f2\",\"category\":\"Feature\",\"claim\":\"Fast mode is enabled by default\",\"verifiable\":true}]}}"},"events":[]}
{"name":"visor.foreach.item","attributes":{"visor.check.id":"validate-fact","visor.foreach.index":1,"visor.foreach.total":2},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"validate-fact","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"validate-fact","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"extract-facts\":{\"id\":\"f2\",\"category\":\"Feature\",\"claim\":\"Fast mode is enabled by default\",\"verifiable\":true},\"comment-assistant\":{\"text\":\"We rely on defaults/visor.yaml for concurrency defaults.\",\"intent\":\"comment_reply\",\"ts\":1763310755857},\"validate-fact\":{\"fact_id\":\"f1\",\"claim\":\"max_parallelism defaults to 4\",\"is_valid\":false,\"confidence\":\"high\",\"evidence\":\"defaults/visor.yaml:11\",\"correction\":\"max_parallelism defaults to 3\"},\"extract-facts-raw\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true},{\"id\":\"f2\",\"category\":\"Feature\",\"claim\":\"Fast mode is enabled by default\",\"verifiable\":true}]}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"comment-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"comment-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"comment-assistant\":{\"text\":\"We rely on defaults/visor.yaml for concurrency defaults.\",\"intent\":\"comment_reply\",\"ts\":1763310755857},\"extract-facts\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true},{\"id\":\"f2\",\"category\":\"Feature\",\"claim\":\"Fast mode is enabled by default\",\"verifiable\":true}],\"validate-fact\":{\"issues\":[{\"file\":\"system\",\"line\":0,\"ruleId\":\"extract-facts/routing/loop_budget_exceeded\",\"message\":\"Routing loop budget exceeded (max_loops=1) during on_finish goto\",\"severity\":\"error\",\"category\":\"logic\"}],\"isForEach\":true,\"forEachItems\":[{\"fact_id\":\"f1\",\"claim\":\"max_parallelism defaults to 4\",\"is_valid\":false,\"confidence\":\"high\",\"evidence\":\"defaults/visor.yaml:11\",\"correction\":\"max_parallelism defaults to 3\"},{\"fact_id\":\"f2\",\"claim\":\"Fast mode is enabled by default\",\"is_valid\":true,\"confidence\":\"high\",\"evidence\":\"src/config.ts:FAST_MODE=true\"}],\"forEachItemResults\":[{\"issues\":[],\"output\":{\"fact_id\":\"f1\",\"claim\":\"max_parallelism defaults to 4\",\"is_valid\":false,\"confidence\":\"high\",\"evidence\":\"defaults/visor.yaml:11\",\"correction\":\"max_parallelism defaults to 3\"}},{\"issues\":[],\"output\":{\"fact_id\":\"f2\",\"claim\":\"Fast mode is enabled by default\",\"is_valid\":true,\"confidence\":\"high\",\"evidence\":\"src/config.ts:FAST_MODE=true\"}}]},\"extract-facts-raw\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true},{\"id\":\"f2\",\"category\":\"Feature\",\"claim\":\"Fast mode is enabled by default\",\"verifiable\":true}]}}"},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"extract-facts","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"extract-facts","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"issue-assistant|comment-assistant\":{\"issues\":[]},\"comment-assistant\":{\"text\":\"We rely on defaults/visor.yaml for concurrency defaults.\",\"intent\":\"comment_reply\",\"ts\":1763310755857},\"extract-facts\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true},{\"id\":\"f2\",\"category\":\"Feature\",\"claim\":\"Fast mode is enabled by default\",\"verifiable\":true}],\"validate-fact\":{\"issues\":[{\"file\":\"system\",\"line\":0,\"ruleId\":\"extract-facts/routing/loop_budget_exceeded\",\"message\":\"Routing loop budget exceeded (max_loops=1) during on_finish goto\",\"severity\":\"error\",\"category\":\"logic\"}],\"isForEach\":true,\"forEachItems\":[{\"fact_id\":\"f1\",\"claim\":\"max_parallelism defaults to 4\",\"is_valid\":false,\"confidence\":\"high\",\"evidence\":\"defaults/visor.yaml:11\",\"correction\":\"max_parallelism defaults to 3\"},{\"fact_id\":\"f2\",\"claim\":\"Fast mode is enabled by default\",\"is_valid\":true,\"confidence\":\"high\",\"evidence\":\"src/config.ts:FAST_MODE=true\"}],\"forEachItemResults\":[{\"issues\":[],\"output\":{\"fact_id\":\"f1\",\"claim\":\"max_parallelism defaults to 4\",\"is_valid\":false,\"confidence\":\"high\",\"evidence\":\"defaults/visor.yaml:11\",\"correction\":\"max_parallelism defaults to 3\"}},{\"issues\":[],\"output\":{\"fact_id\":\"f2\",\"claim\":\"Fast mode is enabled by default\",\"is_valid\":true,\"confidence\":\"high\",\"evidence\":\"src/config.ts:FAST_MODE=true\"}}]},\"extract-facts-raw\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true},{\"id\":\"f2\",\"category\":\"Feature\",\"claim\":\"Fast mode is enabled by default\",\"verifiable\":true}]}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.foreach.item","attributes":{"visor.check.id":"validate-fact","visor.foreach.index":0,"visor.foreach.total":2},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"validate-fact","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"validate-fact","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"extract-facts\":{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true},\"comment-assistant\":{\"text\":\"We rely on defaults/visor.yaml for concurrency defaults.\",\"intent\":\"comment_reply\",\"ts\":1763310755878},\"validate-fact\":{\"fact_id\":\"f1\",\"claim\":\"max_parallelism defaults to 4\",\"is_valid\":false,\"confidence\":\"high\",\"evidence\":\"defaults/visor.yaml:11\",\"correction\":\"max_parallelism defaults to 3\"},\"extract-facts-raw\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true},{\"id\":\"f2\",\"category\":\"Feature\",\"claim\":\"Fast mode is enabled by default\",\"verifiable\":true}]}}"},"events":[]}
{"name":"visor.foreach.item","attributes":{"visor.check.id":"validate-fact","visor.foreach.index":1,"visor.foreach.total":2},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"validate-fact","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"validate-fact","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"extract-facts\":{\"id\":\"f2\",\"category\":\"Feature\",\"claim\":\"Fast mode is enabled by default\",\"verifiable\":true},\"comment-assistant\":{\"text\":\"We rely on defaults/visor.yaml for concurrency defaults.\",\"intent\":\"comment_reply\",\"ts\":1763310755878},\"validate-fact\":{\"fact_id\":\"f2\",\"claim\":\"Fast mode is enabled by default\",\"is_valid\":true,\"confidence\":\"high\",\"evidence\":\"src/config.ts:FAST_MODE=true\"},\"extract-facts-raw\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true},{\"id\":\"f2\",\"category\":\"Feature\",\"claim\":\"Fast mode is enabled by default\",\"verifiable\":true}]}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":2,"session_id":"ca426975-4d8d-4f0f-9704-8161afa2760f"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"4c182d0e-3a84-4380-80f5-4cb046f7b652"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"4c182d0e-3a84-4380-80f5-4cb046f7b652"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"4c182d0e-3a84-4380-80f5-4cb046f7b652"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"comment-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"comment-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{}}"},"events":[]}
{"name":"visor.check","attributes":{"visor.check.id":"comment-assistant","visor.check.output":"{\"text\":\"### Assistant Reply\",\"intent\":\"comment_reply\"}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"4c182d0e-3a84-4380-80f5-4cb046f7b652"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"4c182d0e-3a84-4380-80f5-4cb046f7b652"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":1,"session_id":"4c182d0e-3a84-4380-80f5-4cb046f7b652"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"78f670f6-c235-41d5-8350-509c42b0fac4"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"78f670f6-c235-41d5-8350-509c42b0fac4"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"78f670f6-c235-41d5-8350-509c42b0fac4"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"issue-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"issue-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"78f670f6-c235-41d5-8350-509c42b0fac4"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"78f670f6-c235-41d5-8350-509c42b0fac4"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"78f670f6-c235-41d5-8350-509c42b0fac4"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"apply-issue-labels","visor.provider.type":"github"}}
{"name":"visor.provider","attributes":{"visor.check.id":"extract-facts","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"extract-facts","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"issue-assistant|comment-assistant\":{\"issues\":[]},\"issue-assistant\":{\"text\":\"Opening issue with claim about defaults/visor.yaml\",\"intent\":\"issue_triage\",\"ts\":1763310756402}}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"78f670f6-c235-41d5-8350-509c42b0fac4"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"78f670f6-c235-41d5-8350-509c42b0fac4"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"78f670f6-c235-41d5-8350-509c42b0fac4"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"78f670f6-c235-41d5-8350-509c42b0fac4"}}]}
{"name":"visor.foreach.item","attributes":{"visor.check.id":"validate-fact","visor.foreach.index":0,"visor.foreach.total":1},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"validate-fact","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"validate-fact","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"extract-facts\":{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true},\"issue-assistant\":{\"text\":\"Opening issue with claim about defaults/visor.yaml\",\"intent\":\"issue_triage\",\"ts\":1763310756402},\"apply-issue-labels\":{\"issues\":[]},\"extract-facts-raw\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true}]}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"78f670f6-c235-41d5-8350-509c42b0fac4"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"78f670f6-c235-41d5-8350-509c42b0fac4"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":1,"session_id":"78f670f6-c235-41d5-8350-509c42b0fac4"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"issue-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"issue-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"apply-issue-labels","visor.provider.type":"github"}}
{"name":"visor.provider","attributes":{"visor.check.id":"extract-facts","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"extract-facts","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"issue-assistant|comment-assistant\":{\"issues\":[]},\"issue-assistant\":{\"text\":\"Claim: max_parallelism defaults to 4\",\"intent\":\"issue_triage\",\"ts\":1763310756428}}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.foreach.item","attributes":{"visor.check.id":"validate-fact","visor.foreach.index":0,"visor.foreach.total":1},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"validate-fact","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"validate-fact","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"extract-facts\":{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true},\"issue-assistant\":{\"text\":\"Claim: max_parallelism defaults to 4\",\"intent\":\"issue_triage\",\"ts\":1763310756428},\"apply-issue-labels\":{\"issues\":[]},\"extract-facts-raw\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true}]}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"issue-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"issue-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"issue-assistant\":{\"text\":\"Claim: max_parallelism defaults to 4\",\"intent\":\"issue_triage\",\"ts\":1763310756428},\"apply-issue-labels\":{\"issues\":[]},\"extract-facts\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true}],\"validate-fact\":{\"issues\":[{\"file\":\"system\",\"line\":0,\"ruleId\":\"extract-facts/routing/loop_budget_exceeded\",\"message\":\"Routing loop budget exceeded (max_loops=1) during on_finish goto\",\"severity\":\"error\",\"category\":\"logic\"}],\"isForEach\":true,\"forEachItems\":[{\"fact_id\":\"f1\",\"claim\":\"max_parallelism defaults to 4\",\"is_valid\":false,\"confidence\":\"high\",\"evidence\":\"defaults/visor.yaml:11 does not set 4\",\"correction\":\"max_parallelism defaults to 3\"}],\"forEachItemResults\":[{\"issues\":[],\"output\":{\"fact_id\":\"f1\",\"claim\":\"max_parallelism defaults to 4\",\"is_valid\":false,\"confidence\":\"high\",\"evidence\":\"defaults/visor.yaml:11 does not set 4\",\"correction\":\"max_parallelism defaults to 3\"}}]},\"extract-facts-raw\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true}]}}"},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"extract-facts","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"extract-facts","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"issue-assistant|comment-assistant\":{\"issues\":[]},\"issue-assistant\":{\"text\":\"Claim: max_parallelism defaults to 4\",\"intent\":\"issue_triage\",\"ts\":1763310756428},\"apply-issue-labels\":{\"issues\":[]},\"extract-facts\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true}],\"validate-fact\":{\"issues\":[{\"file\":\"system\",\"line\":0,\"ruleId\":\"extract-facts/routing/loop_budget_exceeded\",\"message\":\"Routing loop budget exceeded (max_loops=1) during on_finish goto\",\"severity\":\"error\",\"category\":\"logic\"}],\"isForEach\":true,\"forEachItems\":[{\"fact_id\":\"f1\",\"claim\":\"max_parallelism defaults to 4\",\"is_valid\":false,\"confidence\":\"high\",\"evidence\":\"defaults/visor.yaml:11 does not set 4\",\"correction\":\"max_parallelism defaults to 3\"}],\"forEachItemResults\":[{\"issues\":[],\"output\":{\"fact_id\":\"f1\",\"claim\":\"max_parallelism defaults to 4\",\"is_valid\":false,\"confidence\":\"high\",\"evidence\":\"defaults/visor.yaml:11 does not set 4\",\"correction\":\"max_parallelism defaults to 3\"}}]},\"extract-facts-raw\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true}]}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"apply-issue-labels","visor.provider.type":"github"}}
{"name":"visor.foreach.item","attributes":{"visor.check.id":"validate-fact","visor.foreach.index":0,"visor.foreach.total":1},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"validate-fact","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"validate-fact","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"extract-facts\":{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true},\"issue-assistant\":{\"text\":\"Claim: max_parallelism defaults to 4\",\"intent\":\"issue_triage\",\"ts\":1763310756445},\"apply-issue-labels\":{\"issues\":[]},\"validate-fact\":{\"fact_id\":\"f1\",\"claim\":\"max_parallelism defaults to 4\",\"is_valid\":false,\"confidence\":\"high\",\"evidence\":\"defaults/visor.yaml:11 does not set 4\",\"correction\":\"max_parallelism defaults to 3\"},\"extract-facts-raw\":[{\"id\":\"f1\",\"category\":\"Configuration\",\"claim\":\"max_parallelism defaults to 4\",\"verifiable\":true}]}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":2,"session_id":"cbe3ab8d-6b0a-43d6-9731-fc327e8c3be6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"3bc5ef5c-efe9-4029-aecd-b08bba8de6f6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"3bc5ef5c-efe9-4029-aecd-b08bba8de6f6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"3bc5ef5c-efe9-4029-aecd-b08bba8de6f6"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"overview","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"overview","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search (update)\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[{\"filename\":\"src/search.ts\",\"additions\":1,\"deletions\":0,\"changes\":1,\"status\":\"modified\",\"patch\":\"@@\\n+export function search(q: string) {\\n  return [q] // updated\\n}\\n\"}],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"3bc5ef5c-efe9-4029-aecd-b08bba8de6f6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"3bc5ef5c-efe9-4029-aecd-b08bba8de6f6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"3bc5ef5c-efe9-4029-aecd-b08bba8de6f6"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"security","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"security","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search (update)\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[{\"filename\":\"src/search.ts\",\"additions\":1,\"deletions\":0,\"changes\":1,\"status\":\"modified\",\"patch\":\"@@\\n+export function search(q: string) {\\n  return [q] // updated\\n}\\n\"}],\"outputs\":{\"overview\":{\"text\":\"Overview for new commit\",\"tags\":{\"label\":\"feature\",\"review-effort\":3},\"ts\":1763310756461}}}"},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"architecture","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"architecture","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search (update)\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[{\"filename\":\"src/search.ts\",\"additions\":1,\"deletions\":0,\"changes\":1,\"status\":\"modified\",\"patch\":\"@@\\n+export function search(q: string) {\\n  return [q] // updated\\n}\\n\"}],\"outputs\":{\"overview\":{\"text\":\"Overview for new commit\",\"tags\":{\"label\":\"feature\",\"review-effort\":3},\"ts\":1763310756461}}}"},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"performance","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"performance","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search (update)\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[{\"filename\":\"src/search.ts\",\"additions\":1,\"deletions\":0,\"changes\":1,\"status\":\"modified\",\"patch\":\"@@\\n+export function search(q: string) {\\n  return [q] // updated\\n}\\n\"}],\"outputs\":{\"overview\":{\"text\":\"Overview for new commit\",\"tags\":{\"label\":\"feature\",\"review-effort\":3},\"ts\":1763310756461}}}"},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"quality","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"quality","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search (update)\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[{\"filename\":\"src/search.ts\",\"additions\":1,\"deletions\":0,\"changes\":1,\"status\":\"modified\",\"patch\":\"@@\\n+export function search(q: string) {\\n  return [q] // updated\\n}\\n\"}],\"outputs\":{\"overview\":{\"text\":\"Overview for new commit\",\"tags\":{\"label\":\"feature\",\"review-effort\":3},\"ts\":1763310756461}}}"},"events":[]}
{"name":"visor.check","attributes":{"visor.check.id":"quality","visor.check.output":"{\"issues\":[],\"debug\":{\"prompt\":\"<review_request>\\n  <analysis_type>FULL</analysis_type>\\n\\n  <analysis_focus>\\n    You are analyzing the COMPLETE PR. Review all changes in the full_diff section.\\n  </analysis_focus>\\n\\n  <instructions>\\nBuilding on our overview discussion, evaluate the code quality and maintainability.\\n\\nReview the code changes shown in the `<full_diff>` or `<commit_diff>` sections, considering the files listed in `<files_summary>`.\\n\\n## Quality Assessment Areas\\n**Code Structure & Design:**\\n- SOLID principles adherence\\n- Design pattern appropriateness\\n- Separation of concerns\\n- Code organization and clarity\\n\\n**Error Handling & Reliability:**\\n- Exception handling completeness\\n- Error propagation patterns\\n- Input validation thoroughness\\n- Edge case coverage\\n\\n**Testing & Test Coverage:**\\n- Missing tests for critical functionality\\n- Test coverage gaps\\n- Test quality and effectiveness\\n- Edge cases and error scenarios coverage\\n\\n**Test Quality - Critical Checks:**\\n- **Magic Numbers in Tests**: Are tests using hard-coded values just to make assertions pass?\\n  - Look for arbitrary numbers without clear meaning (e.g., `expect(result).toBe(42)` where 42 has no semantic meaning)\\n  - Tests should use meaningful constants or derive expected values from the input\\n  - Tests that \\\"cut corners\\\" by adjusting expected values to match output are fragile\\n  - Flag tests where the expected value seems arbitrary or reverse-engineered from implementation\\n- **Test Integrity**: Do tests actually validate correct behavior or just check current behavior?\\n  - Are tests meaningful and would catch real bugs?\\n  - Do tests explain why a value should be expected (through variable names, comments, or clear logic)?\\n  - Are test assertions based on requirements rather than implementation details?\\n- **Negative Testing Coverage**: Are failure cases and error conditions properly tested?\\n  - Are there tests for invalid inputs, boundary conditions, and error states?\\n  - Do tests verify error messages and error handling paths?\\n  - Are edge cases like null, empty, undefined, zero, negative values tested?\\n  - Do tests cover \\\"unhappy path\\\" scenarios (authentication failures, network errors, invalid data)?\\n  - Are exception handling and error recovery mechanisms validated?\\n  - Flag missing negative tests for critical functionality\\n\\n**Maintainability:**\\n- Code testability issues\\n- Dependencies and coupling problems\\n- Technical debt introduction\\n- Code duplication (DRY violations)\\n\\n**Language-Specific Best Practices:**\\n- Idiomatic code usage\\n- Framework/library best practices\\n- Type safety (if applicable)\\n\\nFocus on actionable improvements that enhance code maintainability based on the overview analysis.\\nPay special attention to test quality - tests that use magic numbers or cut corners undermine reliability.\\n\\n## Severity Guidelines\\nUse the following severity levels appropriately:\\n- **critical**: Code quality issues that will cause bugs or failures (logic errors, race conditions, null pointer issues)\\n- **error**: Quality problems that significantly impact maintainability (no error handling, high complexity, severe coupling, tests with magic numbers)\\n- **warning**: Quality concerns that should be addressed (missing tests, code duplication, poor naming, unclear test expectations)\\n- **info**: Best practices and improvement suggestions (refactoring opportunities, documentation improvements, test clarity)\\n\\n  </instructions>\\n\\n  <context>\\n<pull_request>\\n  <!-- Core pull request metadata including identification, branches, and change statistics -->\\n  <metadata>\\n    <number>1</number>\\n    <title>feat: add user search (update)</title>\\n    <author>test-user</author>\\n    <base_branch>main</base_branch>\\n    <target_branch>feature/test</target_branch>\\n    <total_additions>0</total_additions>\\n    <total_deletions>0</total_deletions>\\n    <files_changed_count>1</files_changed_count>\\n  </metadata>\\n  <raw_diff_header>\\ndiff --git a/src/search.ts b/src/search.ts\\n  </raw_diff_header>\\n  <!-- Full pull request description provided by the author -->\\n  <description>\\nPR body\\n  </description>\\n  <!-- Complete unified diff showing all changes in the pull request (processed with outline-diff) -->\\n  <full_diff>\\nProbe version: 0.6.0\\nReading from stdin...\\nNo file paths found in stdin.\\n\\nToken Usage:\\n  Request tokens: 45.75\\n  Response tokens: 0\\n  Total tokens: 0\\n\\n  </full_diff>\\n  <!-- Summary of all files changed with statistics -->\\n  <files_summary>\\n    <file>\\n      <filename>src/search.ts</filename>\\n      <status>modified</status>\\n      <additions>1</additions>\\n      <deletions>0</deletions>\\n    </file>\\n  </files_summary>\\n</pull_request>\\n  </context>\\n\\n  <rules>\\n    <rule>Only analyze code that appears with + (additions) or - (deletions) in the diff sections</rule>\\n    <rule>Ignore unchanged code unless directly relevant to understanding a change</rule>\\n    <rule>Line numbers in your response should match actual file line numbers from the diff</rule>\\n    <rule>Focus on real issues, not nitpicks or cosmetic concerns</rule>\\n    <rule>Provide actionable, specific feedback with clear remediation steps</rule>\\n    <rule>For INCREMENTAL analysis, ONLY review changes in commit_diff section</rule>\\n    <rule>For FULL analysis, review all changes in full_diff section</rule>\\n    <rule>Reference specific XML elements like files_summary, metadata when providing context</rule>\\n    <rule>STRICT OUTPUT POLICY: Report only actual problems, risks, or deficiencies. Do not write praise, congratulations, or celebratory text. Do not create issues that merely restate improvements or say \\\"no action needed\\\".</rule>\\n    <rule>SEVERITY ASSIGNMENT: Assign severity ONLY to problems introduced or left unresolved by this change (critical/error/warning/info as appropriate). Do NOT create issue entries solely to acknowledge improvements; if no problems exist, return zero issues.</rule>\\n  </rules>\\n</review_request>\",\"rawResponse\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\",\"provider\":\"mock\",\"model\":\"default\",\"apiKeySource\":\"unknown\",\"processingTime\":519,\"promptLength\":5881,\"responseLength\":61,\"errors\":[],\"jsonParseSuccess\":true,\"timestamp\":\"2025-11-16T16:32:36.483Z\",\"schemaName\":\"code-review\"}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"3bc5ef5c-efe9-4029-aecd-b08bba8de6f6"}}]}
{"name":"visor.check","attributes":{"visor.check.id":"performance","visor.check.output":"{\"issues\":[],\"debug\":{\"prompt\":\"<review_request>\\n  <analysis_type>FULL</analysis_type>\\n\\n  <analysis_focus>\\n    You are analyzing the COMPLETE PR. Review all changes in the full_diff section.\\n  </analysis_focus>\\n\\n  <instructions>\\nBuilding on our overview analysis, now review the code changes for performance issues.\\n\\nFocus on the files listed in `<files_summary>` and analyze the code changes shown in the `<full_diff>` or `<commit_diff>` sections.\\n\\n## Performance Analysis Areas\\n**Algorithm & Data Structure Efficiency:**\\n- Time complexity analysis (O(n), O(n²), etc.)\\n- Space complexity and memory usage\\n- Inefficient loops and nested operations\\n- Suboptimal data structure choices\\n\\n**Database Performance:**\\n- N+1 query problems\\n- Missing database indexes\\n- Inefficient JOIN operations\\n- Large result set retrievals\\n\\n**Resource Management:**\\n- Memory leaks and excessive allocations\\n- File handle management\\n- Connection pooling issues\\n- Resource cleanup patterns\\n\\n**Async & Concurrency:**\\n- Blocking operations in async contexts\\n- Race conditions and deadlocks\\n- Inefficient parallel processing\\n\\nBuilding on our overview analysis, identify performance issues and provide optimization recommendations.\\n\\n## Severity Guidelines\\nUse the following severity levels appropriately:\\n- **critical**: Performance issues causing system failure or severe degradation (infinite loops, memory leaks causing OOM)\\n- **error**: Significant performance problems affecting user experience (O(n²) in critical path, N+1 queries, blocking I/O)\\n- **warning**: Performance concerns that should be optimized (inefficient algorithms, missing indexes, unnecessary operations)\\n- **info**: Performance best practices and optimization opportunities (caching suggestions, async improvements)\\n\\n  </instructions>\\n\\n  <context>\\n<pull_request>\\n  <!-- Core pull request metadata including identification, branches, and change statistics -->\\n  <metadata>\\n    <number>1</number>\\n    <title>feat: add user search (update)</title>\\n    <author>test-user</author>\\n    <base_branch>main</base_branch>\\n    <target_branch>feature/test</target_branch>\\n    <total_additions>0</total_additions>\\n    <total_deletions>0</total_deletions>\\n    <files_changed_count>1</files_changed_count>\\n  </metadata>\\n  <raw_diff_header>\\ndiff --git a/src/search.ts b/src/search.ts\\n  </raw_diff_header>\\n  <!-- Full pull request description provided by the author -->\\n  <description>\\nPR body\\n  </description>\\n  <!-- Complete unified diff showing all changes in the pull request (processed with outline-diff) -->\\n  <full_diff>\\nProbe version: 0.6.0\\nReading from stdin...\\nNo file paths found in stdin.\\n\\nToken Usage:\\n  Request tokens: 45.75\\n  Response tokens: 0\\n  Total tokens: 0\\n\\n  </full_diff>\\n  <!-- Summary of all files changed with statistics -->\\n  <files_summary>\\n    <file>\\n      <filename>src/search.ts</filename>\\n      <status>modified</status>\\n      <additions>1</additions>\\n      <deletions>0</deletions>\\n    </file>\\n  </files_summary>\\n</pull_request>\\n  </context>\\n\\n  <rules>\\n    <rule>Only analyze code that appears with + (additions) or - (deletions) in the diff sections</rule>\\n    <rule>Ignore unchanged code unless directly relevant to understanding a change</rule>\\n    <rule>Line numbers in your response should match actual file line numbers from the diff</rule>\\n    <rule>Focus on real issues, not nitpicks or cosmetic concerns</rule>\\n    <rule>Provide actionable, specific feedback with clear remediation steps</rule>\\n    <rule>For INCREMENTAL analysis, ONLY review changes in commit_diff section</rule>\\n    <rule>For FULL analysis, review all changes in full_diff section</rule>\\n    <rule>Reference specific XML elements like files_summary, metadata when providing context</rule>\\n    <rule>STRICT OUTPUT POLICY: Report only actual problems, risks, or deficiencies. Do not write praise, congratulations, or celebratory text. Do not create issues that merely restate improvements or say \\\"no action needed\\\".</rule>\\n    <rule>SEVERITY ASSIGNMENT: Assign severity ONLY to problems introduced or left unresolved by this change (critical/error/warning/info as appropriate). Do NOT create issue entries solely to acknowledge improvements; if no problems exist, return zero issues.</rule>\\n  </rules>\\n</review_request>\",\"rawResponse\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\",\"provider\":\"mock\",\"model\":\"default\",\"apiKeySource\":\"unknown\",\"processingTime\":515,\"promptLength\":4226,\"responseLength\":61,\"errors\":[],\"jsonParseSuccess\":true,\"timestamp\":\"2025-11-16T16:32:36.488Z\",\"schemaName\":\"code-review\"}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"3bc5ef5c-efe9-4029-aecd-b08bba8de6f6"}}]}
{"name":"visor.check","attributes":{"visor.check.id":"architecture","visor.check.output":"{\"issues\":[],\"debug\":{\"prompt\":\"<review_request>\\n  <analysis_type>FULL</analysis_type>\\n\\n  <analysis_focus>\\n    You are analyzing the COMPLETE PR. Review all changes in the full_diff section.\\n  </analysis_focus>\\n\\n  <instructions>\\nBuilding on our overview analysis, evaluate the architectural decisions and design patterns.\\n\\nFocus on the files listed in `<files_summary>` and analyze the code changes shown in the `<full_diff>` or `<commit_diff>` sections.\\n\\n## Architecture Analysis Areas\\n**Design Simplicity & Pragmatism:**\\n- Over-engineering: Is the solution more complex than necessary?\\n- YAGNI violations: Are we building features not currently needed?\\n- Can this be implemented more simply using existing patterns?\\n- Are there existing functions/modules that could be reused instead?\\n- Is the abstraction level appropriate for the problem size?\\n\\n**Special Cases & Edge Cases:**\\n- Does the code introduce special case handling that could be generalized?\\n- Are there hard-coded values or logic for specific scenarios?\\n- Can special cases be eliminated through better design?\\n- Are edge cases handled through general patterns rather than one-offs?\\n\\n**Consistency & Reusability:**\\n- Does this follow existing architectural patterns in the codebase?\\n- Are there similar problems already solved differently elsewhere?\\n- Could this functionality be generalized to handle more cases?\\n- Does it duplicate existing functionality that could be extended?\\n\\n**Design Patterns & Structure:**\\n- Are design patterns used appropriately (not forced)?\\n- Is the separation of concerns clear and logical?\\n- Are dependencies and coupling minimized?\\n- Is the code organized in a way that makes sense?\\n\\n**Scalability & Extensibility:**\\n- Will this design scale with future requirements?\\n- Is it easy to extend without major refactoring?\\n- Are boundaries and interfaces well-defined?\\n\\nFlag issues where simpler solutions exist, special cases are introduced unnecessarily, or existing functionality could be reused.\\n\\n## Severity Guidelines\\nUse the following severity levels appropriately:\\n- **critical**: Architectural decisions that will cause system failures or major technical debt (circular dependencies, tight coupling causing deadlocks)\\n- **error**: Significant architectural problems (over-engineering, unnecessary special cases, violation of core patterns, missed reuse opportunities)\\n- **warning**: Architectural concerns that should be addressed (minor over-abstraction, could be simplified, inconsistent patterns)\\n- **info**: Architectural suggestions and alternative approaches (simpler patterns available, potential for future reuse)\\n\\n  </instructions>\\n\\n  <context>\\n<pull_request>\\n  <!-- Core pull request metadata including identification, branches, and change statistics -->\\n  <metadata>\\n    <number>1</number>\\n    <title>feat: add user search (update)</title>\\n    <author>test-user</author>\\n    <base_branch>main</base_branch>\\n    <target_branch>feature/test</target_branch>\\n    <total_additions>0</total_additions>\\n    <total_deletions>0</total_deletions>\\n    <files_changed_count>1</files_changed_count>\\n  </metadata>\\n  <raw_diff_header>\\ndiff --git a/src/search.ts b/src/search.ts\\n  </raw_diff_header>\\n  <!-- Full pull request description provided by the author -->\\n  <description>\\nPR body\\n  </description>\\n  <!-- Complete unified diff showing all changes in the pull request (processed with outline-diff) -->\\n  <full_diff>\\nProbe version: 0.6.0\\nReading from stdin...\\nNo file paths found in stdin.\\n\\nToken Usage:\\n  Request tokens: 45.75\\n  Response tokens: 0\\n  Total tokens: 0\\n\\n  </full_diff>\\n  <!-- Summary of all files changed with statistics -->\\n  <files_summary>\\n    <file>\\n      <filename>src/search.ts</filename>\\n      <status>modified</status>\\n      <additions>1</additions>\\n      <deletions>0</deletions>\\n    </file>\\n  </files_summary>\\n</pull_request>\\n  </context>\\n\\n  <rules>\\n    <rule>Only analyze code that appears with + (additions) or - (deletions) in the diff sections</rule>\\n    <rule>Ignore unchanged code unless directly relevant to understanding a change</rule>\\n    <rule>Line numbers in your response should match actual file line numbers from the diff</rule>\\n    <rule>Focus on real issues, not nitpicks or cosmetic concerns</rule>\\n    <rule>Provide actionable, specific feedback with clear remediation steps</rule>\\n    <rule>For INCREMENTAL analysis, ONLY review changes in commit_diff section</rule>\\n    <rule>For FULL analysis, review all changes in full_diff section</rule>\\n    <rule>Reference specific XML elements like files_summary, metadata when providing context</rule>\\n    <rule>STRICT OUTPUT POLICY: Report only actual problems, risks, or deficiencies. Do not write praise, congratulations, or celebratory text. Do not create issues that merely restate improvements or say \\\"no action needed\\\".</rule>\\n    <rule>SEVERITY ASSIGNMENT: Assign severity ONLY to problems introduced or left unresolved by this change (critical/error/warning/info as appropriate). Do NOT create issue entries solely to acknowledge improvements; if no problems exist, return zero issues.</rule>\\n  </rules>\\n</review_request>\",\"rawResponse\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\",\"provider\":\"mock\",\"model\":\"default\",\"apiKeySource\":\"unknown\",\"processingTime\":510,\"promptLength\":5085,\"responseLength\":61,\"errors\":[],\"jsonParseSuccess\":true,\"timestamp\":\"2025-11-16T16:32:36.494Z\",\"schemaName\":\"code-review\"}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"3bc5ef5c-efe9-4029-aecd-b08bba8de6f6"}}]}
{"name":"visor.check","attributes":{"visor.check.id":"security","visor.check.output":"{\"issues\":[],\"debug\":{\"prompt\":\"<review_request>\\n  <analysis_type>FULL</analysis_type>\\n\\n  <analysis_focus>\\n    You are analyzing the COMPLETE PR. Review all changes in the full_diff section.\\n  </analysis_focus>\\n\\n  <instructions>\\nBased on our overview discussion, please perform a comprehensive security analysis of the code changes.\\n\\nAnalyze the files listed in the `<files_summary>` section and focus on the code changes shown in the diff sections.\\n\\n## Security Analysis Areas\\n\\n**Input Validation & Injection:**\\n- SQL injection in database queries\\n- XSS vulnerabilities in user input handling\\n- Command injection in system calls\\n- Path traversal in file operations\\n\\n**Authentication & Authorization:**\\n- Weak authentication mechanisms\\n- Session management flaws\\n- Access control bypasses\\n- Privilege escalation opportunities\\n\\n**Data Protection:**\\n- Sensitive data exposure in logs/errors\\n- Unencrypted data storage\\n- API key or credential leaks\\n- Privacy regulation compliance\\n\\n**Infrastructure Security:**\\n- Insecure configurations\\n- Missing security headers\\n- Vulnerable dependencies\\n- Resource exhaustion vulnerabilities\\n\\nProvide specific findings with clear explanations and actionable remediation steps.\\n\\n## Severity Guidelines\\nUse the following severity levels appropriately:\\n- **critical**: Security vulnerabilities that could lead to immediate compromise (RCE, SQL injection, authentication bypass, exposed secrets)\\n- **error**: Security issues that must be fixed before production (XSS, path traversal, weak crypto, missing auth checks)\\n- **warning**: Security concerns that should be addressed (verbose errors, missing rate limiting, insecure defaults)\\n- **info**: Security best practices and hardening suggestions (defense in depth, additional validation)\\n\\n  </instructions>\\n\\n  <context>\\n<pull_request>\\n  <!-- Core pull request metadata including identification, branches, and change statistics -->\\n  <metadata>\\n    <number>1</number>\\n    <title>feat: add user search (update)</title>\\n    <author>test-user</author>\\n    <base_branch>main</base_branch>\\n    <target_branch>feature/test</target_branch>\\n    <total_additions>0</total_additions>\\n    <total_deletions>0</total_deletions>\\n    <files_changed_count>1</files_changed_count>\\n  </metadata>\\n  <raw_diff_header>\\ndiff --git a/src/search.ts b/src/search.ts\\n  </raw_diff_header>\\n  <!-- Full pull request description provided by the author -->\\n  <description>\\nPR body\\n  </description>\\n  <!-- Complete unified diff showing all changes in the pull request (processed with outline-diff) -->\\n  <full_diff>\\nProbe version: 0.6.0\\nReading from stdin...\\nNo file paths found in stdin.\\n\\nToken Usage:\\n  Request tokens: 45.75\\n  Response tokens: 0\\n  Total tokens: 0\\n\\n  </full_diff>\\n  <!-- Summary of all files changed with statistics -->\\n  <files_summary>\\n    <file>\\n      <filename>src/search.ts</filename>\\n      <status>modified</status>\\n      <additions>1</additions>\\n      <deletions>0</deletions>\\n    </file>\\n  </files_summary>\\n</pull_request>\\n  </context>\\n\\n  <rules>\\n    <rule>Only analyze code that appears with + (additions) or - (deletions) in the diff sections</rule>\\n    <rule>Ignore unchanged code unless directly relevant to understanding a change</rule>\\n    <rule>Line numbers in your response should match actual file line numbers from the diff</rule>\\n    <rule>Focus on real issues, not nitpicks or cosmetic concerns</rule>\\n    <rule>Provide actionable, specific feedback with clear remediation steps</rule>\\n    <rule>For INCREMENTAL analysis, ONLY review changes in commit_diff section</rule>\\n    <rule>For FULL analysis, review all changes in full_diff section</rule>\\n    <rule>Reference specific XML elements like files_summary, metadata when providing context</rule>\\n    <rule>STRICT OUTPUT POLICY: Report only actual problems, risks, or deficiencies. Do not write praise, congratulations, or celebratory text. Do not create issues that merely restate improvements or say \\\"no action needed\\\".</rule>\\n    <rule>SEVERITY ASSIGNMENT: Assign severity ONLY to problems introduced or left unresolved by this change (critical/error/warning/info as appropriate). Do NOT create issue entries solely to acknowledge improvements; if no problems exist, return zero issues.</rule>\\n  </rules>\\n</review_request>\",\"rawResponse\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\",\"provider\":\"mock\",\"model\":\"default\",\"apiKeySource\":\"unknown\",\"processingTime\":508,\"promptLength\":4230,\"responseLength\":61,\"errors\":[],\"jsonParseSuccess\":true,\"timestamp\":\"2025-11-16T16:32:36.498Z\",\"schemaName\":\"code-review\"}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"3bc5ef5c-efe9-4029-aecd-b08bba8de6f6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"3bc5ef5c-efe9-4029-aecd-b08bba8de6f6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":1,"session_id":"3bc5ef5c-efe9-4029-aecd-b08bba8de6f6"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"0a25f35a-4ecf-416b-82eb-c0beadf591d8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"0a25f35a-4ecf-416b-82eb-c0beadf591d8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"0a25f35a-4ecf-416b-82eb-c0beadf591d8"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"overview","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"overview","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[{\"filename\":\"src/search.ts\",\"additions\":3,\"deletions\":0,\"changes\":3,\"status\":\"added\",\"patch\":\"@@\\n+export function search(q: string) {\\n  return []\\n}\\n\"}],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"0a25f35a-4ecf-416b-82eb-c0beadf591d8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"0a25f35a-4ecf-416b-82eb-c0beadf591d8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"0a25f35a-4ecf-416b-82eb-c0beadf591d8"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"security","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"security","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[{\"filename\":\"src/search.ts\",\"additions\":3,\"deletions\":0,\"changes\":3,\"status\":\"added\",\"patch\":\"@@\\n+export function search(q: string) {\\n  return []\\n}\\n\"}],\"outputs\":{\"overview\":{\"text\":\"Overview text\",\"tags\":{\"label\":\"bug\",\"review-effort\":3},\"ts\":1763310757008}}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"fail_if.triggered","attrs":{"check":"security","scope":"check","name":"security_fail_if","expression":"output.issues && output.issues.some(i => i.severity === 'critical' || i.severity === 'error')","severity":"error"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"fail_if.evaluated","attrs":{"check":"security","scope":"check","name":"security_fail_if","expression":"output.issues && output.issues.some(i => i.severity === 'critical' || i.severity === 'error')","severity":"error"}},{"name":"fail_if.triggered","attrs":{"check":"security","scope":"check","name":"security_fail_if","expression":"output.issues && output.issues.some(i => i.severity === 'critical' || i.severity === 'error')","severity":"error"}}]}
{"name":"visor.fail_if","attributes":{"check":"security","scope":"check","name":"security_fail_if"},"events":[{"name":"fail_if.triggered","attrs":{"check":"security","scope":"check","name":"security_fail_if","expression":"output.issues && output.issues.some(i => i.severity === 'critical' || i.severity === 'error')","severity":"error"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"0a25f35a-4ecf-416b-82eb-c0beadf591d8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"0a25f35a-4ecf-416b-82eb-c0beadf591d8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":1,"session_id":"0a25f35a-4ecf-416b-82eb-c0beadf591d8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"d401552f-1067-4919-9289-d25dd95e5ee8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"d401552f-1067-4919-9289-d25dd95e5ee8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"d401552f-1067-4919-9289-d25dd95e5ee8"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"comment-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"comment-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"d401552f-1067-4919-9289-d25dd95e5ee8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"d401552f-1067-4919-9289-d25dd95e5ee8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":1,"session_id":"d401552f-1067-4919-9289-d25dd95e5ee8"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"3e6f3417-8bf4-4074-9c9e-bcb857766ee5"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"3e6f3417-8bf4-4074-9c9e-bcb857766ee5"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"3e6f3417-8bf4-4074-9c9e-bcb857766ee5"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"comment-assistant","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"comment-assistant","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"3e6f3417-8bf4-4074-9c9e-bcb857766ee5"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"3e6f3417-8bf4-4074-9c9e-bcb857766ee5"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"3e6f3417-8bf4-4074-9c9e-bcb857766ee5"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"overview","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"overview","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"comment-assistant\":{\"text\":\"Regenerating.\",\"intent\":\"comment_retrigger\",\"ts\":1763310757014}}}"},"events":[]}
{"name":"visor.check","attributes":{"visor.check.id":"overview","visor.check.output":"{\"content\":\"{\\\"issues\\\":[],\\\"summary\\\":{\\\"totalIssues\\\":0}}\",\"text\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\"}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"3e6f3417-8bf4-4074-9c9e-bcb857766ee5"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"3e6f3417-8bf4-4074-9c9e-bcb857766ee5"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"3e6f3417-8bf4-4074-9c9e-bcb857766ee5"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"security","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"security","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"overview\":{\"content\":\"{\\\"issues\\\":[],\\\"summary\\\":{\\\"totalIssues\\\":0}}\",\"text\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\",\"ts\":1763310757516},\"comment-assistant\":{\"text\":\"Regenerating.\",\"intent\":\"comment_retrigger\",\"ts\":1763310757014}}}"},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"architecture","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"architecture","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"overview\":{\"content\":\"{\\\"issues\\\":[],\\\"summary\\\":{\\\"totalIssues\\\":0}}\",\"text\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\",\"ts\":1763310757516},\"comment-assistant\":{\"text\":\"Regenerating.\",\"intent\":\"comment_retrigger\",\"ts\":1763310757014}}}"},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"performance","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"performance","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"overview\":{\"content\":\"{\\\"issues\\\":[],\\\"summary\\\":{\\\"totalIssues\\\":0}}\",\"text\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\",\"ts\":1763310757516},\"comment-assistant\":{\"text\":\"Regenerating.\",\"intent\":\"comment_retrigger\",\"ts\":1763310757014}}}"},"events":[]}
{"name":"visor.provider","attributes":{"visor.check.id":"quality","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"quality","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Sample issue title\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"overview\":{\"content\":\"{\\\"issues\\\":[],\\\"summary\\\":{\\\"totalIssues\\\":0}}\",\"text\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\",\"ts\":1763310757516},\"comment-assistant\":{\"text\":\"Regenerating.\",\"intent\":\"comment_retrigger\",\"ts\":1763310757014}}}"},"events":[]}
{"name":"visor.check","attributes":{"visor.check.id":"security","visor.check.output":"{\"issues\":[],\"debug\":{\"prompt\":\"<instructions>\\nBased on our overview discussion, please perform a comprehensive security analysis of the code changes.\\n\\nAnalyze the files listed in the `<files_summary>` section and focus on the code changes shown in the diff sections.\\n\\n## Security Analysis Areas\\n\\n**Input Validation & Injection:**\\n- SQL injection in database queries\\n- XSS vulnerabilities in user input handling\\n- Command injection in system calls\\n- Path traversal in file operations\\n\\n**Authentication & Authorization:**\\n- Weak authentication mechanisms\\n- Session management flaws\\n- Access control bypasses\\n- Privilege escalation opportunities\\n\\n**Data Protection:**\\n- Sensitive data exposure in logs/errors\\n- Unencrypted data storage\\n- API key or credential leaks\\n- Privacy regulation compliance\\n\\n**Infrastructure Security:**\\n- Insecure configurations\\n- Missing security headers\\n- Vulnerable dependencies\\n- Resource exhaustion vulnerabilities\\n\\nProvide specific findings with clear explanations and actionable remediation steps.\\n\\n## Severity Guidelines\\nUse the following severity levels appropriately:\\n- **critical**: Security vulnerabilities that could lead to immediate compromise (RCE, SQL injection, authentication bypass, exposed secrets)\\n- **error**: Security issues that must be fixed before production (XSS, path traversal, weak crypto, missing auth checks)\\n- **warning**: Security concerns that should be addressed (verbose errors, missing rate limiting, insecure defaults)\\n- **info**: Security best practices and hardening suggestions (defense in depth, additional validation)\\n\\n</instructions>\",\"rawResponse\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\",\"provider\":\"mock\",\"model\":\"default\",\"apiKeySource\":\"unknown\",\"processingTime\":501,\"promptLength\":1570,\"responseLength\":61,\"errors\":[],\"jsonParseSuccess\":true,\"timestamp\":\"2025-11-16T16:32:37.517Z\",\"schemaName\":\"code-review\"}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"3e6f3417-8bf4-4074-9c9e-bcb857766ee5"}}]}
{"name":"visor.check","attributes":{"visor.check.id":"architecture","visor.check.output":"{\"issues\":[],\"debug\":{\"prompt\":\"<instructions>\\nBuilding on our overview analysis, evaluate the architectural decisions and design patterns.\\n\\nFocus on the files listed in `<files_summary>` and analyze the code changes shown in the `<full_diff>` or `<commit_diff>` sections.\\n\\n## Architecture Analysis Areas\\n**Design Simplicity & Pragmatism:**\\n- Over-engineering: Is the solution more complex than necessary?\\n- YAGNI violations: Are we building features not currently needed?\\n- Can this be implemented more simply using existing patterns?\\n- Are there existing functions/modules that could be reused instead?\\n- Is the abstraction level appropriate for the problem size?\\n\\n**Special Cases & Edge Cases:**\\n- Does the code introduce special case handling that could be generalized?\\n- Are there hard-coded values or logic for specific scenarios?\\n- Can special cases be eliminated through better design?\\n- Are edge cases handled through general patterns rather than one-offs?\\n\\n**Consistency & Reusability:**\\n- Does this follow existing architectural patterns in the codebase?\\n- Are there similar problems already solved differently elsewhere?\\n- Could this functionality be generalized to handle more cases?\\n- Does it duplicate existing functionality that could be extended?\\n\\n**Design Patterns & Structure:**\\n- Are design patterns used appropriately (not forced)?\\n- Is the separation of concerns clear and logical?\\n- Are dependencies and coupling minimized?\\n- Is the code organized in a way that makes sense?\\n\\n**Scalability & Extensibility:**\\n- Will this design scale with future requirements?\\n- Is it easy to extend without major refactoring?\\n- Are boundaries and interfaces well-defined?\\n\\nFlag issues where simpler solutions exist, special cases are introduced unnecessarily, or existing functionality could be reused.\\n\\n## Severity Guidelines\\nUse the following severity levels appropriately:\\n- **critical**: Architectural decisions that will cause system failures or major technical debt (circular dependencies, tight coupling causing deadlocks)\\n- **error**: Significant architectural problems (over-engineering, unnecessary special cases, violation of core patterns, missed reuse opportunities)\\n- **warning**: Architectural concerns that should be addressed (minor over-abstraction, could be simplified, inconsistent patterns)\\n- **info**: Architectural suggestions and alternative approaches (simpler patterns available, potential for future reuse)\\n\\n</instructions>\",\"rawResponse\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\",\"provider\":\"mock\",\"model\":\"default\",\"apiKeySource\":\"unknown\",\"processingTime\":502,\"promptLength\":2425,\"responseLength\":61,\"errors\":[],\"jsonParseSuccess\":true,\"timestamp\":\"2025-11-16T16:32:37.517Z\",\"schemaName\":\"code-review\"}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"3e6f3417-8bf4-4074-9c9e-bcb857766ee5"}}]}
{"name":"visor.check","attributes":{"visor.check.id":"performance","visor.check.output":"{\"issues\":[],\"debug\":{\"prompt\":\"<instructions>\\nBuilding on our overview analysis, now review the code changes for performance issues.\\n\\nFocus on the files listed in `<files_summary>` and analyze the code changes shown in the `<full_diff>` or `<commit_diff>` sections.\\n\\n## Performance Analysis Areas\\n**Algorithm & Data Structure Efficiency:**\\n- Time complexity analysis (O(n), O(n²), etc.)\\n- Space complexity and memory usage\\n- Inefficient loops and nested operations\\n- Suboptimal data structure choices\\n\\n**Database Performance:**\\n- N+1 query problems\\n- Missing database indexes\\n- Inefficient JOIN operations\\n- Large result set retrievals\\n\\n**Resource Management:**\\n- Memory leaks and excessive allocations\\n- File handle management\\n- Connection pooling issues\\n- Resource cleanup patterns\\n\\n**Async & Concurrency:**\\n- Blocking operations in async contexts\\n- Race conditions and deadlocks\\n- Inefficient parallel processing\\n\\nBuilding on our overview analysis, identify performance issues and provide optimization recommendations.\\n\\n## Severity Guidelines\\nUse the following severity levels appropriately:\\n- **critical**: Performance issues causing system failure or severe degradation (infinite loops, memory leaks causing OOM)\\n- **error**: Significant performance problems affecting user experience (O(n²) in critical path, N+1 queries, blocking I/O)\\n- **warning**: Performance concerns that should be optimized (inefficient algorithms, missing indexes, unnecessary operations)\\n- **info**: Performance best practices and optimization opportunities (caching suggestions, async improvements)\\n\\n</instructions>\",\"rawResponse\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\",\"provider\":\"mock\",\"model\":\"default\",\"apiKeySource\":\"unknown\",\"processingTime\":502,\"promptLength\":1566,\"responseLength\":61,\"errors\":[],\"jsonParseSuccess\":true,\"timestamp\":\"2025-11-16T16:32:37.517Z\",\"schemaName\":\"code-review\"}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"3e6f3417-8bf4-4074-9c9e-bcb857766ee5"}}]}
{"name":"visor.check","attributes":{"visor.check.id":"quality","visor.check.output":"{\"issues\":[],\"debug\":{\"prompt\":\"<instructions>\\nBuilding on our overview discussion, evaluate the code quality and maintainability.\\n\\nReview the code changes shown in the `<full_diff>` or `<commit_diff>` sections, considering the files listed in `<files_summary>`.\\n\\n## Quality Assessment Areas\\n**Code Structure & Design:**\\n- SOLID principles adherence\\n- Design pattern appropriateness\\n- Separation of concerns\\n- Code organization and clarity\\n\\n**Error Handling & Reliability:**\\n- Exception handling completeness\\n- Error propagation patterns\\n- Input validation thoroughness\\n- Edge case coverage\\n\\n**Testing & Test Coverage:**\\n- Missing tests for critical functionality\\n- Test coverage gaps\\n- Test quality and effectiveness\\n- Edge cases and error scenarios coverage\\n\\n**Test Quality - Critical Checks:**\\n- **Magic Numbers in Tests**: Are tests using hard-coded values just to make assertions pass?\\n  - Look for arbitrary numbers without clear meaning (e.g., `expect(result).toBe(42)` where 42 has no semantic meaning)\\n  - Tests should use meaningful constants or derive expected values from the input\\n  - Tests that \\\"cut corners\\\" by adjusting expected values to match output are fragile\\n  - Flag tests where the expected value seems arbitrary or reverse-engineered from implementation\\n- **Test Integrity**: Do tests actually validate correct behavior or just check current behavior?\\n  - Are tests meaningful and would catch real bugs?\\n  - Do tests explain why a value should be expected (through variable names, comments, or clear logic)?\\n  - Are test assertions based on requirements rather than implementation details?\\n- **Negative Testing Coverage**: Are failure cases and error conditions properly tested?\\n  - Are there tests for invalid inputs, boundary conditions, and error states?\\n  - Do tests verify error messages and error handling paths?\\n  - Are edge cases like null, empty, undefined, zero, negative values tested?\\n  - Do tests cover \\\"unhappy path\\\" scenarios (authentication failures, network errors, invalid data)?\\n  - Are exception handling and error recovery mechanisms validated?\\n  - Flag missing negative tests for critical functionality\\n\\n**Maintainability:**\\n- Code testability issues\\n- Dependencies and coupling problems\\n- Technical debt introduction\\n- Code duplication (DRY violations)\\n\\n**Language-Specific Best Practices:**\\n- Idiomatic code usage\\n- Framework/library best practices\\n- Type safety (if applicable)\\n\\nFocus on actionable improvements that enhance code maintainability based on the overview analysis.\\nPay special attention to test quality - tests that use magic numbers or cut corners undermine reliability.\\n\\n## Severity Guidelines\\nUse the following severity levels appropriately:\\n- **critical**: Code quality issues that will cause bugs or failures (logic errors, race conditions, null pointer issues)\\n- **error**: Quality problems that significantly impact maintainability (no error handling, high complexity, severe coupling, tests with magic numbers)\\n- **warning**: Quality concerns that should be addressed (missing tests, code duplication, poor naming, unclear test expectations)\\n- **info**: Best practices and improvement suggestions (refactoring opportunities, documentation improvements, test clarity)\\n\\n</instructions>\",\"rawResponse\":\"{\\\"content\\\":\\\"{\\\\\\\"issues\\\\\\\":[],\\\\\\\"summary\\\\\\\":{\\\\\\\"totalIssues\\\\\\\":0}}\\\"}\",\"provider\":\"mock\",\"model\":\"default\",\"apiKeySource\":\"unknown\",\"processingTime\":503,\"promptLength\":3221,\"responseLength\":61,\"errors\":[],\"jsonParseSuccess\":true,\"timestamp\":\"2025-11-16T16:32:37.517Z\",\"schemaName\":\"code-review\"}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"3e6f3417-8bf4-4074-9c9e-bcb857766ee5"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"3e6f3417-8bf4-4074-9c9e-bcb857766ee5"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":2,"session_id":"3e6f3417-8bf4-4074-9c9e-bcb857766ee5"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"48328069-3b7c-4732-863c-85ab011c6235"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"48328069-3b7c-4732-863c-85ab011c6235"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"48328069-3b7c-4732-863c-85ab011c6235"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"overview","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"overview","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"feat: add user search\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[{\"filename\":\"src/search.ts\",\"additions\":3,\"deletions\":0,\"changes\":3,\"status\":\"added\",\"patch\":\"@@\\n+export function search(q: string) {\\n  return []\\n}\\n\"}],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"48328069-3b7c-4732-863c-85ab011c6235"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"48328069-3b7c-4732-863c-85ab011c6235"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"48328069-3b7c-4732-863c-85ab011c6235"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"apply-overview-labels","visor.provider.type":"github"}}
{"name":"visor.event","attributes":{},"events":[{"name":"fail_if.triggered","attrs":{"check":"apply-overview-labels","scope":"check","name":"apply-overview-labels_fail_if","expression":"output.issues && output.issues.some(i => i.severity === 'critical' || i.severity === 'error')","severity":"error"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"fail_if.evaluated","attrs":{"check":"apply-overview-labels","scope":"check","name":"apply-overview-labels_fail_if","expression":"output.issues && output.issues.some(i => i.severity === 'critical' || i.severity === 'error')","severity":"error"}},{"name":"fail_if.triggered","attrs":{"check":"apply-overview-labels","scope":"check","name":"apply-overview-labels_fail_if","expression":"output.issues && output.issues.some(i => i.severity === 'critical' || i.severity === 'error')","severity":"error"}}]}
{"name":"visor.fail_if","attributes":{"check":"apply-overview-labels","scope":"check","name":"apply-overview-labels_fail_if"},"events":[{"name":"fail_if.triggered","attrs":{"check":"apply-overview-labels","scope":"check","name":"apply-overview-labels_fail_if","expression":"output.issues && output.issues.some(i => i.severity === 'critical' || i.severity === 'error')","severity":"error"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"48328069-3b7c-4732-863c-85ab011c6235"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"48328069-3b7c-4732-863c-85ab011c6235"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":1,"session_id":"48328069-3b7c-4732-863c-85ab011c6235"}}]}
