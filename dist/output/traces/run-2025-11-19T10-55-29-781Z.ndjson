{"name":"visor.run","attributes":{"started":true}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"start","visor.provider.type":"log"}}
{"name":"visor.provider","attributes":{"visor.check.id":"detect-mode","visor.provider.type":"command"}}
{"name":"visor.check","attributes":{"visor.check.id":"detect-mode","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"fileCount\":0,\"outputs\":{\"history\":{}},\"outputs_history\":{},\"outputs_history_stage\":{},\"outputs_raw\":{},\"inputs\":{},\"env\":{\"SHELL\":\"/usr/bin/bash\",\"COLORTERM\":\"truecolor\",\"ZELLIJ_SESSION_NAME\":\"friendly-horse\",\"EDITOR\":\"nvim\",\"PWD\":\"/home/buger/projects/visor2\",\"LOGNAME\":\"buger\",\"ZELLIJ_PANE_ID\":\"41\",\"XDG_SESSION_TYPE\":\"tty\",\"MOTD_SHOWN\":\"pam\",\"HOME\":\"/home/buger\",\"LANG\":\"en_US.UTF-8\",\"STARSHIP_SHELL\":\"bash\",\"WAYLAND_DISPLAY\":\"wayland-1\",\"__MISE_DIFF\":\"eAFrXpyfk9KwOC+1vGFJQWJJxgQASssINA\",\"SSH_CONNECTION\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 fe80::7a55:36ff:fe01:cdfe%enp1s0 22\",\"BAT_THEME\":\"ansi\",\"STARSHIP_SESSION_KEY\":\"5614152961699532\",\"__MISE_ORIG_PATH\":\"./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"XDG_SESSION_CLASS\":\"user\",\"TERM\":\"xterm-256color\",\"USER\":\"buger\",\"SUDO_EDITOR\":\"nvim\",\"__MISE_SESSION\":\"eAFrX5OTn5iSmhJfkp+fUzxhHZSXnJ+XlplePPGmin5Gfm6qflJpemqRvh5EWD83szhVH8LWK8nPzVkDYccXJJZkFE9YnJpX1rA4JbNoN7LegqL8rNTkkmL9sszi/CKjNal5ZfFliUXxGYnFGRuSjC0NU9NMDZLMDZMNTS3M1uYklqQWl8SXFqQklqQeEWCAA8aZJj5KcwGShkTR\",\"DISPLAY\":\":0\",\"SHLVL\":\"2\",\"XDG_SESSION_ID\":\"4\",\"KUBECONFIG\":\"/home/buger/.kube/config\",\"XDG_RUNTIME_DIR\":\"/run/user/1000\",\"SSH_CLIENT\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 22\",\"GOOGLE_API_KEY\":\"AIzaSyBRip8ekApm09lSy0zMN84DuR17VxIyxPk\",\"DEBUGINFOD_URLS\":\"https://debuginfod.archlinux.org \",\"MISE_SHELL\":\"bash\",\"PATH\":\"/home/buger/.local/bin:./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"ZELLIJ\":\"0\",\"DBUS_SESSION_BUS_ADDRESS\":\"unix:path=/run/user/1000/bus\",\"MAIL\":\"/var/spool/mail/buger\",\"SSH_TTY\":\"/dev/pts/0\",\"_\":\"./dist/index.js\",\"VISOR_VERSION\":\"0.1.42\",\"PROBE_VERSION\":\"0.6.0-rc164\",\"VISOR_COMMIT_SHA\":\"c00d0c684081c98a6b0088886089b18e6ef03c24\",\"VISOR_COMMIT_SHORT\":\"c00d0c68\",\"VISOR_FALLBACK_TRACE_FILE\":\"/home/buger/projects/visor2/output/traces/run-2025-11-19T10-55-29-781Z.ndjson\",\"VISOR_OUTPUT_FORMAT\":\"table\",\"VISOR_DEBUG\":\"false\",\"GITHUB_REPOSITORY\":\"owner/repo\",\"VISOR_AGENT_OUT_DIR\":\"output\",\"VISOR_AGENT_CLEANUP_FORCE\":\"true\",\"VISOR_STRICT_ERRORS\":\"true\"}}"},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.provider","attributes":{"visor.check.id":"draft","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"draft","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.check","attributes":{"visor.check.id":"detect-mode","visor.check.output":"\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\""},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"write","visor.provider.type":"command"}}
{"name":"visor.check","attributes":{"visor.check.id":"write","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"fileCount\":0,\"outputs\":{\"start\":{\"issues\":[],\"logOutput\":\"üêõ **DEBUG**: start\\n\\n### PR Context\\n- **PR #1**: Bug: crashes on search edge case\\n- **Author**: test-user\\n- **Base**: main ‚Üí **Head**: feature/test\\n- **Changes**: +0 -0\\n- **Files Modified**: 0\\n\\n### Dependency Results\\n- No dependency results available\\n\\n### Execution Metadata\\n- **Timestamp**: 2025-11-19T10:55:29.949Z\\n- **Node Version**: v24.7.0\\n- **Platform**: linux\\n- **Working Directory**: /home/buger/projects/visor2\"},\"detect-mode\":\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\",\"draft\":{\"slug\":\"helloagent\",\"files\":[{\"path\":\"helloagent.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"helloagent.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"helloagent.yaml\\\"\\ntests:\\n  defaults: { strict: true, ai_provider: mock }\\n  cases:\\n    - name: ok\\n      event: issue_opened\\n      fixture: gh.issue_open.minimal\\n      expect:\\n        calls:\\n          - step: hello\\n            exactly: 1\\n\"}],\"ts\":1763549729991},\"write\":{\"issues\":[]},\"history\":{\"write\":[],\"start\":[],\"detect-mode\":[\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\"],\"draft\":[{\"slug\":\"helloagent\",\"files\":[{\"path\":\"helloagent.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"helloagent.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"helloagent.yaml\\\"\\ntests:\\n  defaults: { strict: true, ai_provider: mock }\\n  cases:\\n    - name: ok\\n      event: issue_opened\\n      fixture: gh.issue_open.minimal\\n      expect:\\n        calls:\\n          - step: hello\\n            exactly: 1\\n\"}],\"ts\":1763549729991}]}},\"outputs_history\":{\"write\":[],\"start\":[],\"detect-mode\":[\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\"],\"draft\":[{\"slug\":\"helloagent\",\"files\":[{\"path\":\"helloagent.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"helloagent.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"helloagent.yaml\\\"\\ntests:\\n  defaults: { strict: true, ai_provider: mock }\\n  cases:\\n    - name: ok\\n      event: issue_opened\\n      fixture: gh.issue_open.minimal\\n      expect:\\n        calls:\\n          - step: hello\\n            exactly: 1\\n\"}],\"ts\":1763549729991}]},\"outputs_history_stage\":{},\"outputs_raw\":{},\"inputs\":{},\"env\":{\"SHELL\":\"/usr/bin/bash\",\"COLORTERM\":\"truecolor\",\"ZELLIJ_SESSION_NAME\":\"friendly-horse\",\"EDITOR\":\"nvim\",\"PWD\":\"/home/buger/projects/visor2\",\"LOGNAME\":\"buger\",\"ZELLIJ_PANE_ID\":\"41\",\"XDG_SESSION_TYPE\":\"tty\",\"MOTD_SHOWN\":\"pam\",\"HOME\":\"/home/buger\",\"LANG\":\"en_US.UTF-8\",\"STARSHIP_SHELL\":\"bash\",\"WAYLAND_DISPLAY\":\"wayland-1\",\"__MISE_DIFF\":\"eAFrXpyfk9KwOC+1vGFJQWJJxgQASssINA\",\"SSH_CONNECTION\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 fe80::7a55:36ff:fe01:cdfe%enp1s0 22\",\"BAT_THEME\":\"ansi\",\"STARSHIP_SESSION_KEY\":\"5614152961699532\",\"__MISE_ORIG_PATH\":\"./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"XDG_SESSION_CLASS\":\"user\",\"TERM\":\"xterm-256color\",\"USER\":\"buger\",\"SUDO_EDITOR\":\"nvim\",\"__MISE_SESSION\":\"eAFrX5OTn5iSmhJfkp+fUzxhHZSXnJ+XlplePPGmin5Gfm6qflJpemqRvh5EWD83szhVH8LWK8nPzVkDYccXJJZkFE9YnJpX1rA4JbNoN7LegqL8rNTkkmL9sszi/CKjNal5ZfFliUXxGYnFGRuSjC0NU9NMDZLMDZMNTS3M1uYklqQWl8SXFqQklqQeEWCAA8aZJj5KcwGShkTR\",\"DISPLAY\":\":0\",\"SHLVL\":\"2\",\"XDG_SESSION_ID\":\"4\",\"KUBECONFIG\":\"/home/buger/.kube/config\",\"XDG_RUNTIME_DIR\":\"/run/user/1000\",\"SSH_CLIENT\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 22\",\"GOOGLE_API_KEY\":\"AIzaSyBRip8ekApm09lSy0zMN84DuR17VxIyxPk\",\"DEBUGINFOD_URLS\":\"https://debuginfod.archlinux.org \",\"MISE_SHELL\":\"bash\",\"PATH\":\"/home/buger/.local/bin:./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"ZELLIJ\":\"0\",\"DBUS_SESSION_BUS_ADDRESS\":\"unix:path=/run/user/1000/bus\",\"MAIL\":\"/var/spool/mail/buger\",\"SSH_TTY\":\"/dev/pts/0\",\"_\":\"./dist/index.js\",\"VISOR_VERSION\":\"0.1.42\",\"PROBE_VERSION\":\"0.6.0-rc164\",\"VISOR_COMMIT_SHA\":\"c00d0c684081c98a6b0088886089b18e6ef03c24\",\"VISOR_COMMIT_SHORT\":\"c00d0c68\",\"VISOR_FALLBACK_TRACE_FILE\":\"/home/buger/projects/visor2/output/traces/run-2025-11-19T10-55-29-781Z.ndjson\",\"VISOR_OUTPUT_FORMAT\":\"table\",\"VISOR_DEBUG\":\"false\",\"GITHUB_REPOSITORY\":\"owner/repo\",\"VISOR_AGENT_OUT_DIR\":\"output\",\"VISOR_AGENT_CLEANUP_FORCE\":\"true\",\"VISOR_STRICT_ERRORS\":\"true\",\"VISOR_PROMPT_TYPE\":\"engineer\"}}"},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.check","attributes":{"visor.check.id":"write","visor.check.output":"{\"written\":[\"/home/buger/projects/visor2/output/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"mode\":\"new\"}"},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"config-lint","visor.provider.type":"command"}}
{"name":"visor.check","attributes":{"visor.check.id":"config-lint","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"fileCount\":0,\"outputs\":{\"write\":{\"written\":[\"/home/buger/projects/visor2/output/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730088},\"start\":{\"issues\":[],\"logOutput\":\"üêõ **DEBUG**: start\\n\\n### PR Context\\n- **PR #1**: Bug: crashes on search edge case\\n- **Author**: test-user\\n- **Base**: main ‚Üí **Head**: feature/test\\n- **Changes**: +0 -0\\n- **Files Modified**: 0\\n\\n### Dependency Results\\n- No dependency results available\\n\\n### Execution Metadata\\n- **Timestamp**: 2025-11-19T10:55:29.949Z\\n- **Node Version**: v24.7.0\\n- **Platform**: linux\\n- **Working Directory**: /home/buger/projects/visor2\"},\"detect-mode\":\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\",\"draft\":{\"slug\":\"helloagent\",\"files\":[{\"path\":\"helloagent.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"helloagent.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"helloagent.yaml\\\"\\ntests:\\n  defaults: { strict: true, ai_provider: mock }\\n  cases:\\n    - name: ok\\n      event: issue_opened\\n      fixture: gh.issue_open.minimal\\n      expect:\\n        calls:\\n          - step: hello\\n            exactly: 1\\n\"}],\"ts\":1763549729991},\"history\":{\"write\":[{\"written\":[\"/home/buger/projects/visor2/output/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730088}],\"start\":[],\"detect-mode\":[\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\"],\"draft\":[{\"slug\":\"helloagent\",\"files\":[{\"path\":\"helloagent.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"helloagent.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"helloagent.yaml\\\"\\ntests:\\n  defaults: { strict: true, ai_provider: mock }\\n  cases:\\n    - name: ok\\n      event: issue_opened\\n      fixture: gh.issue_open.minimal\\n      expect:\\n        calls:\\n          - step: hello\\n            exactly: 1\\n\"}],\"ts\":1763549729991}]}},\"outputs_history\":{\"write\":[{\"written\":[\"/home/buger/projects/visor2/output/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730088}],\"start\":[],\"detect-mode\":[\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\"],\"draft\":[{\"slug\":\"helloagent\",\"files\":[{\"path\":\"helloagent.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"helloagent.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"helloagent.yaml\\\"\\ntests:\\n  defaults: { strict: true, ai_provider: mock }\\n  cases:\\n    - name: ok\\n      event: issue_opened\\n      fixture: gh.issue_open.minimal\\n      expect:\\n        calls:\\n          - step: hello\\n            exactly: 1\\n\"}],\"ts\":1763549729991}]},\"outputs_history_stage\":{},\"outputs_raw\":{},\"inputs\":{},\"env\":{\"SHELL\":\"/usr/bin/bash\",\"COLORTERM\":\"truecolor\",\"ZELLIJ_SESSION_NAME\":\"friendly-horse\",\"EDITOR\":\"nvim\",\"PWD\":\"/home/buger/projects/visor2\",\"LOGNAME\":\"buger\",\"ZELLIJ_PANE_ID\":\"41\",\"XDG_SESSION_TYPE\":\"tty\",\"MOTD_SHOWN\":\"pam\",\"HOME\":\"/home/buger\",\"LANG\":\"en_US.UTF-8\",\"STARSHIP_SHELL\":\"bash\",\"WAYLAND_DISPLAY\":\"wayland-1\",\"__MISE_DIFF\":\"eAFrXpyfk9KwOC+1vGFJQWJJxgQASssINA\",\"SSH_CONNECTION\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 fe80::7a55:36ff:fe01:cdfe%enp1s0 22\",\"BAT_THEME\":\"ansi\",\"STARSHIP_SESSION_KEY\":\"5614152961699532\",\"__MISE_ORIG_PATH\":\"./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"XDG_SESSION_CLASS\":\"user\",\"TERM\":\"xterm-256color\",\"USER\":\"buger\",\"SUDO_EDITOR\":\"nvim\",\"__MISE_SESSION\":\"eAFrX5OTn5iSmhJfkp+fUzxhHZSXnJ+XlplePPGmin5Gfm6qflJpemqRvh5EWD83szhVH8LWK8nPzVkDYccXJJZkFE9YnJpX1rA4JbNoN7LegqL8rNTkkmL9sszi/CKjNal5ZfFliUXxGYnFGRuSjC0NU9NMDZLMDZMNTS3M1uYklqQWl8SXFqQklqQeEWCAA8aZJj5KcwGShkTR\",\"DISPLAY\":\":0\",\"SHLVL\":\"2\",\"XDG_SESSION_ID\":\"4\",\"KUBECONFIG\":\"/home/buger/.kube/config\",\"XDG_RUNTIME_DIR\":\"/run/user/1000\",\"SSH_CLIENT\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 22\",\"GOOGLE_API_KEY\":\"AIzaSyBRip8ekApm09lSy0zMN84DuR17VxIyxPk\",\"DEBUGINFOD_URLS\":\"https://debuginfod.archlinux.org \",\"MISE_SHELL\":\"bash\",\"PATH\":\"/home/buger/.local/bin:./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"ZELLIJ\":\"0\",\"DBUS_SESSION_BUS_ADDRESS\":\"unix:path=/run/user/1000/bus\",\"MAIL\":\"/var/spool/mail/buger\",\"SSH_TTY\":\"/dev/pts/0\",\"_\":\"./dist/index.js\",\"VISOR_VERSION\":\"0.1.42\",\"PROBE_VERSION\":\"0.6.0-rc164\",\"VISOR_COMMIT_SHA\":\"c00d0c684081c98a6b0088886089b18e6ef03c24\",\"VISOR_COMMIT_SHORT\":\"c00d0c68\",\"VISOR_FALLBACK_TRACE_FILE\":\"/home/buger/projects/visor2/output/traces/run-2025-11-19T10-55-29-781Z.ndjson\",\"VISOR_OUTPUT_FORMAT\":\"table\",\"VISOR_DEBUG\":\"false\",\"GITHUB_REPOSITORY\":\"owner/repo\",\"VISOR_AGENT_OUT_DIR\":\"output\",\"VISOR_AGENT_CLEANUP_FORCE\":\"true\",\"VISOR_STRICT_ERRORS\":\"true\",\"VISOR_PROMPT_TYPE\":\"engineer\"}}"},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.provider","attributes":{"visor.check.id":"tests-validate","visor.provider.type":"command"}}
{"name":"visor.check","attributes":{"visor.check.id":"tests-validate","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"fileCount\":0,\"outputs\":{\"write\":{\"written\":[\"/home/buger/projects/visor2/output/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730088},\"start\":{\"issues\":[],\"logOutput\":\"üêõ **DEBUG**: start\\n\\n### PR Context\\n- **PR #1**: Bug: crashes on search edge case\\n- **Author**: test-user\\n- **Base**: main ‚Üí **Head**: feature/test\\n- **Changes**: +0 -0\\n- **Files Modified**: 0\\n\\n### Dependency Results\\n- No dependency results available\\n\\n### Execution Metadata\\n- **Timestamp**: 2025-11-19T10:55:29.949Z\\n- **Node Version**: v24.7.0\\n- **Platform**: linux\\n- **Working Directory**: /home/buger/projects/visor2\"},\"detect-mode\":\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\",\"draft\":{\"slug\":\"helloagent\",\"files\":[{\"path\":\"helloagent.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"helloagent.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"helloagent.yaml\\\"\\ntests:\\n  defaults: { strict: true, ai_provider: mock }\\n  cases:\\n    - name: ok\\n      event: issue_opened\\n      fixture: gh.issue_open.minimal\\n      expect:\\n        calls:\\n          - step: hello\\n            exactly: 1\\n\"}],\"ts\":1763549729991},\"history\":{\"write\":[{\"written\":[\"/home/buger/projects/visor2/output/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730088}],\"start\":[],\"detect-mode\":[\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\"],\"draft\":[{\"slug\":\"helloagent\",\"files\":[{\"path\":\"helloagent.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"helloagent.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"helloagent.yaml\\\"\\ntests:\\n  defaults: { strict: true, ai_provider: mock }\\n  cases:\\n    - name: ok\\n      event: issue_opened\\n      fixture: gh.issue_open.minimal\\n      expect:\\n        calls:\\n          - step: hello\\n            exactly: 1\\n\"}],\"ts\":1763549729991}]}},\"outputs_history\":{\"write\":[{\"written\":[\"/home/buger/projects/visor2/output/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730088}],\"start\":[],\"detect-mode\":[\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\"],\"draft\":[{\"slug\":\"helloagent\",\"files\":[{\"path\":\"helloagent.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"helloagent.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"helloagent.yaml\\\"\\ntests:\\n  defaults: { strict: true, ai_provider: mock }\\n  cases:\\n    - name: ok\\n      event: issue_opened\\n      fixture: gh.issue_open.minimal\\n      expect:\\n        calls:\\n          - step: hello\\n            exactly: 1\\n\"}],\"ts\":1763549729991}]},\"outputs_history_stage\":{},\"outputs_raw\":{},\"inputs\":{},\"env\":{\"SHELL\":\"/usr/bin/bash\",\"COLORTERM\":\"truecolor\",\"ZELLIJ_SESSION_NAME\":\"friendly-horse\",\"EDITOR\":\"nvim\",\"PWD\":\"/home/buger/projects/visor2\",\"LOGNAME\":\"buger\",\"ZELLIJ_PANE_ID\":\"41\",\"XDG_SESSION_TYPE\":\"tty\",\"MOTD_SHOWN\":\"pam\",\"HOME\":\"/home/buger\",\"LANG\":\"en_US.UTF-8\",\"STARSHIP_SHELL\":\"bash\",\"WAYLAND_DISPLAY\":\"wayland-1\",\"__MISE_DIFF\":\"eAFrXpyfk9KwOC+1vGFJQWJJxgQASssINA\",\"SSH_CONNECTION\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 fe80::7a55:36ff:fe01:cdfe%enp1s0 22\",\"BAT_THEME\":\"ansi\",\"STARSHIP_SESSION_KEY\":\"5614152961699532\",\"__MISE_ORIG_PATH\":\"./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"XDG_SESSION_CLASS\":\"user\",\"TERM\":\"xterm-256color\",\"USER\":\"buger\",\"SUDO_EDITOR\":\"nvim\",\"__MISE_SESSION\":\"eAFrX5OTn5iSmhJfkp+fUzxhHZSXnJ+XlplePPGmin5Gfm6qflJpemqRvh5EWD83szhVH8LWK8nPzVkDYccXJJZkFE9YnJpX1rA4JbNoN7LegqL8rNTkkmL9sszi/CKjNal5ZfFliUXxGYnFGRuSjC0NU9NMDZLMDZMNTS3M1uYklqQWl8SXFqQklqQeEWCAA8aZJj5KcwGShkTR\",\"DISPLAY\":\":0\",\"SHLVL\":\"2\",\"XDG_SESSION_ID\":\"4\",\"KUBECONFIG\":\"/home/buger/.kube/config\",\"XDG_RUNTIME_DIR\":\"/run/user/1000\",\"SSH_CLIENT\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 22\",\"GOOGLE_API_KEY\":\"AIzaSyBRip8ekApm09lSy0zMN84DuR17VxIyxPk\",\"DEBUGINFOD_URLS\":\"https://debuginfod.archlinux.org \",\"MISE_SHELL\":\"bash\",\"PATH\":\"/home/buger/.local/bin:./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"ZELLIJ\":\"0\",\"DBUS_SESSION_BUS_ADDRESS\":\"unix:path=/run/user/1000/bus\",\"MAIL\":\"/var/spool/mail/buger\",\"SSH_TTY\":\"/dev/pts/0\",\"_\":\"./dist/index.js\",\"VISOR_VERSION\":\"0.1.42\",\"PROBE_VERSION\":\"0.6.0-rc164\",\"VISOR_COMMIT_SHA\":\"c00d0c684081c98a6b0088886089b18e6ef03c24\",\"VISOR_COMMIT_SHORT\":\"c00d0c68\",\"VISOR_FALLBACK_TRACE_FILE\":\"/home/buger/projects/visor2/output/traces/run-2025-11-19T10-55-29-781Z.ndjson\",\"VISOR_OUTPUT_FORMAT\":\"table\",\"VISOR_DEBUG\":\"false\",\"GITHUB_REPOSITORY\":\"owner/repo\",\"VISOR_AGENT_OUT_DIR\":\"output\",\"VISOR_AGENT_CLEANUP_FORCE\":\"true\",\"VISOR_STRICT_ERRORS\":\"true\",\"VISOR_PROMPT_TYPE\":\"engineer\"}}"},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.check","attributes":{"visor.check.id":"tests-validate","visor.check.output":"\"valid\""},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.run","attributes":{"started":true}}
{"name":"visor.check","attributes":{"visor.check.id":"config-lint","visor.check.output":"\"üîç Visor Configuration Validator\\n\\nüìÇ Validating configuration: /home/buger/projects/visor2/output/agent.yaml\\n\\n‚úÖ Configuration is valid!\\n\\nüìã Summary:\\n   Version: 1.0\\n   Checks: 1\\n\\nüìù Configured checks:\\n   ‚Ä¢ hello (type: log)\""},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"verify-tests","visor.provider.type":"command"}}
{"name":"visor.check","attributes":{"visor.check.id":"verify-tests","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"fileCount\":0,\"outputs\":{\"write\":{\"written\":[\"/home/buger/projects/visor2/output/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730088},\"config-lint\":\"üîç Visor Configuration Validator\\n\\nüìÇ Validating configuration: /home/buger/projects/visor2/output/agent.yaml\\n\\n‚úÖ Configuration is valid!\\n\\nüìã Summary:\\n   Version: 1.0\\n   Checks: 1\\n\\nüìù Configured checks:\\n   ‚Ä¢ hello (type: log)\",\"tests-validate\":\"valid\",\"start\":{\"issues\":[],\"logOutput\":\"üêõ **DEBUG**: start\\n\\n### PR Context\\n- **PR #1**: Bug: crashes on search edge case\\n- **Author**: test-user\\n- **Base**: main ‚Üí **Head**: feature/test\\n- **Changes**: +0 -0\\n- **Files Modified**: 0\\n\\n### Dependency Results\\n- No dependency results available\\n\\n### Execution Metadata\\n- **Timestamp**: 2025-11-19T10:55:29.949Z\\n- **Node Version**: v24.7.0\\n- **Platform**: linux\\n- **Working Directory**: /home/buger/projects/visor2\"},\"detect-mode\":\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\",\"draft\":{\"slug\":\"helloagent\",\"files\":[{\"path\":\"helloagent.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"helloagent.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"helloagent.yaml\\\"\\ntests:\\n  defaults: { strict: true, ai_provider: mock }\\n  cases:\\n    - name: ok\\n      event: issue_opened\\n      fixture: gh.issue_open.minimal\\n      expect:\\n        calls:\\n          - step: hello\\n            exactly: 1\\n\"}],\"ts\":1763549729991},\"history\":{\"write\":[{\"written\":[\"/home/buger/projects/visor2/output/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730088}],\"start\":[],\"detect-mode\":[\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\"],\"draft\":[{\"slug\":\"helloagent\",\"files\":[{\"path\":\"helloagent.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"helloagent.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"helloagent.yaml\\\"\\ntests:\\n  defaults: { strict: true, ai_provider: mock }\\n  cases:\\n    - name: ok\\n      event: issue_opened\\n      fixture: gh.issue_open.minimal\\n      expect:\\n        calls:\\n          - step: hello\\n            exactly: 1\\n\"}],\"ts\":1763549729991}],\"tests-validate\":[\"valid\"],\"config-lint\":[\"üîç Visor Configuration Validator\\n\\nüìÇ Validating configuration: /home/buger/projects/visor2/output/agent.yaml\\n\\n‚úÖ Configuration is valid!\\n\\nüìã Summary:\\n   Version: 1.0\\n   Checks: 1\\n\\nüìù Configured checks:\\n   ‚Ä¢ hello (type: log)\"]}},\"outputs_history\":{\"write\":[{\"written\":[\"/home/buger/projects/visor2/output/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730088}],\"start\":[],\"detect-mode\":[\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\"],\"draft\":[{\"slug\":\"helloagent\",\"files\":[{\"path\":\"helloagent.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"helloagent.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"helloagent.yaml\\\"\\ntests:\\n  defaults: { strict: true, ai_provider: mock }\\n  cases:\\n    - name: ok\\n      event: issue_opened\\n      fixture: gh.issue_open.minimal\\n      expect:\\n        calls:\\n          - step: hello\\n            exactly: 1\\n\"}],\"ts\":1763549729991}],\"tests-validate\":[\"valid\"],\"config-lint\":[\"üîç Visor Configuration Validator\\n\\nüìÇ Validating configuration: /home/buger/projects/visor2/output/agent.yaml\\n\\n‚úÖ Configuration is valid!\\n\\nüìã Summary:\\n   Version: 1.0\\n   Checks: 1\\n\\nüìù Configured checks:\\n   ‚Ä¢ hello (type: log)\"]},\"outputs_history_stage\":{},\"outputs_raw\":{},\"inputs\":{},\"env\":{\"SHELL\":\"/usr/bin/bash\",\"COLORTERM\":\"truecolor\",\"ZELLIJ_SESSION_NAME\":\"friendly-horse\",\"EDITOR\":\"nvim\",\"PWD\":\"/home/buger/projects/visor2\",\"LOGNAME\":\"buger\",\"ZELLIJ_PANE_ID\":\"41\",\"XDG_SESSION_TYPE\":\"tty\",\"MOTD_SHOWN\":\"pam\",\"HOME\":\"/home/buger\",\"LANG\":\"en_US.UTF-8\",\"STARSHIP_SHELL\":\"bash\",\"WAYLAND_DISPLAY\":\"wayland-1\",\"__MISE_DIFF\":\"eAFrXpyfk9KwOC+1vGFJQWJJxgQASssINA\",\"SSH_CONNECTION\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 fe80::7a55:36ff:fe01:cdfe%enp1s0 22\",\"BAT_THEME\":\"ansi\",\"STARSHIP_SESSION_KEY\":\"5614152961699532\",\"__MISE_ORIG_PATH\":\"./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"XDG_SESSION_CLASS\":\"user\",\"TERM\":\"xterm-256color\",\"USER\":\"buger\",\"SUDO_EDITOR\":\"nvim\",\"__MISE_SESSION\":\"eAFrX5OTn5iSmhJfkp+fUzxhHZSXnJ+XlplePPGmin5Gfm6qflJpemqRvh5EWD83szhVH8LWK8nPzVkDYccXJJZkFE9YnJpX1rA4JbNoN7LegqL8rNTkkmL9sszi/CKjNal5ZfFliUXxGYnFGRuSjC0NU9NMDZLMDZMNTS3M1uYklqQWl8SXFqQklqQeEWCAA8aZJj5KcwGShkTR\",\"DISPLAY\":\":0\",\"SHLVL\":\"2\",\"XDG_SESSION_ID\":\"4\",\"KUBECONFIG\":\"/home/buger/.kube/config\",\"XDG_RUNTIME_DIR\":\"/run/user/1000\",\"SSH_CLIENT\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 22\",\"GOOGLE_API_KEY\":\"AIzaSyBRip8ekApm09lSy0zMN84DuR17VxIyxPk\",\"DEBUGINFOD_URLS\":\"https://debuginfod.archlinux.org \",\"MISE_SHELL\":\"bash\",\"PATH\":\"/home/buger/.local/bin:./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"ZELLIJ\":\"0\",\"DBUS_SESSION_BUS_ADDRESS\":\"unix:path=/run/user/1000/bus\",\"MAIL\":\"/var/spool/mail/buger\",\"SSH_TTY\":\"/dev/pts/0\",\"_\":\"./dist/index.js\",\"VISOR_VERSION\":\"0.1.42\",\"PROBE_VERSION\":\"0.6.0-rc164\",\"VISOR_COMMIT_SHA\":\"c00d0c684081c98a6b0088886089b18e6ef03c24\",\"VISOR_COMMIT_SHORT\":\"c00d0c68\",\"VISOR_FALLBACK_TRACE_FILE\":\"/home/buger/projects/visor2/output/traces/run-2025-11-19T10-55-29-781Z.ndjson\",\"VISOR_OUTPUT_FORMAT\":\"table\",\"VISOR_DEBUG\":\"false\",\"GITHUB_REPOSITORY\":\"owner/repo\",\"VISOR_AGENT_OUT_DIR\":\"output\",\"VISOR_AGENT_CLEANUP_FORCE\":\"true\",\"VISOR_STRICT_ERRORS\":\"true\",\"VISOR_PROMPT_TYPE\":\"engineer\"}}"},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"code-review","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"code-review","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{\"verify-tests\":\"\",\"start\":{\"issues\":[],\"logOutput\":\"üêõ **DEBUG**: start\\n\\n### PR Context\\n- **PR #1**: Bug: crashes on search edge case\\n- **Author**: test-user\\n- **Base**: main ‚Üí **Head**: feature/test\\n- **Changes**: +0 -0\\n- **Files Modified**: 0\\n\\n### Dependency Results\\n- No dependency results available\\n\\n### Execution Metadata\\n- **Timestamp**: 2025-11-19T10:55:29.949Z\\n- **Node Version**: v24.7.0\\n- **Platform**: linux\\n- **Working Directory**: /home/buger/projects/visor2\"},\"detect-mode\":\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\",\"draft\":{\"slug\":\"helloagent\",\"files\":[{\"path\":\"helloagent.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"helloagent.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"helloagent.yaml\\\"\\ntests:\\n  defaults: { strict: true, ai_provider: mock }\\n  cases:\\n    - name: ok\\n      event: issue_opened\\n      fixture: gh.issue_open.minimal\\n      expect:\\n        calls:\\n          - step: hello\\n            exactly: 1\\n\"}],\"ts\":1763549729991},\"write\":{\"written\":[\"/home/buger/projects/visor2/output/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730088},\"config-lint\":\"üîç Visor Configuration Validator\\n\\nüìÇ Validating configuration: /home/buger/projects/visor2/output/agent.yaml\\n\\n‚úÖ Configuration is valid!\\n\\nüìã Summary:\\n   Version: 1.0\\n   Checks: 1\\n\\nüìù Configured checks:\\n   ‚Ä¢ hello (type: log)\",\"tests-validate\":\"valid\"}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"cleanup","visor.provider.type":"command"}}
{"name":"visor.check","attributes":{"visor.check.id":"cleanup","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"fileCount\":0,\"outputs\":{\"code-review\":{\"ok\":true,\"feedback\":\"LGTM\",\"ts\":1763549730860},\"start\":{\"issues\":[],\"logOutput\":\"üêõ **DEBUG**: start\\n\\n### PR Context\\n- **PR #1**: Bug: crashes on search edge case\\n- **Author**: test-user\\n- **Base**: main ‚Üí **Head**: feature/test\\n- **Changes**: +0 -0\\n- **Files Modified**: 0\\n\\n### Dependency Results\\n- No dependency results available\\n\\n### Execution Metadata\\n- **Timestamp**: 2025-11-19T10:55:29.949Z\\n- **Node Version**: v24.7.0\\n- **Platform**: linux\\n- **Working Directory**: /home/buger/projects/visor2\"},\"detect-mode\":\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\",\"draft\":{\"slug\":\"helloagent\",\"files\":[{\"path\":\"helloagent.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"helloagent.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"helloagent.yaml\\\"\\ntests:\\n  defaults: { strict: true, ai_provider: mock }\\n  cases:\\n    - name: ok\\n      event: issue_opened\\n      fixture: gh.issue_open.minimal\\n      expect:\\n        calls:\\n          - step: hello\\n            exactly: 1\\n\"}],\"ts\":1763549729991},\"write\":{\"written\":[\"/home/buger/projects/visor2/output/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730088},\"config-lint\":\"üîç Visor Configuration Validator\\n\\nüìÇ Validating configuration: /home/buger/projects/visor2/output/agent.yaml\\n\\n‚úÖ Configuration is valid!\\n\\nüìã Summary:\\n   Version: 1.0\\n   Checks: 1\\n\\nüìù Configured checks:\\n   ‚Ä¢ hello (type: log)\",\"tests-validate\":\"valid\",\"verify-tests\":\"\",\"history\":{\"write\":[{\"written\":[\"/home/buger/projects/visor2/output/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730088}],\"start\":[],\"detect-mode\":[\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\"],\"draft\":[{\"slug\":\"helloagent\",\"files\":[{\"path\":\"helloagent.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"helloagent.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"helloagent.yaml\\\"\\ntests:\\n  defaults: { strict: true, ai_provider: mock }\\n  cases:\\n    - name: ok\\n      event: issue_opened\\n      fixture: gh.issue_open.minimal\\n      expect:\\n        calls:\\n          - step: hello\\n            exactly: 1\\n\"}],\"ts\":1763549729991}],\"tests-validate\":[\"valid\"],\"config-lint\":[\"üîç Visor Configuration Validator\\n\\nüìÇ Validating configuration: /home/buger/projects/visor2/output/agent.yaml\\n\\n‚úÖ Configuration is valid!\\n\\nüìã Summary:\\n   Version: 1.0\\n   Checks: 1\\n\\nüìù Configured checks:\\n   ‚Ä¢ hello (type: log)\"],\"verify-tests\":[\"\"],\"code-review\":[{\"ok\":true,\"feedback\":\"LGTM\",\"ts\":1763549730860}]}},\"outputs_history\":{\"write\":[{\"written\":[\"/home/buger/projects/visor2/output/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/output/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730088}],\"start\":[],\"detect-mode\":[\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\"],\"draft\":[{\"slug\":\"helloagent\",\"files\":[{\"path\":\"helloagent.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"helloagent.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"helloagent.yaml\\\"\\ntests:\\n  defaults: { strict: true, ai_provider: mock }\\n  cases:\\n    - name: ok\\n      event: issue_opened\\n      fixture: gh.issue_open.minimal\\n      expect:\\n        calls:\\n          - step: hello\\n            exactly: 1\\n\"}],\"ts\":1763549729991}],\"tests-validate\":[\"valid\"],\"config-lint\":[\"üîç Visor Configuration Validator\\n\\nüìÇ Validating configuration: /home/buger/projects/visor2/output/agent.yaml\\n\\n‚úÖ Configuration is valid!\\n\\nüìã Summary:\\n   Version: 1.0\\n   Checks: 1\\n\\nüìù Configured checks:\\n   ‚Ä¢ hello (type: log)\"],\"verify-tests\":[\"\"],\"code-review\":[{\"ok\":true,\"feedback\":\"LGTM\",\"ts\":1763549730860}]},\"outputs_history_stage\":{},\"outputs_raw\":{},\"inputs\":{},\"env\":{\"SHELL\":\"/usr/bin/bash\",\"COLORTERM\":\"truecolor\",\"ZELLIJ_SESSION_NAME\":\"friendly-horse\",\"EDITOR\":\"nvim\",\"PWD\":\"/home/buger/projects/visor2\",\"LOGNAME\":\"buger\",\"ZELLIJ_PANE_ID\":\"41\",\"XDG_SESSION_TYPE\":\"tty\",\"MOTD_SHOWN\":\"pam\",\"HOME\":\"/home/buger\",\"LANG\":\"en_US.UTF-8\",\"STARSHIP_SHELL\":\"bash\",\"WAYLAND_DISPLAY\":\"wayland-1\",\"__MISE_DIFF\":\"eAFrXpyfk9KwOC+1vGFJQWJJxgQASssINA\",\"SSH_CONNECTION\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 fe80::7a55:36ff:fe01:cdfe%enp1s0 22\",\"BAT_THEME\":\"ansi\",\"STARSHIP_SESSION_KEY\":\"5614152961699532\",\"__MISE_ORIG_PATH\":\"./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"XDG_SESSION_CLASS\":\"user\",\"TERM\":\"xterm-256color\",\"USER\":\"buger\",\"SUDO_EDITOR\":\"nvim\",\"__MISE_SESSION\":\"eAFrX5OTn5iSmhJfkp+fUzxhHZSXnJ+XlplePPGmin5Gfm6qflJpemqRvh5EWD83szhVH8LWK8nPzVkDYccXJJZkFE9YnJpX1rA4JbNoN7LegqL8rNTkkmL9sszi/CKjNal5ZfFliUXxGYnFGRuSjC0NU9NMDZLMDZMNTS3M1uYklqQWl8SXFqQklqQeEWCAA8aZJj5KcwGShkTR\",\"DISPLAY\":\":0\",\"SHLVL\":\"2\",\"XDG_SESSION_ID\":\"4\",\"KUBECONFIG\":\"/home/buger/.kube/config\",\"XDG_RUNTIME_DIR\":\"/run/user/1000\",\"SSH_CLIENT\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 22\",\"GOOGLE_API_KEY\":\"AIzaSyBRip8ekApm09lSy0zMN84DuR17VxIyxPk\",\"DEBUGINFOD_URLS\":\"https://debuginfod.archlinux.org \",\"MISE_SHELL\":\"bash\",\"PATH\":\"/home/buger/.local/bin:./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"ZELLIJ\":\"0\",\"DBUS_SESSION_BUS_ADDRESS\":\"unix:path=/run/user/1000/bus\",\"MAIL\":\"/var/spool/mail/buger\",\"SSH_TTY\":\"/dev/pts/0\",\"_\":\"./dist/index.js\",\"VISOR_VERSION\":\"0.1.42\",\"PROBE_VERSION\":\"0.6.0-rc164\",\"VISOR_COMMIT_SHA\":\"c00d0c684081c98a6b0088886089b18e6ef03c24\",\"VISOR_COMMIT_SHORT\":\"c00d0c68\",\"VISOR_FALLBACK_TRACE_FILE\":\"/home/buger/projects/visor2/output/traces/run-2025-11-19T10-55-29-781Z.ndjson\",\"VISOR_OUTPUT_FORMAT\":\"table\",\"VISOR_DEBUG\":\"false\",\"GITHUB_REPOSITORY\":\"owner/repo\",\"VISOR_AGENT_OUT_DIR\":\"output\",\"VISOR_AGENT_CLEANUP_FORCE\":\"true\",\"VISOR_STRICT_ERRORS\":\"true\",\"VISOR_PROMPT_TYPE\":\"engineer\"}}"},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"finish","visor.provider.type":"log"}}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":2,"session_id":"83b10c49-afc8-4544-bbe6-e36a0a750099"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"start","visor.provider.type":"log"}}
{"name":"visor.provider","attributes":{"visor.check.id":"detect-mode","visor.provider.type":"command"}}
{"name":"visor.check","attributes":{"visor.check.id":"detect-mode","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"fileCount\":0,\"outputs\":{\"history\":{}},\"outputs_history\":{},\"outputs_history_stage\":{},\"outputs_raw\":{},\"inputs\":{},\"env\":{\"SHELL\":\"/usr/bin/bash\",\"COLORTERM\":\"truecolor\",\"ZELLIJ_SESSION_NAME\":\"friendly-horse\",\"EDITOR\":\"nvim\",\"PWD\":\"/home/buger/projects/visor2\",\"LOGNAME\":\"buger\",\"ZELLIJ_PANE_ID\":\"41\",\"XDG_SESSION_TYPE\":\"tty\",\"MOTD_SHOWN\":\"pam\",\"HOME\":\"/home/buger\",\"LANG\":\"en_US.UTF-8\",\"STARSHIP_SHELL\":\"bash\",\"WAYLAND_DISPLAY\":\"wayland-1\",\"__MISE_DIFF\":\"eAFrXpyfk9KwOC+1vGFJQWJJxgQASssINA\",\"SSH_CONNECTION\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 fe80::7a55:36ff:fe01:cdfe%enp1s0 22\",\"BAT_THEME\":\"ansi\",\"STARSHIP_SESSION_KEY\":\"5614152961699532\",\"__MISE_ORIG_PATH\":\"./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"XDG_SESSION_CLASS\":\"user\",\"TERM\":\"xterm-256color\",\"USER\":\"buger\",\"SUDO_EDITOR\":\"nvim\",\"__MISE_SESSION\":\"eAFrX5OTn5iSmhJfkp+fUzxhHZSXnJ+XlplePPGmin5Gfm6qflJpemqRvh5EWD83szhVH8LWK8nPzVkDYccXJJZkFE9YnJpX1rA4JbNoN7LegqL8rNTkkmL9sszi/CKjNal5ZfFliUXxGYnFGRuSjC0NU9NMDZLMDZMNTS3M1uYklqQWl8SXFqQklqQeEWCAA8aZJj5KcwGShkTR\",\"DISPLAY\":\":0\",\"SHLVL\":\"2\",\"XDG_SESSION_ID\":\"4\",\"KUBECONFIG\":\"/home/buger/.kube/config\",\"XDG_RUNTIME_DIR\":\"/run/user/1000\",\"SSH_CLIENT\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 22\",\"GOOGLE_API_KEY\":\"AIzaSyBRip8ekApm09lSy0zMN84DuR17VxIyxPk\",\"DEBUGINFOD_URLS\":\"https://debuginfod.archlinux.org \",\"MISE_SHELL\":\"bash\",\"PATH\":\"/home/buger/.local/bin:./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"ZELLIJ\":\"0\",\"DBUS_SESSION_BUS_ADDRESS\":\"unix:path=/run/user/1000/bus\",\"MAIL\":\"/var/spool/mail/buger\",\"SSH_TTY\":\"/dev/pts/0\",\"_\":\"./dist/index.js\",\"VISOR_VERSION\":\"0.1.42\",\"PROBE_VERSION\":\"0.6.0-rc164\",\"VISOR_COMMIT_SHA\":\"c00d0c684081c98a6b0088886089b18e6ef03c24\",\"VISOR_COMMIT_SHORT\":\"c00d0c68\",\"VISOR_FALLBACK_TRACE_FILE\":\"/home/buger/projects/visor2/output/traces/run-2025-11-19T10-55-29-781Z.ndjson\",\"VISOR_OUTPUT_FORMAT\":\"table\",\"VISOR_DEBUG\":\"false\",\"VISOR_PROMPT_TYPE\":\"engineer\",\"GITHUB_REPOSITORY\":\"owner/repo\",\"VISOR_AGENT_MODE\":\"improve\",\"VISOR_AGENT_OUT_DIR\":\"tmp\",\"VISOR_AGENT_PATH\":\"tmp/improv.yaml\",\"VISOR_AGENT_TESTS_PATH\":\"tmp/improv.tests.yaml\",\"VISOR_STRICT_ERRORS\":\"true\"}}"},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"load-existing","visor.provider.type":"command"}}
{"name":"visor.check","attributes":{"visor.check.id":"load-existing","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"fileCount\":0,\"outputs\":{\"detect-mode\":\"\",\"start\":{\"issues\":[],\"logOutput\":\"üêõ **DEBUG**: start\\n\\n### PR Context\\n- **PR #1**: Bug: crashes on search edge case\\n- **Author**: test-user\\n- **Base**: main ‚Üí **Head**: feature/test\\n- **Changes**: +0 -0\\n- **Files Modified**: 0\\n\\n### Dependency Results\\n- No dependency results available\\n\\n### Execution Metadata\\n- **Timestamp**: 2025-11-19T10:55:30.871Z\\n- **Node Version**: v24.7.0\\n- **Platform**: linux\\n- **Working Directory**: /home/buger/projects/visor2\"},\"write\":{\"issues\":[]},\"history\":{\"write\":[],\"start\":[],\"detect-mode\":[\"\"]}},\"outputs_history\":{\"write\":[],\"start\":[],\"detect-mode\":[\"\"]},\"outputs_history_stage\":{},\"outputs_raw\":{},\"inputs\":{},\"env\":{\"SHELL\":\"/usr/bin/bash\",\"COLORTERM\":\"truecolor\",\"ZELLIJ_SESSION_NAME\":\"friendly-horse\",\"EDITOR\":\"nvim\",\"PWD\":\"/home/buger/projects/visor2\",\"LOGNAME\":\"buger\",\"ZELLIJ_PANE_ID\":\"41\",\"XDG_SESSION_TYPE\":\"tty\",\"MOTD_SHOWN\":\"pam\",\"HOME\":\"/home/buger\",\"LANG\":\"en_US.UTF-8\",\"STARSHIP_SHELL\":\"bash\",\"WAYLAND_DISPLAY\":\"wayland-1\",\"__MISE_DIFF\":\"eAFrXpyfk9KwOC+1vGFJQWJJxgQASssINA\",\"SSH_CONNECTION\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 fe80::7a55:36ff:fe01:cdfe%enp1s0 22\",\"BAT_THEME\":\"ansi\",\"STARSHIP_SESSION_KEY\":\"5614152961699532\",\"__MISE_ORIG_PATH\":\"./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"XDG_SESSION_CLASS\":\"user\",\"TERM\":\"xterm-256color\",\"USER\":\"buger\",\"SUDO_EDITOR\":\"nvim\",\"__MISE_SESSION\":\"eAFrX5OTn5iSmhJfkp+fUzxhHZSXnJ+XlplePPGmin5Gfm6qflJpemqRvh5EWD83szhVH8LWK8nPzVkDYccXJJZkFE9YnJpX1rA4JbNoN7LegqL8rNTkkmL9sszi/CKjNal5ZfFliUXxGYnFGRuSjC0NU9NMDZLMDZMNTS3M1uYklqQWl8SXFqQklqQeEWCAA8aZJj5KcwGShkTR\",\"DISPLAY\":\":0\",\"SHLVL\":\"2\",\"XDG_SESSION_ID\":\"4\",\"KUBECONFIG\":\"/home/buger/.kube/config\",\"XDG_RUNTIME_DIR\":\"/run/user/1000\",\"SSH_CLIENT\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 22\",\"GOOGLE_API_KEY\":\"AIzaSyBRip8ekApm09lSy0zMN84DuR17VxIyxPk\",\"DEBUGINFOD_URLS\":\"https://debuginfod.archlinux.org \",\"MISE_SHELL\":\"bash\",\"PATH\":\"/home/buger/.local/bin:./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"ZELLIJ\":\"0\",\"DBUS_SESSION_BUS_ADDRESS\":\"unix:path=/run/user/1000/bus\",\"MAIL\":\"/var/spool/mail/buger\",\"SSH_TTY\":\"/dev/pts/0\",\"_\":\"./dist/index.js\",\"VISOR_VERSION\":\"0.1.42\",\"PROBE_VERSION\":\"0.6.0-rc164\",\"VISOR_COMMIT_SHA\":\"c00d0c684081c98a6b0088886089b18e6ef03c24\",\"VISOR_COMMIT_SHORT\":\"c00d0c68\",\"VISOR_FALLBACK_TRACE_FILE\":\"/home/buger/projects/visor2/output/traces/run-2025-11-19T10-55-29-781Z.ndjson\",\"VISOR_OUTPUT_FORMAT\":\"table\",\"VISOR_DEBUG\":\"false\",\"VISOR_PROMPT_TYPE\":\"engineer\",\"GITHUB_REPOSITORY\":\"owner/repo\",\"VISOR_AGENT_MODE\":\"improve\",\"VISOR_AGENT_OUT_DIR\":\"tmp\",\"VISOR_AGENT_PATH\":\"tmp/improv.yaml\",\"VISOR_AGENT_TESTS_PATH\":\"tmp/improv.tests.yaml\",\"VISOR_STRICT_ERRORS\":\"true\"}}"},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"Completed","engine_mode":"state-machine","wave":2,"session_id":"9b36cce9-869b-4347-9a48-403348c31d47"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"Init","state_to":"PlanReady","engine_mode":"state-machine","wave":0,"session_id":"13322737-f597-4e2b-98df-71f407afa878"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"PlanReady","state_to":"WavePlanning","engine_mode":"state-machine","wave":0,"session_id":"13322737-f597-4e2b-98df-71f407afa878"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":1,"session_id":"13322737-f597-4e2b-98df-71f407afa878"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"start","visor.provider.type":"log"}}
{"name":"visor.provider","attributes":{"visor.check.id":"detect-mode","visor.provider.type":"command"}}
{"name":"visor.check","attributes":{"visor.check.id":"detect-mode","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"fileCount\":0,\"outputs\":{\"history\":{}},\"outputs_history\":{},\"outputs_history_stage\":{},\"outputs_raw\":{},\"inputs\":{},\"env\":{\"SHELL\":\"/usr/bin/bash\",\"COLORTERM\":\"truecolor\",\"ZELLIJ_SESSION_NAME\":\"friendly-horse\",\"EDITOR\":\"nvim\",\"PWD\":\"/home/buger/projects/visor2\",\"LOGNAME\":\"buger\",\"ZELLIJ_PANE_ID\":\"41\",\"XDG_SESSION_TYPE\":\"tty\",\"MOTD_SHOWN\":\"pam\",\"HOME\":\"/home/buger\",\"LANG\":\"en_US.UTF-8\",\"STARSHIP_SHELL\":\"bash\",\"WAYLAND_DISPLAY\":\"wayland-1\",\"__MISE_DIFF\":\"eAFrXpyfk9KwOC+1vGFJQWJJxgQASssINA\",\"SSH_CONNECTION\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 fe80::7a55:36ff:fe01:cdfe%enp1s0 22\",\"BAT_THEME\":\"ansi\",\"STARSHIP_SESSION_KEY\":\"5614152961699532\",\"__MISE_ORIG_PATH\":\"./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"XDG_SESSION_CLASS\":\"user\",\"TERM\":\"xterm-256color\",\"USER\":\"buger\",\"SUDO_EDITOR\":\"nvim\",\"__MISE_SESSION\":\"eAFrX5OTn5iSmhJfkp+fUzxhHZSXnJ+XlplePPGmin5Gfm6qflJpemqRvh5EWD83szhVH8LWK8nPzVkDYccXJJZkFE9YnJpX1rA4JbNoN7LegqL8rNTkkmL9sszi/CKjNal5ZfFliUXxGYnFGRuSjC0NU9NMDZLMDZMNTS3M1uYklqQWl8SXFqQklqQeEWCAA8aZJj5KcwGShkTR\",\"DISPLAY\":\":0\",\"SHLVL\":\"2\",\"XDG_SESSION_ID\":\"4\",\"KUBECONFIG\":\"/home/buger/.kube/config\",\"XDG_RUNTIME_DIR\":\"/run/user/1000\",\"SSH_CLIENT\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 22\",\"GOOGLE_API_KEY\":\"AIzaSyBRip8ekApm09lSy0zMN84DuR17VxIyxPk\",\"DEBUGINFOD_URLS\":\"https://debuginfod.archlinux.org \",\"MISE_SHELL\":\"bash\",\"PATH\":\"/home/buger/.local/bin:./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"ZELLIJ\":\"0\",\"DBUS_SESSION_BUS_ADDRESS\":\"unix:path=/run/user/1000/bus\",\"MAIL\":\"/var/spool/mail/buger\",\"SSH_TTY\":\"/dev/pts/0\",\"_\":\"./dist/index.js\",\"VISOR_VERSION\":\"0.1.42\",\"PROBE_VERSION\":\"0.6.0-rc164\",\"VISOR_COMMIT_SHA\":\"c00d0c684081c98a6b0088886089b18e6ef03c24\",\"VISOR_COMMIT_SHORT\":\"c00d0c68\",\"VISOR_FALLBACK_TRACE_FILE\":\"/home/buger/projects/visor2/output/traces/run-2025-11-19T10-55-29-781Z.ndjson\",\"VISOR_OUTPUT_FORMAT\":\"table\",\"VISOR_DEBUG\":\"false\",\"VISOR_PROMPT_TYPE\":\"engineer\",\"GITHUB_REPOSITORY\":\"owner/repo\",\"VISOR_AGENT_OUT_DIR\":\"tmp\",\"VISOR_STRICT_ERRORS\":\"true\"}}"},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.provider","attributes":{"visor.check.id":"draft","visor.provider.type":"ai"}}
{"name":"visor.check","attributes":{"visor.check.id":"draft","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"outputs\":{}}"},"events":[]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"13322737-f597-4e2b-98df-71f407afa878"}}]}
{"name":"visor.check","attributes":{"visor.check.id":"detect-mode","visor.check.output":"\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\""},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"13322737-f597-4e2b-98df-71f407afa878"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"13322737-f597-4e2b-98df-71f407afa878"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":1,"session_id":"13322737-f597-4e2b-98df-71f407afa878"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"13322737-f597-4e2b-98df-71f407afa878"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"write","visor.provider.type":"command"}}
{"name":"visor.check","attributes":{"visor.check.id":"write","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"fileCount\":0,\"outputs\":{\"start\":{\"issues\":[],\"logOutput\":\"üêõ **DEBUG**: start\\n\\n### PR Context\\n- **PR #1**: Bug: crashes on search edge case\\n- **Author**: test-user\\n- **Base**: main ‚Üí **Head**: feature/test\\n- **Changes**: +0 -0\\n- **Files Modified**: 0\\n\\n### Dependency Results\\n- No dependency results available\\n\\n### Execution Metadata\\n- **Timestamp**: 2025-11-19T10:55:30.878Z\\n- **Node Version**: v24.7.0\\n- **Platform**: linux\\n- **Working Directory**: /home/buger/projects/visor2\"},\"detect-mode\":\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\",\"draft\":{\"slug\":\"tval\",\"files\":[{\"path\":\"tval.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"tval.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"tval.yaml\\\"\\n# wrong shape on purpose\\ncases:\\n  - name: wrong-shape\\n\"}],\"ts\":1763549730899},\"write\":{\"issues\":[]},\"history\":{\"write\":[],\"start\":[],\"detect-mode\":[\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\"],\"draft\":[{\"slug\":\"tval\",\"files\":[{\"path\":\"tval.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"tval.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"tval.yaml\\\"\\n# wrong shape on purpose\\ncases:\\n  - name: wrong-shape\\n\"}],\"ts\":1763549730899}]}},\"outputs_history\":{\"write\":[],\"start\":[],\"detect-mode\":[\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\"],\"draft\":[{\"slug\":\"tval\",\"files\":[{\"path\":\"tval.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"tval.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"tval.yaml\\\"\\n# wrong shape on purpose\\ncases:\\n  - name: wrong-shape\\n\"}],\"ts\":1763549730899}]},\"outputs_history_stage\":{},\"outputs_raw\":{},\"inputs\":{},\"env\":{\"SHELL\":\"/usr/bin/bash\",\"COLORTERM\":\"truecolor\",\"ZELLIJ_SESSION_NAME\":\"friendly-horse\",\"EDITOR\":\"nvim\",\"PWD\":\"/home/buger/projects/visor2\",\"LOGNAME\":\"buger\",\"ZELLIJ_PANE_ID\":\"41\",\"XDG_SESSION_TYPE\":\"tty\",\"MOTD_SHOWN\":\"pam\",\"HOME\":\"/home/buger\",\"LANG\":\"en_US.UTF-8\",\"STARSHIP_SHELL\":\"bash\",\"WAYLAND_DISPLAY\":\"wayland-1\",\"__MISE_DIFF\":\"eAFrXpyfk9KwOC+1vGFJQWJJxgQASssINA\",\"SSH_CONNECTION\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 fe80::7a55:36ff:fe01:cdfe%enp1s0 22\",\"BAT_THEME\":\"ansi\",\"STARSHIP_SESSION_KEY\":\"5614152961699532\",\"__MISE_ORIG_PATH\":\"./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"XDG_SESSION_CLASS\":\"user\",\"TERM\":\"xterm-256color\",\"USER\":\"buger\",\"SUDO_EDITOR\":\"nvim\",\"__MISE_SESSION\":\"eAFrX5OTn5iSmhJfkp+fUzxhHZSXnJ+XlplePPGmin5Gfm6qflJpemqRvh5EWD83szhVH8LWK8nPzVkDYccXJJZkFE9YnJpX1rA4JbNoN7LegqL8rNTkkmL9sszi/CKjNal5ZfFliUXxGYnFGRuSjC0NU9NMDZLMDZMNTS3M1uYklqQWl8SXFqQklqQeEWCAA8aZJj5KcwGShkTR\",\"DISPLAY\":\":0\",\"SHLVL\":\"2\",\"XDG_SESSION_ID\":\"4\",\"KUBECONFIG\":\"/home/buger/.kube/config\",\"XDG_RUNTIME_DIR\":\"/run/user/1000\",\"SSH_CLIENT\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 22\",\"GOOGLE_API_KEY\":\"AIzaSyBRip8ekApm09lSy0zMN84DuR17VxIyxPk\",\"DEBUGINFOD_URLS\":\"https://debuginfod.archlinux.org \",\"MISE_SHELL\":\"bash\",\"PATH\":\"/home/buger/.local/bin:./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"ZELLIJ\":\"0\",\"DBUS_SESSION_BUS_ADDRESS\":\"unix:path=/run/user/1000/bus\",\"MAIL\":\"/var/spool/mail/buger\",\"SSH_TTY\":\"/dev/pts/0\",\"_\":\"./dist/index.js\",\"VISOR_VERSION\":\"0.1.42\",\"PROBE_VERSION\":\"0.6.0-rc164\",\"VISOR_COMMIT_SHA\":\"c00d0c684081c98a6b0088886089b18e6ef03c24\",\"VISOR_COMMIT_SHORT\":\"c00d0c68\",\"VISOR_FALLBACK_TRACE_FILE\":\"/home/buger/projects/visor2/output/traces/run-2025-11-19T10-55-29-781Z.ndjson\",\"VISOR_OUTPUT_FORMAT\":\"table\",\"VISOR_DEBUG\":\"false\",\"VISOR_PROMPT_TYPE\":\"engineer\",\"GITHUB_REPOSITORY\":\"owner/repo\",\"VISOR_AGENT_OUT_DIR\":\"tmp\",\"VISOR_STRICT_ERRORS\":\"true\"}}"},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.check","attributes":{"visor.check.id":"write","visor.check.output":"{\"written\":[\"/home/buger/projects/visor2/tmp/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/tmp/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/tmp/agent.yaml\",\"mode\":\"new\"}"},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"13322737-f597-4e2b-98df-71f407afa878"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"13322737-f597-4e2b-98df-71f407afa878"}}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"WavePlanning","state_to":"LevelDispatch","engine_mode":"state-machine","wave":2,"session_id":"13322737-f597-4e2b-98df-71f407afa878"}}]}
{"name":"visor.provider","attributes":{"visor.check.id":"config-lint","visor.provider.type":"command"}}
{"name":"visor.check","attributes":{"visor.check.id":"config-lint","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"fileCount\":0,\"outputs\":{\"write\":{\"written\":[\"/home/buger/projects/visor2/tmp/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/tmp/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/tmp/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730989},\"start\":{\"issues\":[],\"logOutput\":\"üêõ **DEBUG**: start\\n\\n### PR Context\\n- **PR #1**: Bug: crashes on search edge case\\n- **Author**: test-user\\n- **Base**: main ‚Üí **Head**: feature/test\\n- **Changes**: +0 -0\\n- **Files Modified**: 0\\n\\n### Dependency Results\\n- No dependency results available\\n\\n### Execution Metadata\\n- **Timestamp**: 2025-11-19T10:55:30.878Z\\n- **Node Version**: v24.7.0\\n- **Platform**: linux\\n- **Working Directory**: /home/buger/projects/visor2\"},\"detect-mode\":\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\",\"draft\":{\"slug\":\"tval\",\"files\":[{\"path\":\"tval.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"tval.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"tval.yaml\\\"\\n# wrong shape on purpose\\ncases:\\n  - name: wrong-shape\\n\"}],\"ts\":1763549730899},\"history\":{\"write\":[{\"written\":[\"/home/buger/projects/visor2/tmp/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/tmp/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/tmp/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730989}],\"start\":[],\"detect-mode\":[\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\"],\"draft\":[{\"slug\":\"tval\",\"files\":[{\"path\":\"tval.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"tval.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"tval.yaml\\\"\\n# wrong shape on purpose\\ncases:\\n  - name: wrong-shape\\n\"}],\"ts\":1763549730899}]}},\"outputs_history\":{\"write\":[{\"written\":[\"/home/buger/projects/visor2/tmp/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/tmp/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/tmp/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730989}],\"start\":[],\"detect-mode\":[\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\"],\"draft\":[{\"slug\":\"tval\",\"files\":[{\"path\":\"tval.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"tval.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"tval.yaml\\\"\\n# wrong shape on purpose\\ncases:\\n  - name: wrong-shape\\n\"}],\"ts\":1763549730899}]},\"outputs_history_stage\":{},\"outputs_raw\":{},\"inputs\":{},\"env\":{\"SHELL\":\"/usr/bin/bash\",\"COLORTERM\":\"truecolor\",\"ZELLIJ_SESSION_NAME\":\"friendly-horse\",\"EDITOR\":\"nvim\",\"PWD\":\"/home/buger/projects/visor2\",\"LOGNAME\":\"buger\",\"ZELLIJ_PANE_ID\":\"41\",\"XDG_SESSION_TYPE\":\"tty\",\"MOTD_SHOWN\":\"pam\",\"HOME\":\"/home/buger\",\"LANG\":\"en_US.UTF-8\",\"STARSHIP_SHELL\":\"bash\",\"WAYLAND_DISPLAY\":\"wayland-1\",\"__MISE_DIFF\":\"eAFrXpyfk9KwOC+1vGFJQWJJxgQASssINA\",\"SSH_CONNECTION\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 fe80::7a55:36ff:fe01:cdfe%enp1s0 22\",\"BAT_THEME\":\"ansi\",\"STARSHIP_SESSION_KEY\":\"5614152961699532\",\"__MISE_ORIG_PATH\":\"./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"XDG_SESSION_CLASS\":\"user\",\"TERM\":\"xterm-256color\",\"USER\":\"buger\",\"SUDO_EDITOR\":\"nvim\",\"__MISE_SESSION\":\"eAFrX5OTn5iSmhJfkp+fUzxhHZSXnJ+XlplePPGmin5Gfm6qflJpemqRvh5EWD83szhVH8LWK8nPzVkDYccXJJZkFE9YnJpX1rA4JbNoN7LegqL8rNTkkmL9sszi/CKjNal5ZfFliUXxGYnFGRuSjC0NU9NMDZLMDZMNTS3M1uYklqQWl8SXFqQklqQeEWCAA8aZJj5KcwGShkTR\",\"DISPLAY\":\":0\",\"SHLVL\":\"2\",\"XDG_SESSION_ID\":\"4\",\"KUBECONFIG\":\"/home/buger/.kube/config\",\"XDG_RUNTIME_DIR\":\"/run/user/1000\",\"SSH_CLIENT\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 22\",\"GOOGLE_API_KEY\":\"AIzaSyBRip8ekApm09lSy0zMN84DuR17VxIyxPk\",\"DEBUGINFOD_URLS\":\"https://debuginfod.archlinux.org \",\"MISE_SHELL\":\"bash\",\"PATH\":\"/home/buger/.local/bin:./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"ZELLIJ\":\"0\",\"DBUS_SESSION_BUS_ADDRESS\":\"unix:path=/run/user/1000/bus\",\"MAIL\":\"/var/spool/mail/buger\",\"SSH_TTY\":\"/dev/pts/0\",\"_\":\"./dist/index.js\",\"VISOR_VERSION\":\"0.1.42\",\"PROBE_VERSION\":\"0.6.0-rc164\",\"VISOR_COMMIT_SHA\":\"c00d0c684081c98a6b0088886089b18e6ef03c24\",\"VISOR_COMMIT_SHORT\":\"c00d0c68\",\"VISOR_FALLBACK_TRACE_FILE\":\"/home/buger/projects/visor2/output/traces/run-2025-11-19T10-55-29-781Z.ndjson\",\"VISOR_OUTPUT_FORMAT\":\"table\",\"VISOR_DEBUG\":\"false\",\"VISOR_PROMPT_TYPE\":\"engineer\",\"GITHUB_REPOSITORY\":\"owner/repo\",\"VISOR_AGENT_OUT_DIR\":\"tmp\",\"VISOR_STRICT_ERRORS\":\"true\"}}"},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.provider","attributes":{"visor.check.id":"tests-validate","visor.provider.type":"command"}}
{"name":"visor.check","attributes":{"visor.check.id":"tests-validate","visor.check.input.context":"{\"pr\":{\"number\":1,\"title\":\"Bug: crashes on search edge case\",\"author\":\"test-user\",\"branch\":\"feature/test\",\"base\":\"main\"},\"files\":[],\"fileCount\":0,\"outputs\":{\"write\":{\"written\":[\"/home/buger/projects/visor2/tmp/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/tmp/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/tmp/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730989},\"start\":{\"issues\":[],\"logOutput\":\"üêõ **DEBUG**: start\\n\\n### PR Context\\n- **PR #1**: Bug: crashes on search edge case\\n- **Author**: test-user\\n- **Base**: main ‚Üí **Head**: feature/test\\n- **Changes**: +0 -0\\n- **Files Modified**: 0\\n\\n### Dependency Results\\n- No dependency results available\\n\\n### Execution Metadata\\n- **Timestamp**: 2025-11-19T10:55:30.878Z\\n- **Node Version**: v24.7.0\\n- **Platform**: linux\\n- **Working Directory**: /home/buger/projects/visor2\"},\"detect-mode\":\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\",\"draft\":{\"slug\":\"tval\",\"files\":[{\"path\":\"tval.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"tval.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"tval.yaml\\\"\\n# wrong shape on purpose\\ncases:\\n  - name: wrong-shape\\n\"}],\"ts\":1763549730899},\"history\":{\"write\":[{\"written\":[\"/home/buger/projects/visor2/tmp/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/tmp/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/tmp/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730989}],\"start\":[],\"detect-mode\":[\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\"],\"draft\":[{\"slug\":\"tval\",\"files\":[{\"path\":\"tval.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"tval.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"tval.yaml\\\"\\n# wrong shape on purpose\\ncases:\\n  - name: wrong-shape\\n\"}],\"ts\":1763549730899}]}},\"outputs_history\":{\"write\":[{\"written\":[\"/home/buger/projects/visor2/tmp/agent.yaml\"],\"slug\":\"agent\",\"config_path\":\"/home/buger/projects/visor2/tmp/agent.yaml\",\"tests_path\":\"/home/buger/projects/visor2/tmp/agent.yaml\",\"mode\":\"new\",\"ts\":1763549730989}],\"start\":[],\"detect-mode\":[\"{\\\"path\\\":\\\"\\\",\\\"exists\\\": false, \\\"empty\\\": , \\\"mode\\\": \\\"new\\\"}\"],\"draft\":[{\"slug\":\"tval\",\"files\":[{\"path\":\"tval.yaml\",\"content\":\"version: \\\"1.0\\\"\\noutput:\\n  pr_comment:\\n    format: markdown\\n    group_by: check\\n    collapse: true\\nsteps:\\n  hello:\\n    type: log\\n    message: \\\"hi\\\"\\n    level: info\\n    on: [issue_opened]\\n\"},{\"path\":\"tval.tests.yaml\",\"content\":\"version: \\\"1.0\\\"\\nextends: \\\"tval.yaml\\\"\\n# wrong shape on purpose\\ncases:\\n  - name: wrong-shape\\n\"}],\"ts\":1763549730899}]},\"outputs_history_stage\":{},\"outputs_raw\":{},\"inputs\":{},\"env\":{\"SHELL\":\"/usr/bin/bash\",\"COLORTERM\":\"truecolor\",\"ZELLIJ_SESSION_NAME\":\"friendly-horse\",\"EDITOR\":\"nvim\",\"PWD\":\"/home/buger/projects/visor2\",\"LOGNAME\":\"buger\",\"ZELLIJ_PANE_ID\":\"41\",\"XDG_SESSION_TYPE\":\"tty\",\"MOTD_SHOWN\":\"pam\",\"HOME\":\"/home/buger\",\"LANG\":\"en_US.UTF-8\",\"STARSHIP_SHELL\":\"bash\",\"WAYLAND_DISPLAY\":\"wayland-1\",\"__MISE_DIFF\":\"eAFrXpyfk9KwOC+1vGFJQWJJxgQASssINA\",\"SSH_CONNECTION\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 fe80::7a55:36ff:fe01:cdfe%enp1s0 22\",\"BAT_THEME\":\"ansi\",\"STARSHIP_SESSION_KEY\":\"5614152961699532\",\"__MISE_ORIG_PATH\":\"./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"XDG_SESSION_CLASS\":\"user\",\"TERM\":\"xterm-256color\",\"USER\":\"buger\",\"SUDO_EDITOR\":\"nvim\",\"__MISE_SESSION\":\"eAFrX5OTn5iSmhJfkp+fUzxhHZSXnJ+XlplePPGmin5Gfm6qflJpemqRvh5EWD83szhVH8LWK8nPzVkDYccXJJZkFE9YnJpX1rA4JbNoN7LegqL8rNTkkmL9sszi/CKjNal5ZfFliUXxGYnFGRuSjC0NU9NMDZLMDZMNTS3M1uYklqQWl8SXFqQklqQeEWCAA8aZJj5KcwGShkTR\",\"DISPLAY\":\":0\",\"SHLVL\":\"2\",\"XDG_SESSION_ID\":\"4\",\"KUBECONFIG\":\"/home/buger/.kube/config\",\"XDG_RUNTIME_DIR\":\"/run/user/1000\",\"SSH_CLIENT\":\"fe80::c69:48fa:a726:c61e%enp1s0 63348 22\",\"GOOGLE_API_KEY\":\"AIzaSyBRip8ekApm09lSy0zMN84DuR17VxIyxPk\",\"DEBUGINFOD_URLS\":\"https://debuginfod.archlinux.org \",\"MISE_SHELL\":\"bash\",\"PATH\":\"/home/buger/.local/bin:./bin:/home/buger/.local/bin:/home/buger/.turso:/home/buger/.cargo/bin:/home/buger/.local/bin:./bin:/home/buger/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\",\"ZELLIJ\":\"0\",\"DBUS_SESSION_BUS_ADDRESS\":\"unix:path=/run/user/1000/bus\",\"MAIL\":\"/var/spool/mail/buger\",\"SSH_TTY\":\"/dev/pts/0\",\"_\":\"./dist/index.js\",\"VISOR_VERSION\":\"0.1.42\",\"PROBE_VERSION\":\"0.6.0-rc164\",\"VISOR_COMMIT_SHA\":\"c00d0c684081c98a6b0088886089b18e6ef03c24\",\"VISOR_COMMIT_SHORT\":\"c00d0c68\",\"VISOR_FALLBACK_TRACE_FILE\":\"/home/buger/projects/visor2/output/traces/run-2025-11-19T10-55-29-781Z.ndjson\",\"VISOR_OUTPUT_FORMAT\":\"table\",\"VISOR_DEBUG\":\"false\",\"VISOR_PROMPT_TYPE\":\"engineer\",\"GITHUB_REPOSITORY\":\"owner/repo\",\"VISOR_AGENT_OUT_DIR\":\"tmp\",\"VISOR_STRICT_ERRORS\":\"true\"}}"},"events":[{"name":"check.started"},{"name":"check.completed"}]}
{"name":"visor.event","attributes":{},"events":[{"name":"engine.state_transition","attrs":{"state_from":"LevelDispatch","state_to":"WavePlanning","engine_mode":"state-machine","wave":2,"session_id":"13322737-f597-4e2b-98df-71f407afa878"}}]}
